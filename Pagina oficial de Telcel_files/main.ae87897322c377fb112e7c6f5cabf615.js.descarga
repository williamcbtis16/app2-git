/*! jQuery v1.11.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.1",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;
if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function ab(){return!0}function bb(){return!1}function cb(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==cb()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===cb()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ab:bb):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:bb,isPropagationStopped:bb,isImmediatePropagationStopped:bb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ab,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ab,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ab,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=bb;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=bb),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function db(a){var b=eb.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var eb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fb=/ jQuery\d+="(?:null|\d+)"/g,gb=new RegExp("<(?:"+eb+")[\\s/>]","i"),hb=/^\s+/,ib=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,jb=/<([\w:]+)/,kb=/<tbody/i,lb=/<|&#?\w+;/,mb=/<(?:script|style|link)/i,nb=/checked\s*(?:[^=]|=\s*.checked.)/i,ob=/^$|\/(?:java|ecma)script/i,pb=/^true\/(.*)/,qb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sb=db(y),tb=sb.appendChild(y.createElement("div"));rb.optgroup=rb.option,rb.tbody=rb.tfoot=rb.colgroup=rb.caption=rb.thead,rb.th=rb.td;function ub(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ub(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function vb(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wb(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xb(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function yb(a){var b=pb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function zb(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Ab(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Bb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xb(b).text=a.text,yb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!gb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(tb.innerHTML=a.outerHTML,tb.removeChild(f=tb.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ub(f),h=ub(a),g=0;null!=(e=h[g]);++g)d[g]&&Bb(e,d[g]);if(b)if(c)for(h=h||ub(a),d=d||ub(f),g=0;null!=(e=h[g]);g++)Ab(e,d[g]);else Ab(a,f);return d=ub(f,"script"),d.length>0&&zb(d,!i&&ub(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=db(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(lb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(jb.exec(f)||["",""])[1].toLowerCase(),l=rb[i]||rb._default,h.innerHTML=l[1]+f.replace(ib,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&hb.test(f)&&p.push(b.createTextNode(hb.exec(f)[0])),!k.tbody){f="table"!==i||kb.test(f)?"<table>"!==l[1]||kb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ub(p,"input"),vb),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ub(o.appendChild(f),"script"),g&&zb(h),c)){e=0;while(f=h[e++])ob.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ub(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&zb(ub(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ub(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fb,""):void 0;if(!("string"!=typeof a||mb.test(a)||!k.htmlSerialize&&gb.test(a)||!k.leadingWhitespace&&hb.test(a)||rb[(jb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ib,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ub(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ub(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&nb.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ub(i,"script"),xb),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ub(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,yb),j=0;f>j;j++)d=g[j],ob.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qb,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Cb,Db={};function Eb(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fb(a){var b=y,c=Db[a];return c||(c=Eb(a,b),"none"!==c&&c||(Cb=(Cb||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Cb[0].contentWindow||Cb[0].contentDocument).document,b.write(),b.close(),c=Eb(a,b),Cb.detach()),Db[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Gb=/^margin/,Hb=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ib,Jb,Kb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ib=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Hb.test(g)&&Gb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ib=function(a){return a.currentStyle},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Hb.test(g)&&!Kb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Lb(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Mb=/alpha\([^)]*\)/i,Nb=/opacity\s*=\s*([^)]*)/,Ob=/^(none|table(?!-c[ea]).+)/,Pb=new RegExp("^("+S+")(.*)$","i"),Qb=new RegExp("^([+-])=("+S+")","i"),Rb={position:"absolute",visibility:"hidden",display:"block"},Sb={letterSpacing:"0",fontWeight:"400"},Tb=["Webkit","O","Moz","ms"];function Ub(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Tb.length;while(e--)if(b=Tb[e]+c,b in a)return b;return d}function Vb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fb(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wb(a,b,c){var d=Pb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Yb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ib(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Jb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Hb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xb(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Jb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ub(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ub(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Jb(a,b,d)),"normal"===f&&b in Sb&&(f=Sb[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Ob.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Rb,function(){return Yb(a,b,d)}):Yb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ib(a);return Wb(a,c,d?Xb(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Mb.test(f)?f.replace(Mb,e):f+" "+e)}}),m.cssHooks.marginRight=Lb(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Jb,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Gb.test(a)||(m.cssHooks[a+b].set=Wb)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ib(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Vb(this,!0)},hide:function(){return Vb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Zb(a,b,c,d,e){return new Zb.prototype.init(a,b,c,d,e)}m.Tween=Zb,Zb.prototype={constructor:Zb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")
},cur:function(){var a=Zb.propHooks[this.prop];return a&&a.get?a.get(this):Zb.propHooks._default.get(this)},run:function(a){var b,c=Zb.propHooks[this.prop];return this.pos=b=this.options.duration?m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Zb.propHooks._default.set(this),this}},Zb.prototype.init.prototype=Zb.prototype,Zb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Zb.propHooks.scrollTop=Zb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Zb.prototype.init,m.fx.step={};var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[ic],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bc.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fc(){return setTimeout(function(){$b=void 0}),$b=m.now()}function gc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hc(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ic(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fb(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fb(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fb(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hc(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jc(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kc(a,b,c){var d,e,f=0,g=dc.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||fc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||fc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jc(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return m.map(k,hc,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kc,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kc(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gc(b,!0),a,d,e)}}),m.each({slideDown:gc("show"),slideUp:gc("hide"),slideToggle:gc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($b=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$b=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_b||(_b=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_b),_b=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lc=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lc,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mc,nc,oc=m.expr.attrHandle,pc=/^(?:checked|selected)$/i,qc=k.getSetAttribute,rc=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nc:mc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rc&&qc||!pc.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qc?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nc={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rc&&qc||!pc.test(c)?a.setAttribute(!qc&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=oc[b]||m.find.attr;oc[b]=rc&&qc||!pc.test(b)?function(a,b,d){var e,f;return d||(f=oc[b],oc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,oc[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rc&&qc||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mc&&mc.set(a,b,c)}}),qc||(mc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},oc.id=oc.name=oc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mc.set},m.attrHooks.contenteditable={set:function(a,b,c){mc.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sc=/^(?:input|select|textarea|button|object)$/i,tc=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sc.test(a.nodeName)||tc.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var uc=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(uc," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vc=m.now(),wc=/\?/,xc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yc,zc,Ac=/#.*$/,Bc=/([?&])_=[^&]*/,Cc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ec=/^(?:GET|HEAD)$/,Fc=/^\/\//,Gc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hc={},Ic={},Jc="*/".concat("*");try{zc=location.href}catch(Kc){zc=y.createElement("a"),zc.href="",zc=zc.href}yc=Gc.exec(zc.toLowerCase())||[];function Lc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mc(a,b,c,d){var e={},f=a===Ic;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nc(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Oc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zc,type:"GET",isLocal:Dc.test(yc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nc(Nc(a,m.ajaxSettings),b):Nc(m.ajaxSettings,a)},ajaxPrefilter:Lc(Hc),ajaxTransport:Lc(Ic),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cc.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zc)+"").replace(Ac,"").replace(Fc,yc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yc[1]&&c[2]===yc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yc[3]||("http:"===yc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mc(Hc,k,b,v),2===t)return v;h=k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Ec.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bc.test(e)?e.replace(Bc,"$1_="+vc++):e+(wc.test(e)?"&":"?")+"_="+vc++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mc(Ic,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Oc(k,v,c)),u=Pc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qc=/%20/g,Rc=/\[\]$/,Sc=/\r?\n/g,Tc=/^(?:submit|button|image|reset|file)$/i,Uc=/^(?:input|select|textarea|keygen)/i;function Vc(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rc.test(a)?d(a,e):Vc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vc(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vc(c,a[c],b,e);return d.join("&").replace(Qc,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Uc.test(this.nodeName)&&!Tc.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sc,"\r\n")}}):{name:b.name,value:c.replace(Sc,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zc()||$c()}:Zc;var Wc=0,Xc={},Yc=m.ajaxSettings.xhr();a.ActiveXObject&&m(a).on("unload",function(){for(var a in Xc)Xc[a](void 0,!0)}),k.cors=!!Yc&&"withCredentials"in Yc,Yc=k.ajax=!!Yc,Yc&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xc[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zc(){try{return new a.XMLHttpRequest}catch(b){}}function $c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _c=[],ad=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_c.pop()||m.expando+"_"+vc++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ad.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ad.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ad,"$1"+e):b.jsonp!==!1&&(b.url+=(wc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_c.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bd=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bd)return bd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cd=a.document.documentElement;function dd(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dd(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cd;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cd})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dd(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=Lb(k.pixelPosition,function(a,c){return c?(c=Jb(a,b),Hb.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ed=a.jQuery,fd=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fd),b&&a.jQuery===m&&(a.jQuery=ed),m},typeof b===K&&(a.jQuery=a.$=m),m});

/*!
 * Restive.JS v1.3.1
 * http://restivejs.com
 *
 * Copyright 2014 Obinwanne Hill <https://about.me/obinwanne.hill>
 * Released under MIT License
*/
/*! PHP-JS | @link https://github.com/kvz/phpjs | @copyright Kevin van Zonneveld | @license MIT and GPL */
function count(a,b){var c,d=!1,e=0;switch(!0){case null===a||"undefined"==typeof a:return 0;case!isArray(a)&&!isObject(a):d=!0}switch(!0){case a.hasOwnProperty("length"):return a.length}switch(!0){case d:return 1}switch(!0){case"COUNT_RECURSIVE"===b:b=1}switch(!0){case 1!=b:b=0}for(c in a)switch(!0){case a.hasOwnProperty(c):switch(e++,!0){case 1==b&&a[c]&&(isArray(a[c])||isObject(a[c])):e+=this.count(a[c],1)}}return e}function in_array(a,b,c){var d="",e=!!c;if(e){for(d in b)if(b[d]===a)return!0}else for(d in b)if(b[d]==a)return!0;return!1}function array_search(a,b,c){var d=!!c,e="";if(b&&"object"==typeof b&&b.change_key_case)return b.search(a,c);if("object"==typeof a&&a.exec){if(!d){var f="i"+(a.global?"g":"")+(a.multiline?"m":"")+(a.sticky?"y":"");a=new RegExp(a.source,f)}for(e in b)if(a.test(b[e]))return e;return!1}for(e in b)if(d&&b[e]===a||!d&&b[e]==a)return e;return!1}function array_keys(a,b,c){var d="undefined"!=typeof b,e=[],f=!!c,g=!0,h="";if(a&&"object"==typeof a&&a.change_key_case)return a.keys(b,c);for(h in a)a.hasOwnProperty(h)&&(g=!0,d&&(f&&a[h]!==b?g=!1:a[h]!=b&&(g=!1)),g&&(e[e.length]=h));return e}function array_values(a){var b=[],c="";if(a&&"object"==typeof a&&a.change_key_case)return a.values();for(c in a)b[b.length]=a[c];return b}function array_combine(a,b){var c={},d=a&&a.length,e=0;if("object"!=typeof a||"object"!=typeof b||"number"!=typeof d||"number"!=typeof b.length||!d)return!1;if(d!=b.length)return!1;for(e=0;d>e;e++)c[a[e]]=b[e];return c}function implode(a,b){var c="",d="",e="";if(1===arguments.length&&(b=a,a=""),"object"==typeof b){for(c in b)d+=e+b[c],e=a;return d}return b}function explode(a,b,c){if(arguments.length<2||"undefined"==typeof a||"undefined"==typeof b)return null;if(""===a||a===!1||null===a)return!1;if("function"==typeof a||"object"==typeof a||"function"==typeof b||"object"==typeof b)return{0:""};a===!0&&(a="1"),a+="",b+="";var d=b.split(a);return"undefined"==typeof c?d:(0===c&&(c=1),c>0?c>=d.length?d:d.slice(0,c-1).concat([d.slice(c-1).join(a)]):-c>=d.length?[]:(d.splice(d.length+c),d))}function urlencode(a){return a=(a+"").toString(),encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}function strrpos(a,b,c){var d=-1;return c?(d=(a+"").slice(c).lastIndexOf(b),-1!==d&&(d+=c)):d=(a+"").lastIndexOf(b),d>=0?d:!1}function uasort(a,b){var c=[],d="",e=0,f=!1,g={};"string"==typeof b?b=this[b]:"[object Array]"===Object.prototype.toString.call(b)&&(b=this[b[0]][b[1]]),this.php_js=this.php_js||{},this.php_js.ini=this.php_js.ini||{},f=this.php_js.ini["phpjs.strictForIn"]&&this.php_js.ini["phpjs.strictForIn"].local_value&&"off"!==this.php_js.ini["phpjs.strictForIn"].local_value,g=f?a:g;for(d in a)a.hasOwnProperty(d)&&(c.push([d,a[d]]),f&&delete a[d]);for(c.sort(function(a,c){return b(a[1],c[1])}),e=0;e<c.length;e++)g[c[e][0]]=c[e][1];return f||g}function microtime(a){var b=(new Date).getTime()/1e3,c=parseInt(b,10);return a?b:Math.round(1e3*(b-c))/1e3+" "+c}function substr_count(a,b){var c=b.replace(/(?=[\\^$*+?.\(\)|{\}[\]])/g,"\\"),d=new RegExp(""+c,"g"),e=a.match(d);return e?e.length:0}function isString(a){return"string"==typeof a}function isNumber(a){return!isNaN(parseFloat(a))&&isFinite(a)}function isBool(a){return a===!0||a===!1}function isArray(a){return"[object Array]"===Object.prototype.toString.call(a)}function isObject(a){switch(!0){case isArray(a):return!1}var b;for(var c in a)if(a.hasOwnProperty(c)){b=!1;break}switch(b=isBool(b)?b:!0,!0){case"object"==typeof a&&b===!1:return!0}return!1}function isFunction(a){return!!(a&&a.constructor&&a.call&&a.apply)}function arrayToInteger(a){var b,c,d=[],e=[],f=[],g=[];d=array_keys(a),e=array_values(a),c=count(a);for(var h=0;c>h;h++)b=parseInt(e[h]),f.push(b);return g=array_combine(d,f)}function arrayHasDuplicates(a){for(var b={},c=count(a),d=0;c>d;++d){var e=a[d];if(Object.prototype.hasOwnProperty.call(b,e))return!0;b[e]=!0}return!1}function getValueAfterExplode(a,b,c){var d=explode(b,a);return d[c]}function getSortedKeys(a){for(var b=[],c=0;c<a.length;c++)b.push({key:c,value:a[c]});b.sort(function(a,b){return a.value<b.value?-1:a.value>b.value?1:0});for(var d=[],c=0;c<b.length;c++)d.push(b[c].key);return d}function getClosestNumberMatchArray(a,b){var c,d,e,f,g=Array.prototype.slice.call(arguments),h=isBool(g[2])?g[2]:!1,i=isBool(g[3])?g[3]:!0,j=isNumber(g[4])?g[4]:0,k=[],l=[];a=arrayToInteger(a),b=parseInt(b);for(var m=0;m<count(a);m++)c=b-a[m],c=Math.abs(c),l.push(c);switch(k=getSortedKeys(l),d=k[0],e=a[d],f=e-b,f=Math.abs(f),!0){case b>e:i=j>=f?!1:i,d=i?d+1:d}return e=a[d],h?d:e}function isEvenDecimal(a){var b,c,d=Array.prototype.slice.call(arguments),e=isBool(d[1])?d[1]:!1;switch(b=0>a&&e?-1*a:a,c=b%1,!0){case!isNumber(b)||1>b||0==c:return!1}return b=Math.floor(b),c=b%2,!(0!=c)}function getUrl(){var a,b=Array.prototype.slice.call(arguments),c=isString(b[0])&&""!=b[0]?b[0]:"",d=isString(b[1])&&""!=b[1]?b[1]:document.URL,e=[],f=/\?+/.test(d),g=d.match(/^([h|f]{1}[t]{0,1}tp[s]{0,1}\:\/\/)([^ ]+?)\?([^ ]*)/i);switch(!0){case"basepath"==c||"bp"==c:return f?g[1]+g[2]:d;case"basedir"==c||"bd"==c:return a=f?g[1]+g[2]:d,e=explode("/",a),e.pop(),implode("/",e);case"query"==c||"q"==c:return f?g[3]:"";default:return d}}/*! md5.js - MD5 Message-Digest - v2.0.0 | @copyright 1999,2002 Masanao Izumo <iz@onicos.co.jp>  */
!function(){function a(a,b,c){return a&b|~a&c}function b(a,b,c){return a&c|b&~c}function c(a,b,c){return a^b^c}function d(a,b,c){return b^(a|~c)}function e(a){return String.fromCharCode(255&a)+String.fromCharCode(255&a>>>8)+String.fromCharCode(255&a>>>16)+String.fromCharCode(255&a>>>24)}function f(a){for(;0>a;)a+=4294967296;for(;a>4294967295;)a-=4294967296;return a}function g(a,b,c,d,e){var g,h,i,j,l,m,n,o,p;g=d[0],h=d[1],i=d[2],j=d[3],l=e[0],m=e[1],n=e[2],p=c(b[h],b[i],b[j]),o=b[g]+p+a[l]+k[n],o=f(o),o=o<<m|o>>>32-m,o+=b[h],b[g]=f(o)}function h(a){for(var b,c=-1,d=(a=a.split("")).length,e=String.fromCharCode;++c<d;a[c]=(b=a[c].charCodeAt(0))>=127?e(192|b>>>6)+e(128|63&b):a[c]);return a.join("")}function i(a){var b,c,d,i,j,k,l,m,n,o,q,r,s;if(/[\x80-\xFF]/.test(a)&&(a=h(a)),d=new Array(1732584193,4023233417,2562383102,271733878),j=a.length,k=63&j,l=56>k?56-k:120-k,l>0)for(a+="",o=0;l-1>o;o++)a+="\0";for(a+=e(8*j),a+=e(0),j+=l+8,b=new Array(0,1,2,3),c=new Array(16),i=new Array(4),r=0;j>r;r+=64){for(o=0,q=r;16>o;o++,q+=4)c[o]=a.charCodeAt(q)|a.charCodeAt(q+1)<<8|a.charCodeAt(q+2)<<16|a.charCodeAt(q+3)<<24;for(o=0;4>o;o++)i[o]=d[o];for(o=0;4>o;o++)for(m=p[o][0],n=p[o][1],q=0;16>q;q++)g(c,i,m,b,n[q]),s=b[0],b[0]=b[3],b[3]=b[2],b[2]=b[1],b[1]=s;for(o=0;4>o;o++)d[o]+=i[o],d[o]=f(d[o])}return e(d[0])+e(d[1])+e(d[2])+e(d[3])}function j(a){var b,c,d,e;for(e=i(a),c="",b=0;16>b;b++)d=e.charCodeAt(b),c+="0123456789abcdef".charAt(15&d>>4),c+="0123456789abcdef".charAt(15&d);return c}var k=new Array(0,3614090360,3905402710,606105819,3250441966,4118548399,1200080426,2821735955,4249261313,1770035416,2336552879,4294925233,2304563134,1804603682,4254626195,2792965006,1236535329,4129170786,3225465664,643717713,3921069994,3593408605,38016083,3634488961,3889429448,568446438,3275163606,4107603335,1163531501,2850285829,4243563512,1735328473,2368359562,4294588738,2272392833,1839030562,4259657740,2763975236,1272893353,4139469664,3200236656,681279174,3936430074,3572445317,76029189,3654602809,3873151461,530742520,3299628645,4096336452,1126891415,2878612391,4237533241,1700485571,2399980690,4293915773,2240044497,1873313359,4264355552,2734768916,1309151649,4149444226,3174756917,718787259,3951481745),l=new Array(new Array(0,7,1),new Array(1,12,2),new Array(2,17,3),new Array(3,22,4),new Array(4,7,5),new Array(5,12,6),new Array(6,17,7),new Array(7,22,8),new Array(8,7,9),new Array(9,12,10),new Array(10,17,11),new Array(11,22,12),new Array(12,7,13),new Array(13,12,14),new Array(14,17,15),new Array(15,22,16)),m=new Array(new Array(1,5,17),new Array(6,9,18),new Array(11,14,19),new Array(0,20,20),new Array(5,5,21),new Array(10,9,22),new Array(15,14,23),new Array(4,20,24),new Array(9,5,25),new Array(14,9,26),new Array(3,14,27),new Array(8,20,28),new Array(13,5,29),new Array(2,9,30),new Array(7,14,31),new Array(12,20,32)),n=new Array(new Array(5,4,33),new Array(8,11,34),new Array(11,16,35),new Array(14,23,36),new Array(1,4,37),new Array(4,11,38),new Array(7,16,39),new Array(10,23,40),new Array(13,4,41),new Array(0,11,42),new Array(3,16,43),new Array(6,23,44),new Array(9,4,45),new Array(12,11,46),new Array(15,16,47),new Array(2,23,48)),o=new Array(new Array(0,6,49),new Array(7,10,50),new Array(14,15,51),new Array(5,21,52),new Array(12,6,53),new Array(3,10,54),new Array(10,15,55),new Array(1,21,56),new Array(8,6,57),new Array(15,10,58),new Array(6,15,59),new Array(13,21,60),new Array(4,6,61),new Array(11,10,62),new Array(2,15,63),new Array(9,21,64)),p=new Array(new Array(a,l),new Array(b,m),new Array(c,n),new Array(d,o));md5=function(a){return j(a)}}(),/*! json2.js | @link https://github.com/douglascrockford/JSON-js | @copyright Douglas Crockford <douglas@crockford.com> */
"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),/*! AmplifyJS-Store - v1.1.0 | @link http://amplifyjs.com/api/store/ | @copyright 2012 AppendTo <http://appendto.com/contact> | @license MIT and GPL V2 */
function(a,b){function c(a,c){d.addType(a,function(f,g,h){var i,j,k,l,m=g,n=(new Date).getTime();if(!f){m={},l=[],k=0;try{for(f=c.length;f=c.key(k++);)e.test(f)&&(j=JSON.parse(c.getItem(f)),j.expires&&j.expires<=n?l.push(f):m[f.replace(e,"")]=j.data);for(;f=l.pop();)c.removeItem(f)}catch(o){}return m}if(f="__amplify__"+f,g===b){if(i=c.getItem(f),j=i?JSON.parse(i):{expires:-1},!(j.expires&&j.expires<=n))return j.data;c.removeItem(f)}else if(null===g)c.removeItem(f);else{j=JSON.stringify({data:g,expires:h.expires?n+h.expires:null});try{c.setItem(f,j)}catch(o){d[a]();try{c.setItem(f,j)}catch(o){throw d.error()}}}return m})}var d=a.store=function(a,b,c){var e=d.type;return c&&c.type&&c.type in d.types&&(e=c.type),d.types[e](a,b,c||{})};d.types={},d.type=null,d.addType=function(a,b){d.type||(d.type=a),d.types[a]=b,d[a]=function(b,c,e){return e=e||{},e.type=a,d(b,c,e)}},d.error=function(){return"amplify.store quota exceeded"};var e=/^__amplify__/;for(var f in{localStorage:1,sessionStorage:1})try{window[f].setItem("__amplify__","x"),window[f].removeItem("__amplify__"),c(f,window[f])}catch(g){}if(!d.types.localStorage&&window.globalStorage)try{c("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===d.type&&(d.type="globalStorage")}catch(g){}!function(){if(!d.types.localStorage){var a=document.createElement("div"),c="amplify";a.style.display="none",document.getElementsByTagName("head")[0].appendChild(a);try{a.addBehavior("#default#userdata"),a.load(c)}catch(e){return a.parentNode.removeChild(a),void 0}d.addType("userData",function(e,f,g){a.load(c);var h,i,j,k,l,m=f,n=(new Date).getTime();if(!e){for(m={},l=[],k=0;h=a.XMLDocument.documentElement.attributes[k++];)i=JSON.parse(h.value),i.expires&&i.expires<=n?l.push(h.name):m[h.name]=i.data;for(;e=l.pop();)a.removeAttribute(e);return a.save(c),m}if(e=e.replace(/[^\-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),e=e.replace(/^-/,"_-"),f===b){if(h=a.getAttribute(e),i=h?JSON.parse(h):{expires:-1},!(i.expires&&i.expires<=n))return i.data;a.removeAttribute(e)}else null===f?a.removeAttribute(e):(j=a.getAttribute(e),i=JSON.stringify({data:f,expires:g.expires?n+g.expires:null}),a.setAttribute(e,i));try{a.save(c)}catch(o){null===j?a.removeAttribute(e):a.setAttribute(e,j),d.userData();try{a.setAttribute(e,i),a.save(c)}catch(o){throw null===j?a.removeAttribute(e):a.setAttribute(e,j),d.error()}}return m})}}(),function(){function a(a){return a===b?b:JSON.parse(JSON.stringify(a))}var c={},e={};d.addType("memory",function(d,f,g){return d?f===b?a(c[d]):(e[d]&&(clearTimeout(e[d]),delete e[d]),null===f?(delete c[d],null):(c[d]=f,g.expires&&(e[d]=setTimeout(function(){delete c[d],delete e[d]},g.expires)),f)):a(c)})}()}(this.amplify=this.amplify||{}),/*! ios-orientationchange-fix.js | Script by @scottjehl rebound by @wilto, modified by Peter Wooster | @link https://github.com/scottjehl/iOS-Orientationchange-Fix | @copyright Scott Jehl <@scottjehl> | @license MIT / GPLV2 */
function(a){function b(){g.setAttribute("content",m),n=!0}function c(){g.setAttribute("content",l),n=!1}function d(d){return a.orientation,90==Math.abs(a.orientation)?(n&&b(),void 0):(j=d.accelerationIncludingGravity,h=Math.abs(j.x),i=Math.abs(j.y),0==i||h/i>1.2?n&&c():n||b(),void 0)}var e=navigator.userAgent.toLowerCase();if(/iphone|ipad|ipod/.test(navigator.platform.toLowerCase())&&/os [1-5]_[0-9_]* like mac os x/i.test(e)&&e.indexOf("applewebkit")>-1&&-1==e.indexOf("crios")){var f=a.document;if(f.querySelector){var g=f.querySelector("meta[name=viewport]");if(g){var h,i,j,k=g&&g.getAttribute("content"),l=k+",maximum-scale=1",m=k+",maximum-scale=10",n=!0;a.addEventListener("orientationchange",b,!1),a.addEventListener("devicemotion",d,!1)}}}}(this),/*! jQuery resize event - v1.1 | @link http://benalman.com/projects/jquery-resize-plugin/ | Copyright (c) 2010 "Cowboy" Ben Alman | @license MIT/GPL */
function(a,b,c){"$:nomunge";function d(){e=b[h](function(){f.each(function(){var b=a(this),c=b.width(),d=b.height(),e=a.data(this,j);(c!==e.w||d!==e.h)&&b.trigger(i,[e.w=c,e.h=d])}),d()},g[k])}var e,f=a([]),g=a.resizecontainer=a.extend(a.resize,{}),h="setTimeout",i="resizecontainer",j=i+"-special-event",k="delay",l="throttleWindow";g[k]=250,g[l]=!0,a.event.special[i]={setup:function(){if(!g[l]&&this[h])return!1;var b=a(this);f=f.add(b),a.data(this,j,{w:b.width(),h:b.height()}),1===f.length&&d()},teardown:function(){if(!g[l]&&this[h])return!1;var b=a(this);f=f.not(b),b.removeData(j),f.length||clearTimeout(e)},add:function(b){function d(b,d,f){var g=a(this),h=a.data(this,j);h.w=d!==c?d:g.width(),h.h=f!==c?f:g.height(),e.apply(this,arguments)}if(!g[l]&&this[h])return!1;var e;return a.isFunction(b)?(e=b,d):(e=b.handler,b.handler=d,void 0)}}}(jQuery,window),function(a){window.elementIsChildOf=function(b,c){var d=!1,e=a(""+b),f=a(""+c);switch(!0){case-1!=a(f).parents().index(e):d=!0}return d},window.getSelector=function(b){var c=a(b),d=c.attr("id");if(d)return"#"+d;var e=c[0].nodeName.toLowerCase();if("html"==e||"body"==e)return e;var f=c.parents().map(function(){return this.tagName}).get().reverse().join(" ");f&&(f+=" "+c[0].nodeName);var g=c.attr("class");g&&(f+="."+a.trim(g).replace(/\s/gi,"."));var h=c.attr("name");if(h&&(f+="[name='"+h+"']"),!h){var i=c.index();i&&(i+=1,f+=":nth-child("+i+")")}return f}}(jQuery);/*! Restive.JS | @copyright 2013 Obinwanne Hill */
var Restive=function(a,b,c){function d(){i("rstv_timestamp_curr",microtime(!0)),i("rstv_timestamp_init",i("rstv_timestamp_curr")),e(),z(),i("rstv_ort_init",V()),i("rstv_ort_curr",V())}function e(){i("rstv_var_doc_client_w",qb.clientWidth),i("rstv_var_doc_client_h",qb.clientHeight),i("rstv_var_win_outer_w",a.outerWidth),i("rstv_var_win_outer_h",a.outerHeight),i("rstv_var_win_screen_w",sb.width),i("rstv_var_win_screen_h",sb.height)}function f(){var a=parseInt(i("rstv_loaded_count"));switch(!0){case!isNumber(a):a=0}a++,i("rstv_loaded_count",a,"",{expires:1500})}function g(){var a=parseInt(i("rstv_loaded_count")),b=i("rstv_ffld_is_init");switch(!0){case a>1:switch(i("rstv_viewportW rstv_viewportW_dip rstv_viewportH rstv_viewportH_dip rstv_screenW rstv_screenH",null),i("rstv_is_ios rstv_is_android rstv_is_blackberry rstv_is_symbian rstv_is_windows rstv_is_windows_phone",null),i("rstv_is_android_1_ rstv_is_android_2_ rstv_is_android_3_",null),i("rstv_is_phone rstv_is_tablet rstv_is_tv rstv_is_pc",null),i("rstv_ort_curr rstv_timestamp_curr rstv_is_portrait rstv_is_landscape",null),i("rstv_multi_count rstv_multi_bpm_idx rstv_cache_bpm rstv_cache_bpm_lock rstv_cache_req rstv_cache_bpm_viewport_diff",null),i("rstv_user_agent",null),i("rstv_timestamp_curr",microtime(!0)),i("rstv_ort_curr",V()),!0){case!b:i("rstv_timestamp_init",i("rstv_timestamp_curr")),i("rstv_ort_init",V()),i("rstv_ffld_is_init",!0)}}}function h(){try{localStorage.setItem("__test","data")}catch(a){if(/QUOTA_?EXCEEDED/i.test(a.name))return!0}return!1}function i(){var b,c,d=Array.prototype.slice.call(arguments),e=a.rstv_store.main.rstv_is_priv_browsing,f=d[0],g=d[1],h="undefined"!=typeof d[2]&&null!==d[2]&&isString(d[2])&&""!=d[2]?d[2]:"ss",i=d[3],j=[],k=isString(f)&&""!=f?!1:!0,l=!("undefined"==typeof g||null===g||!(isString(g)&&""!=g||isNumber(g)||isArray(g)&&count(g)>0||isBool(g)||isObject(g))),m=!(null!==g);try{switch(!0){case e:b="storage",c=a.rstv_store[b];break;default:switch(!0){case"ls"==h:b="localStorage";break;default:b="sessionStorage"}switch(c=amplify.store[b],!0){case!a.sessionStorage||!a.localStorage:c=amplify.store}switch(!0){case k:return c()}}switch(!0){case!l&&!m:return c(f)}switch(!0){case m:j=explode(" ",f);for(var n=0;n<count(j);n++)c(j[n],null);return null}c(f,null),c(f,g,i)}catch(o){alert(o)}}function j(a,b){var d,e,f=Array.prototype.slice.call(arguments),g=isString(f[2])&&""!=f[2]?f[2]:"ck",h=isBool(f[3])?f[3]:!1,j=isNumber(f[4])||isString(f[4])?parseInt(f[4]):"",k=isNumber(f[4])||isString(f[4])?parseInt(f[4]):30,l=isBool(f[5])?f[5]:!0,m=isString(f[6])&&""!=f[6]?f[6]:"-!",n=isNumber(f[7])||isString(f[7])?parseInt(f[7]):60,o=[],p=[];switch(d="ls"==g?i(a):c.cookie(a),!0){case null===d||"undefined"==typeof d:return"ls"==g?i(a,b,"",{expires:j}):c.cookie(a,b,{expires:k,path:"/"}),!0;case"undefined"!=typeof d&&null!==d&&""!=d:switch(o=explode(m,d),!0){case in_array(b,o)&&h:return!1;default:switch(!0){case l:o.unshift(b),p=o.slice(0,n),e=implode(m,p);break;default:o.push(b),e=implode(m,o)}return"ls"==g?i(a,e,"",{expires:j}):c.cookie(a,e,{expires:k,path:"/"}),!0}}}function k(a,b){var d=Array.prototype.slice.call(arguments),e=isString(d[2])&&""!=d[2]?d[2]:"ck",f=isString(d[3])&&""!=d[3]?d[3]:"-!",g="ls"==e?i(b):c.cookie(b);switch(!0){case"undefined"!=typeof g&&null!==g&&""!=g:var h=[];switch(h=explode(f,g),!0){case in_array(a,h):return!0;default:return!1}break;default:return!1}}function l(a){var b=Array.prototype.slice.call(arguments),c=b[1],d=i(""+a),e=!("undefined"==typeof c||null===c),f=!1;switch(!0){case isBool(d)||null!==d&&"undefined"!=typeof d&&""!=d:f=!0}switch(!0){case!e:return f}switch(!0){case!f:i(a,c)}}function m(a){var b,c=Array.prototype.slice.call(arguments),d=isNumber(c[1])?c[1]:1,e=isBool(c[2])?c[2]:!1;switch(b=parseInt(i(a)),!0){case!isNumber(b):return!1}return b=e?b-d:b+d,i(a,b),b}function n(a){var b=[120,128,160,200,240,272,300,320,352,360,480,540,576,600,640,720,768,800,864,900,1024,1050,1080,1152,1200,1440,1536,1600,1800,2048,2160,2400,3072,3200,4096,4320,4800],c=[160,240,260,320,400,432,480,640,720,800,854,960,1024,1136,1152,1280,1360,1366,1400,1440,1600,1680,1920,2048,2560,2880,3200,3840,4096,5120,6400,7680];switch(!0){case"w"==a:return b;case"h"==a:return c}}function o(a){var b,c,d,e=Array.prototype.slice.call(arguments),f=isBool(e[1])?e[1]:!0,g=!1,h=!(!S()&&!R()),j=A(),k=i("rstv_var_win_outer_w"),l=i("rstv_var_win_outer_h"),m=i("rstv_var_doc_client_w"),o=i("rstv_var_doc_client_h"),p=i("rstv_var_win_screen_w"),q=i("rstv_var_win_screen_h");switch(!0){case h:switch(!0){case"vW"==a:b=m;break;case"vH"==a:b=o;break;case"sW"==a:b=p;break;case"sH"==a:b=q}switch(!0){case"vW"==a||"vH"==a:b=j>=1.5?b*j:b}return b=Math.floor(b)}var r,s,t,u,v,w,x,y,z,B,C=D(),E=/opera.+(mini|mobi)/i.test(C),F=!!G(),H=!!J(),K=!!L(),M=!!I(),N=!!I("1."),O=!!I("2."),P=!!(N||O||H||K),Q=p,T=q,U=Q,V=n("w"),W=n("h"),X=V,Y=W;switch(!0){case P:r=0>=k?m:k,s=0>=l?o:l,t=r,u=s;break;default:r=m,s=o,t=m,u=o}switch(!0){case(O||H)&&!E:Q=0>=k?Q:k,T=0>=l?T:l}switch(w=Q/T,v=Q-r,v=Math.abs(v),B=E&&260>r?4>=v&&w>=1?!0:!1:!0,y=!!(t>=u&&B),z=!!(Q>=T),!0){case F:X=X.slice(7),Y=Y.slice(6);break;case M:X=X.slice(4),Y=Y.slice(3);break;case H:X=X.slice(4)}switch(!0){case y:V=Y,W=X;break;default:V=X,W=Y}switch(!0){case"vW"==a:b=r;break;case"vH"==a:b=s;break;case"sW"==a:x=!!(y===!0&&z===!1||y===!1&&z===!0),b=x?T:Q,U=x?T:Q,c=b*j,g=f?in_array(b,V)||in_array(c,V)?!1:!0:!1;break;case"sH"==a:x=!!(y===!0&&z===!1||y===!1&&z===!0),b=x?Q:T,U=x?T:Q,c=b*j,g=f?in_array(b,W)||in_array(c,W)?!1:!0:!1}switch(d=U/r,!0){case 1>=j&&1.1>=d:switch(!0){case"sW"==a&&g:b=getClosestNumberMatchArray(V,b,"","",8);break;case"sH"==a&&g:b=getClosestNumberMatchArray(W,b,"","",8)}return b}switch(!0){case F:b*=j;break;default:switch(!0){case!O:switch(!0){case 1>=j&&d>1.1:b=in_array(a,["vW","vH"])?b*d:b;break;case j>1&&1.1>=d:switch(!0){case 1.1>=j:switch(!0){case in_array(a,["vW","vH"]):b*=j,b=isEvenDecimal(b)?Math.floor(b):b}break;default:b*=j}break;case j>1&&d>1.1:switch(!0){case in_array(a,["vW","vH"]):b*=j,b=isEvenDecimal(b)?Math.floor(b):Math.ceil(b)}}}switch(!0){case"sW"==a&&g:b=getClosestNumberMatchArray(V,b,"","",8);break;case"sH"==a&&g:b=getClosestNumberMatchArray(W,b,"","",8)}}return b=Math.floor(b)}function p(a){var b,c=!("w"!=a),d=!(!S()&&!R()),e=A();switch(!0){case d:e=1.5>=e?1:e}return b=c?t()/e:u()/e,Math.round(b)}function q(a,b){var c,d=Array.prototype.slice.call(arguments),e=isString(d[2])&&""!=d[2]?d[2]:"d",f=isBool(d[3])?d[3]:!1;switch(b=b.toLowerCase(),!0){case"w"==b:switch(!0){case"i"==e:c=a.innerWidth();break;case"o"==e:c=a.outerWidth();break;default:c=a.width()}break;case"h"==b:switch(!0){case"i"==e:c=a.innerHeight();break;case"o"==e:c=a.outerHeight();break;default:c=a.height()}break;default:c=!1}switch(!0){case f===!1:c*=A()}return c}function r(a){var b=Array.prototype.slice.call(arguments),c=b[1],d=b[2];return q(a,"w",c,d)}function s(a){var b=Array.prototype.slice.call(arguments),c=b[1],d=b[2];return q(a,"h",c,d)}function t(){return l("rstv_viewportW")?i("rstv_viewportW"):o("vW",i("rstv_is_getdim_screen_adj"))}function u(){return l("rstv_viewportH")?i("rstv_viewportH"):o("vH",i("rstv_is_getdim_screen_adj"))}function v(){return l("rstv_screenW")?i("rstv_screenW"):o("sW",i("rstv_is_getdim_screen_adj"))}function w(){return l("rstv_screenH")?i("rstv_screenH"):o("sH",i("rstv_is_getdim_screen_adj"))}function x(){return l("rstv_viewportW_dip")?i("rstv_viewportW_dip"):p("w")}function y(){return l("rstv_viewportH_dip")?i("rstv_viewportH_dip"):p("h")}function z(){i("rstv_viewportW rstv_viewportW_dip rstv_viewportH rstv_viewportH_dip rstv_screenW rstv_screenH",null),i("rstv_viewportW",t()),i("rstv_viewportH",u()),i("rstv_screenW",v()),i("rstv_screenH",w()),i("rstv_viewportW_dip",x()),i("rstv_viewportH_dip",y())}function A(a){switch(!0){case l("rstv_pixel_ratio"):return i("rstv_pixel_ratio")}var b,c,d,e,f=D(),g=/opera.+(mini|mobi)/i.test(f),h=i("rstv_var_doc_client_w"),j=i("rstv_var_win_outer_w"),k=i("rstv_var_win_screen_w"),m=!!J(),n=!!L(),o=!!I("1."),p=!!I("2."),q=!!(o||p||m||n),r=!(!n&&!m),s=q?0>=j?h:j:h,t=!p&&!m||g?k:0>=j?k:j;switch(c=pb.devicePixelRatio,!0){case 0>=c||"undefined"==typeof c||null===c:switch(d=t/s,b=d,!0){case r:switch(!0){case b>.5&&1.2>b:b=1;break;case b>=1.2&&2>b:b=1.5;break;case b>=2&&3>b:b=2;break;case b>=3:b=3;break;default:b=1}}i("rstv_pixel_ratio_virtual",d);break;default:b=c}switch(!0){case!isNumber(a):return e=b||(A(3)?3:A(2)?2:A(1.5)?1.5:A(1)?1:0),i("rstv_pixel_ratio",e),e}switch(!0){case!isFinite(a):return!1}switch(!0){case b&&b>0:return b>=a}switch(a="only all and (min--moz-device-pixel-ratio:"+a+")",!0){case tb(a).matches:return!0}return!!tb(a.replace("-moz-","")).matches}function B(){var a=A();switch(!0){case a>=2:return!0}return!1}function C(a){return function(b,c){var d,e=Array.prototype.slice.call(arguments),f=e[2],g=!(!isObject(f)||"undefined"==typeof f||null===f),h=e[3],i=e[4],j=g?a(f,h,i):a();return d=j>=(b||0),c?d&&c>=j:d}}function D(){switch(!0){case l("rstv_user_agent"):return i("rstv_user_agent")}var a,b=navigator.userAgent.toLowerCase();switch(a=/mozilla.+x11/i.test(b),!0){case a:c.ajax({type:"GET",async:!1,crossDomain:!0,url:"http://www.restive.io/ping/ua.php",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"},success:function(a){b=a},error:function(){console.log("error")}})}return i("rstv_user_agent",b),b}function E(){switch(!0){case F("ios"):return"ios";case F("android"):return"android";case F("symbian"):return"symbian";case F("blackberry"):return"blackberry";case F("windows"):return"windows";default:return"other"}}function F(a){var b=Array.prototype.slice.call(arguments),c=!(!isString(b[1])||""==b[1]),d="",e="",f="";switch(!0){case c:d=b[1],d=d.replace(/^\s+|\s+$/g,""),e=" "+d,f="_"+d.replace(".","_")}switch(!0){case l("rstv_is_"+a+f):return i("rstv_is_"+a+f)}var g=D(),h=!1;switch(!0){case"ios"==a:h=/\bipad|\biphone|\bipod/i.test(g);break;case"android"==a:var j=new RegExp("\\bandroid"+e,"i");h=j.test(g);break;case"symbian"==a:h=/series(4|6)0|symbian|symbos|syb-[0-9]+|\bs60\b/i.test(g);break;case"blackberry"==a:h=/bb[0-9]+|blackberry|playbook|rim +tablet/i.test(g);break;case"windows"==a:h=/window mobile|windows +(ce|phone)|windows +nt.+arm|windows +nt.+touch|xblwp7|zunewp7/i.test(g);break;case"windows_phone"==a:h=/windows +phone|xblwp7|zunewp7/i.test(g);break;default:return!1}return i("rstv_is_"+a+f,h),!!h}function G(){return F("ios")}function H(){return F("ios")}function I(){var a=Array.prototype.slice.call(arguments),b=a[0];return F("android",b)}function J(){return F("symbian")}function K(){return F("blackberry")}function L(){return F("windows")}function M(){return F("windows_phone")}function N(a){return/android|android.+mobile|avantgo|bada\/|\bbb[0-9]+|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|\bip(hone|od|ad)|iris|kindle|lge |maemo|meego.+mobile|midp|mmp|motorola|mobile.+firefox|netfront|nokia|nintendo +3ds|opera m(ob|in)i|palm|palm( os)?|phone|p(ixi|re)\/|playbook|rim +tablet|playstation.+vita|plucker|pocket|psp|samsung|(gt\-|bgt\-|sgh\-|sph\-|sch\-)[a-z][0-9]+|series(4|6)0|symbian|symbos|\bs60\b|treo|up\.(browser|link)|vertu|vodafone|wap|windows (ce|phone)|windows +nt.+arm|windows +nt.+touch|xda|xiino|xblwp7|zunewp7/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb|b\-[0-9]+)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))}function O(){var a="";switch(!0){case Q():a="tablet";break;case R():a="tv";break;default:switch(!0){case P():a="phone";break;default:a="pc"}}return a}function P(){switch(!0){case l("rstv_is_phone"):return i("rstv_is_phone")}switch(!0){case Q(!0)||R():return i("rstv_is_phone",!1),!1}switch(!0){case N(D()||navigator.vendor.toLowerCase()||a.opera):return i("rstv_is_phone",!0),!0}return i("rstv_is_phone",!1),!1}function Q(){var a=Array.prototype.slice.call(arguments),b=isBool(a[0])?a[0]:!1;switch(!0){case l("rstv_is_tablet"):return i("rstv_is_tablet")}var c,d,e,f=D();switch(d=new RegExp("ipad|playbook|rim +tablet","i"),e=d.test(f),!0){case e:return b||i("rstv_is_tablet",!0),!0}switch(d=new RegExp("windows +nt.+arm|windows +nt.+touch","i"),e=d.test(f),!0){case e:return b||i("rstv_is_tablet",!0),!0}switch(c="android.+kindle|kindle +fire|android.+silk|silk.*accelerated|android.+nexus +(7|10)|samsung.*tablet|galaxy.*tab|sc-01c|gt-p1000|gt-p1003|gt-p1010|gt-p3105|gt-p6210|gt-p6800|gt-p6810|gt-p7100|gt-p7300|gt-p7310|gt-p7500|gt-p7510|sch-i800|sch-i815|sch-i905|sgh-i957|sgh-i987|sgh-t849|sgh-t859|sgh-t869|sph-p100|gt-p3100|gt-p3108|gt-p3110|gt-p5100|gt-p5110|gt-p6200|gt-p7320|gt-p7511|gt-n8000|gt-p8510|sgh-i497|sph-p500|sgh-t779|sch-i705|sch-i915|gt-n8013|gt-p3113|gt-p5113|gt-p8110|gt-n8010|gt-n8005|gt-n8020|gt-p1013|gt-p6201|gt-p7501|gt-n5100|gt-n5110|shv-e140k|shv-e140l|shv-e140s|shv-e150s|shv-e230k|shv-e230l|shv-e230s|shw-m180k|shw-m180l|shw-m180s|shw-m180w|shw-m300w|shw-m305w|shw-m380k|shw-m380s|shw-m380w|shw-m430w|shw-m480k|shw-m480s|shw-m480w|shw-m485w|shw-m486w|shw-m500w|gt-i9228|sch-p739|sch-i925|gt-i9200|gt-i9205|gt-p5200|gt-p5210|sm-t311|sm-t310|sm-t210|sm-t210r|sm-t211|sm-p600|sm-p601|sm-p605|sm-p900|sm-t217|sm-t217a|sm-t217s|sm-p6000|sm-t3100|sgh-i467|xe500|htc flyer|htc jetstream|htc-p715a|htc evo view 4g|pg41200|xoom|sholest|mz615|mz605|mz505|mz601|mz602|mz603|mz604|mz606|mz607|mz608|mz609|mz615|mz616|mz617|transformer|^.*padfone((?!mobile).)*$|tf101|tf201|tf300|tf700|tf701|tf810|me171|me301t|me302c|me371mg|me370t|me372mg|me172v|me173x|me400c|slider *sl101|android.+nook|nookcolor|nook browser|bnrv200|bnrv200a|bntv250|bntv250a|bntv400|bntv600|logicpd zoom2|android.*\\b(a100|a101|a110|a200|a210|a211|a500|a501|a510|a511|a700|a701|w500|w500p|w501|w501p|w510|w511|w700|g100|g100w|b1-a71|b1-710|b1-711|a1-810)\\b|w3-810|android.*(at100|at105|at200|at205|at270|at275|at300|at305|at1s5|at500|at570|at700|at830)|toshiba.*folio|\\bl-06c|lg-v900|lg-v905|lg-v909|android.+(xenta.+tab|tab210|tab211|tab224|tab250|tab260|tab264|tab310|tab360|tab364|tab410|tab411|tab420|tab424|tab450|tab460|tab461|tab464|tab465|tab467|tab468|tab469)|android.+\\boyo\\b|life.*(p9212|p9514|p9516|s9512)|lifetab|an10g2|an7bg3|an7fg3|an8g3|an8cg3|an7g3|an9g3|an7dg3|an7dg3st|an7dg3childpad|an10bg3|an10bg3dt|android.+archos|\\b(101g9|80g9|a101it)\\b|qilive 97r|novo7|novo7aurora|novo7basic|novo7paladin|novo8|novo9|novo10|sony tablet|sony tablet s|sgpt12|sgpt121|sgpt122|sgpt123|sgpt111|sgpt112|sgpt113|sgpt211|sgpt213|ebrd1101|ebrd1102|ebrd1201|sgpt311|sgpt312|sonyso-03e|android.*(k8gt|u9gt|u10gt|u16gt|u17gt|u18gt|u19gt|u20gt|u23gt|u30gt)|cube u8gt|mid1042|mid1045|mid1125|mid1126|mid7012|mid7014|mid7034|mid7035|mid7036|mid7042|mid7048|mid7127|mid8042|mid8048|mid8127|mid9042|mid9740|mid9742|mid7022|mid7010|android.*(\\bmid\\b|mid-560|mtv-t1200|mtv-pnd531|mtv-p1101|mtv-pnd530)|android.*(rk2818|rk2808a|rk2918|rk3066)|rk2738|rk2808a|t-hub2|iq310|fly vision|bq.*(elcano|curie|edison|maxwell|kepler|pascal|tesla|hypatia|platon|newton|livingstone|cervantes|avant)|mediapad|ideos s7|s7-201c|s7-202u|s7-101|s7-103|s7-104|s7-105|s7-106|s7-201|s7-slim|\\bn-06d|\\bn-08d|pantech.*p4100|broncho.*(n701|n708|n802|a710)|touchpad.*[78910]|\\btouchtab\\b|z1000|z99 2g|z99|z930|z999|z990|z909|z919|z900|tb07sta|tb10sta|tb07fta|tb10fta|android.*\\bnabi|playstation.*(portable|vita)|dell.*streak|milagrow +tab.*top|android.+(ideapad|ideatab|lenovo +a1|s2110|s6000|k3011|a3000|a1000|a2107|a2109|a1107)|android.+f8-sup|android.*(k080|arc|vox)|android.*(msi.+enjoy|enjoy +7|enjoy +10)|dropad.+a8|android.+c906|android.+iberry.+auxus|android.+aigopad|android.*(airpad|liquid metal)|android.+hcl.+tablet|connect-3g-2.0|connect-2g-2.0|me tablet u1|me tablet u2|me tablet g1|me tablet x1|me tablet y2|me tablet sync|android.*(a39|a37|a34|st8|st10|st7|smarttab|smart +tab)|android.*(micromax.+funbook|funbook|p250|p275|p300|p350|p362|p500|p600)|micromax.*(p250|p275|p350|p362|p500|p600)|funbook|android.+penta|android.*(celkon.+ct|ct-[0-9])|android.+i-buddy|android.*(viewbook|viewpad)|android.*(v9|zte.+v8110|light tab|light pro|beeline|base.*tab)|chagall|android.*(vandroid|t3i)|android.*(ziio7|ziio10)|android.*(v-t100|v-tw100|v-tr200|v-t300)|android.+vtab1008|bookeen|cybook|android.*lifetab_(s9512|p9514|p9516)|m702pro|irulu-al101|pmp3170b|pmp3270b|pmp3470b|pmp7170b|pmp3370b|pmp3570c|pmp5870c|pmp3670b|pmp5570c|pmp5770d|pmp3970b|pmp3870c|pmp5580c|pmp5880d|pmp5780d|pmp5588c|pmp7280c|pmp7280|pmp7880d|pmp5597d|pmp5597|pmp7100d|per3464|per3274|per3574|per3884|per5274|per5474|pmp5097cpro|pmp5097|pmp7380d|pmp5297c|pmp5297c_quad|allview.*(viva|alldro|city|speed|all tv|frenzy|quasar|shine|tx1|ax1|ax2)|megafon +v9|android.+(z7c|z7h|z7s)|android.+iball.+slide.+(3g *7271|3g *7334|3g *7307|3g *7316|i7119|i7011)|android.+iball.+i6012|navipad|tb-772a|tm-7045|tm-7055|tm-9750|tm-7016|tm-7024|tm-7026|tm-7041|tm-7043|tm-7047|tm-8041|tm-9741|tm-9747|tm-9748|tm-9751|tm-7022|tm-7021|tm-7020|tm-7011|tm-7010|tm-7023|tm-7025|tm-7037w|tm-7038w|tm-7027w|tm-9720|tm-9725|tm-9737w|tm-1020|tm-9738w|tm-9740|tm-9743w|tb-807a|tb-771a|tb-727a|tb-725a|tb-719a|tb-823a|tb-805a|tb-723a|tb-715a|tb-707a|tb-705a|tb-709a|tb-711a|tb-890hd|tb-880hd|tb-790hd|tb-780hd|tb-770hd|tb-721hd|tb-710hd|tb-434hd|tb-860hd|tb-840hd|tb-760hd|tb-750hd|tb-740hd|tb-730hd|tb-722hd|tb-720hd|tb-700hd|tb-500hd|tb-470hd|tb-431hd|tb-430hd|tb-506|tb-504|tb-446|tb-436|tb-416|tb-146se|tb-126se|android.*\\bg1\\b|tx-a1301|tx-m9002|q702|ly-f528|android.+dslide.*\\b(700|701r|702|703r|704|802|970|971|972|973|974|1010|1012)\\b|m9701|m9000|m9100|m806|m1052|m806|t703|mid701|mid713|mid710|mid727|mid760|mid830|mid728|mid933|mid125|mid810|mid732|mid120|mid930|mid800|mid731|mid900|mid100|mid820|mid735|mid980|mid130|mid833|mid737|mid960|mid135|mid860|mid736|mid140|mid930|mid835|mid733|android.*\\b(f-01d|f-05e|f-10d|m532|q572)\\b|android.+casiatab8|android.+hudl|android.*(polaroid.*tablet|pmid1000|pmid10c|pmid800|pmid700|pmid4311|pmid701c|pmid701i|pmid705|pmid706|pmid70dc|pmid70c|pmid720|pmid80c|pmid901|ptab7200|ptab4300|ptab750|midc010|midc407|midc409|midc410|midc497|midc700|midc800|midc801|midc802|midc901)|e-boda.+(supreme|impresspeed|izzycomm|essential)|hp slate 7|hp elitepad 900|hp-tablet|elitebook.*touch|fine7 genius|fine7 shine|fine7 air|fine8 style|fine9 more|fine10 joy|fine11 wide|android.*\\b(n10|n10-4core|n78|n79|n83|n90 ii)\\b|\\b(pem63|plt1023g|plt1041|plt1044|plt1044g|plt1091|plt4311|plt4311pl|plt4315|plt7030|plt7033|plt7033d|plt7035|plt7035d|plt7044k|plt7045k|plt7045kb|plt7071kg|plt7072|plt7223g|plt7225g|plt7777g|plt7810k|plt7849g|plt7851g|plt7852g|plt8015|plt8031|plt8034|plt8036|plt8080k|plt8082|plt8088|plt8223g|plt8234g|plt8235g|plt8816k|plt9011|plt9045k|plt9233g|plt9735|plt9760g|plt9770g)\\b|bq1078|bc1003|bc1077|rk9702|bc9730|bc9001|it9001|bc7008|bc7010|bc708|bc728|bc7012|bc7030|bc7027|bc7026|tpc7102|tpc7103|tpc7105|tpc7106|tpc7107|tpc7201|tpc7203|tpc7205|tpc7210|tpc7708|tpc7709|tpc7712|tpc7110|tpc8101|tpc8103|tpc8105|tpc8106|tpc8203|tpc8205|tpc8503|tpc9106|tpc9701|tpc97101|tpc97103|tpc97105|tpc97106|tpc97111|tpc97113|tpc97203|tpc97603|tpc97809|tpc97205|tpc10101|tpc10103|tpc10106|tpc10111|tpc10203|tpc10205|tpc10503|android.*(roverpad|rp3wg70)|tab-p506|tab-navi-7-3g-m|tab-p517|tab-p-527|tab-p701|tab-p703|tab-p721|tab-p731n|tab-p741|tab-p825|tab-p905|tab-p925|tab-pr945|tab-pl1015|tab-p1025|tab-pi1045|tab-p1325|tab-protab[0-9]+|tab-protab25|tab-protab26|tab-protab27|tab-protab26xl|tab-protab2-ips9|tab-protab30-ips9|tab-protab25xxl|tab-protab26-ips10|tab-protab30-ips10|android.*ov-(steelcore|newbase|basecore|baseone|exellen|quattor|edutab|solution|action|basictab|teddytab|magictab|stream|tb-08|tb-09)|dps dream 9|dps dual 7|v97 hd|i75 3g|visture v4( hd)?|visture v5( hd)?|visture v10|ctp(-)?810|ctp(-)?818|ctp(-)?828|ctp(-)?838|ctp(-)?888|ctp(-)?978|ctp(-)?980|ctp(-)?987|ctp(-)?988|ctp(-)?989|android.*\\b97d\\b|tablet(?!.*pc)|viewpad7|lg-v909|mid7015|bntv250a|logicpd zoom2|\\ba7eb\\b|catnova8|a1_07|ct704|ct1002|\\bm721\\b|rk30sdk|\\bevotab\\b|smarttabii10|smarttab10",d=new RegExp(c,"i"),e=d.test(f),!0){case e:return b||i("rstv_is_tablet",!0),!0}var g=/android/i.test(f),h=!/mobile/i.test(f),j=parseInt(i("rstv_viewportW_dip")),k=parseInt(i("rstv_viewportH_dip")),m=i("rstv_is_portrait")?j:k;switch(!0){case g:switch(!0){case isNumber(m)&&m>=520&&800>=m:return b||i("rstv_is_tablet",!0),!0}switch(!0){case h:return b||i("rstv_is_tablet",!0),!0}}return b||i("rstv_is_tablet",!1),!1}function R(){switch(!0){case l("rstv_is_tv"):return i("rstv_is_tv")}var a=D(),b=/googletv|smart\-tv|smarttv|internet +tv|netcast|nettv|appletv|boxee|kylo|roku|vizio|dlnadoc|ce\-html|ouya|xbox|playstation *(3|4)|wii/i.test(a);switch(!0){case b:return i("rstv_is_tv",!0),!0}return i("rstv_is_tv",!1),!1}function S(){switch(!0){case l("rstv_is_pc"):return i("rstv_is_pc")}switch(!0){case T()===!1&&R()===!1:return i("rstv_is_pc",!0),!0}return i("rstv_is_pc",!1),!1}function T(){switch(!0){case P()||Q(!0):return!0;default:return!1}}function U(){switch(!0){case!T():return!0;default:return!1}}function V(){var a,b=Array.prototype.slice.call(arguments),c=isBool(b[0])?b[0]:!1;switch(!0){case l("rstv_ort_curr")&&!c:return i("rstv_ort_curr")}switch(!0){case c:i("rstv_viewportW rstv_viewportW_dip rstv_viewportH rstv_viewportH_dip rstv_screenW rstv_screenH",null)}var d,e,f=D(),g=/opera.+(mini|mobi)/i.test(f),h=t(),j=u(),k=v(),m=w(),n=k/m,o=k-h;switch(o=Math.abs(o),d=g&&260>h?4>=o&&n>=1?!0:!1:!0,e=!!(h>=j&&d),!0){case e:switch(a="landscape",!0){case!c:i("rstv_is_portrait",!1),i("rstv_is_landscape",!0)}break;default:switch(a="portrait",!0){case!c:i("rstv_is_portrait",!0),i("rstv_is_landscape",!1)}}return a}function W(){i("rstv_ort_curr rstv_is_portrait rstv_is_landscape",null),i("rstv_ort_curr",V())}function X(){switch(!0){case l("rstv_is_portrait"):return i("rstv_is_portrait")}return!("portrait"!=V())}function Y(){switch(!0){case l("rstv_is_landscape"):return i("rstv_is_landscape")}return!("landscape"!=V())}function Z(){var a,b,c=Y(),d=v(),e=w(),f=c?n("h"):n("w"),g=c?n("w"):n("h"),h=getClosestNumberMatchArray(f,d),i=getClosestNumberMatchArray(g,e),j=_();switch(!0){case h>=i:a=i+"_"+h;break;default:a=h+"_"+i}return b=array_search(a,j)}function $(){switch(!0){case l("rstv_is_cache_res_list"):return i("rstv_cache_res_list")}var a=["qqvga","qqvgax1","hqvga","hqvgax1","hqvgax2","hvgax1","qvga","wqvga","wqvga1","hvga","hvga1","hvga2","hvga3","hvgax1","hvgax2","vga","wvga","wvgax1","fwvga","svga","dvga","dvgax1","wsvga","wsvga1","xga","wxga","wxga1","wxga2","wxga3","wxga4","wxga5","xga+","wxga+","sxga","sxga+","wsxga+","uxga","wuxga","qwxga","qxga","wqxga","qsxga","wqsxga","quxga","wquxga","hxga","whxga","hsxga","whsxga","huxga","whuxga","nhd","nhdx1","qhd","hd","720p","fhd","1080p","1080i","wqhd","mbprhd","4kuhd","8kuhd"];return i("rstv_is_cache_res_list",!0),i("rstv_cache_res_list",a),a}function _(){switch(!0){case l("rstv_is_cache_res_matrix"):return i("rstv_cache_res_matrix")}var a={qqvga:"120_160",qqvgax1:"128_160",hqvga:"160_240",hqvgax1:"240_240",hqvgax2:"240_260",qvga:"240_320",wqvga:"240_400",wqvga1:"240_432",hvga:"320_480",hvga1:"360_480",hvga2:"272_480",hvga3:"240_640",hvgax1:"200_640",hvgax2:"300_640",hvgax3:"360_400",vga:"480_640",wvga:"480_800",wvgax1:"352_800",fwvga:"480_854",svga:"600_800",dvga:"640_960",dvgax1:"640_1136",wsvga:"576_1024",wsvga1:"600_1024",xga:"768_1024",wxga:"768_1280",wxga1:"720_1280",wxga2:"800_1280",wxga3:"768_1360",wxga4:"768_1366",wxga5:"720_720","xga+":"864_1152","wxga+":"900_1440",sxga:"1024_1280","sxga+":"1050_1400","wsxga+":"1050_1680",uxga:"1200_1600",wuxga:"1200_1920",qwxga:"1152_2048",qxga:"1536_2048",wqxga:"1600_2560","wqxga+":"1800_3200",qsxga:"2048_2560",wqsxga:"2048_3200",quxga:"2400_3200",wquxga:"2400_3840",hxga:"3072_4096",whxga:"3200_5120",hsxga:"4096_5120",whsxga:"4096_6400",huxga:"4800_6400",whuxga:"4800_7680",nhd:"360_640",nhdx1:"320_640",qhd:"540_960",hd:"720_1280","720p":"720_1280",fhd:"1080_1920","1080p":"1080_1920","1080i":"1080_1920",wqhd:"1440_2560",mbprhd:"1800_2880","4kuhd":"2160_3840","8kuhd":"4320_7680"};return i("rstv_is_cache_res_matrix",!0),i("rstv_cache_res_matrix",a),a}function ab(a,b){try{var c,d,e,f,g,h,i,j=[],k="",l="",m="",n=[],o="",p=[],q="",r=[],s=[],t=[],u=[],v=!1,w=!1,x=0,y="",z=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","aa","ab","ac","ad","ae","af","ag","ah","ai","aj","ak","al","am","an","ao","ap","aq","ar","as","at","au","av","aw","ax"],A=[],B=[],C=count(a),D=count(b),E=count(j);switch(!0){case!isArray(a):throw new Error("The first argument must be an array!");case isArray(a)&&0==C:throw new Error("The first argument must not be empty!")}switch(!0){case D>0&&E>0:throw new Error("You can only define either 'Classes' or 'Attributes' settings!")}switch(!0){case D>0:switch(v=!0,!0){case D!==C:throw new Error("The number items for 'Breakpoints' and 'Classes' settings must match")}}switch(!0){case E>0:switch(w=!0,!0){case E!==C:throw new Error("The number items for 'Breakpoints' and 'Attributes' settings must match")}}c=$(),d=_();for(var F=0;C>F;F++){switch(e=a[F],y=z[F],!0){case/-+/i.test(e)&&!/^[^-]*-[^-]*$/i.test(e):m+="2"}switch(k="",l="",!0){case substr_count(e,"-p")>0:k="p",l="-p",s.push("p");break;case substr_count(e,"-l")>0:k="l",l="-l",s.push("l");break;default:s.push("x")}switch(f=e.replace(""+l,""),!0){case in_array(f,c):switch(g=d[""+f],u=arrayToInteger(explode("_",g)),o=parseInt(u[0]),q=parseInt(u[1]),h=o,i=q,!0){case"l"==k:h=q,i=o}n[y]=h,p[y]=i,r.push("r");break;case/[0-9]+/i.test(f):n[y]=parseInt(f),p[y]=parseInt(f),r.push("v");break;default:m+="1"}A.push(y),x++}switch(!0){case/[1]+/i.test(m):throw new Error("There are errors in your 'Breakpoints' settings!");case/[2]+/i.test(m):throw new Error("There are errors in your 'Breakpoints' settings with regard to the way you have defined orientation markers e.g. -p or -l!")}var G,H,I=function(a,b){return a==b?0:b>a?-1:1},J=[],K=[],L=[],M=[],N=[],O=[],P=[];O=j,J=uasort(n,I),B=array_keys(J);for(var Q=count(J),F=0;Q>F;F++)G=B[F],H=array_search(G,A),K[G]=p[G],L[F]=r[H],M[F]=s[H],N[F]=b[H],P[F]=O[H];switch(t.bp_w=implode("|",J),t.bp_h=implode("|",K),t.bp_o=implode("|",M),t.bp_t=implode("|",L),!0){case v:var R=implode("|",N);t.bp_c=R}switch(!0){case w:var S=implode("|",P);t.bp_a=S}return t}catch(T){var U="There was an error: "+T.message;alert(U)}}function bb(a,b){var c=[];return c=ab(a,b)}function cb(){var b=Array.prototype.slice.call(arguments),d=isNumber(b[0])?"_"+b[0]:"",f=function(){var b=i("rstv_viewportW"),f=i("rstv_viewportH");e();var g,h,j,k,l,m,n,o,p=T(),q=V(!0),r=i("rstv_ort_curr"),s=!1;switch(z(),!0){case p:switch(g=i("rstv_viewportW"),h=i("rstv_viewportH"),j=g-b,m=h-f,k=Math.abs(j),n=Math.abs(m),l=100*(k/b),o=100*(n/f),!0){case 1>l:switch(!0){case o>35&&0>m:s=!0;break;case o>35&&m>0:s=!0;break;case o>12&&35>=o&&m>0:s=!0;break;case 0==o:s=!0}}}switch(!0){case!s:switch(!0){case r!==q:W(),c(a).trigger("change_orientation"+d);break;default:switch(!0){case!p:c(a).trigger("resize_viewport"+d)}}}};eb(f)}function db(b){var d=Array.prototype.slice.call(arguments),e=isNumber(d[1])?"_"+d[1]:"",f=function(){c(a).trigger("resize_container"+e)};fb(b,f)}function eb(a){return rb.on("resize",a),gb}function fb(a,b){return a.on("resizecontainer",b),gb}switch(!0){case"function"!=typeof c:throw"Restive.JS requires JQuery to run!"}var gb,hb,ib,jb,kb,lb,mb,nb,ob,pb=a,qb=b.documentElement,rb=c(pb),sb=pb.screen,tb=pb.matchMedia||pb.msMatchMedia||Object;a.rstv_store={main:{}},a.parent.rstv_store={main:{}},a.rstv_store.storage=function(){var b=Array.prototype.slice.call(arguments),c=b[0],d=b[1],e=!("undefined"==typeof d||null===d||!(isString(d)&&""!=d||isNumber(d)||isArray(d)&&count(d)>0||isBool(d)||isObject(d))),f=!(null!==d);switch(!0){case e:return a.rstv_store.main[""+c]=d,void 0;case f:return a.rstv_store.main[""+c]=null,void 0;default:return a.rstv_store.main[""+c]}};var ub=function(){a.rstv_store.main.rstv_is_priv_browsing=!!h();var b,c=i("rstv_is_init");switch(!0){case c:i("rstv_timestamp_curr",microtime(!0)),i("rstv_url",getUrl("bp")),f(),g(),e(),z(),W(),b=!1;break;default:i("rstv_timestamp_curr",microtime(!0)),i("rstv_timestamp_init",i("rstv_timestamp_curr")),i("rstv_loaded_count",0,"",{expires:1500}),i("rstv_is_init",!0),i("rstv_url",getUrl("bp")),i("rstv_url_hash",md5(getUrl("bp"))),e(),z(),i("rstv_ort_init",V()),i("rstv_ort_curr",V()),f(),b=!0}return b};return hb=C(t),ib=C(u),lb=C(v),mb=C(w),jb=C(x),kb=C(y),nb=C(r),ob=C(s),gb={init:ub(),reInit:d,getUserAgent:D,isStorageValueSet:l,store:i,storeVarTracker:j,storeVarValidator:k,incrementStorageValue:m,getBreakpoints:bb,viewportW:t,viewportH:u,screenW:v,screenH:w,pixelW:x,pixelH:y,vSpan:hb,vPitch:ib,dSpan:lb,dPitch:mb,cSpan:jb,cPitch:kb,eSpan:nb,ePitch:ob,isRetina:B,getPixelRatio:A,getPlatform:E,getFormFactor:O,getOrientation:V,getResolution:Z,isPortrait:X,isLandscape:Y,viewportMonitor:cb,containerMonitor:db,isMobile:T,isNonMobile:U,isPhone:P,isTablet:Q,isPC:S,isTV:R,isIOS:G,isApple:H,isAndroid:I,isSymbian:J,isBlackberry:K,isWindows:L,isWindowsPhone:M,resize:eb,resizeContainer:fb}}(window,document,jQuery);!function(a,b,c){Function.prototype.getFuncBody=function(){var a=this.toString().match(/\{([\s\S]*)\}/m)[1];return a.replace(/^\s*\/\/.*$/gm,"")};var d={init:function(b){try{d._multiConstructorCounter(),d._multiConstructorManager();var e,f,g=b,h=["all","ios","android","symbian","blackberry","windows"],i=["all","pc","tv","tablet","phone"],j=b.platform,k=b.formfactor,l=Restive.store("rstv_multi_start"),m=Restive.store("rstv_multi_count"),n=Restive.store("rstv_multi_abort_2");switch(!0){case in_array(j,h)===!1:return d._error("rstv_error_001",'"'+j+'" is not a valid Platform option!'),!1}switch(!0){case in_array(k,i)===!1:return d._error("rstv_error_002",'"'+k+'" is not a valid Form Factor option!'),!1}switch(!0){case n:return d._error("rstv_error_003","If you are calling the Restive.JS Constructor more than once, you must call $.restive.endMulti() at the end!"),!1}var o=[],p=[],q=[];p=b.breakpoints,q=b.classes,o=d.getBreakpoints(p,q);var r=[];switch(r.platform=d.getPlatform(),r.formfactor=d.getFormFactor(),r.is_mobile=d.isMobile(),r.pixelratio=d.getPixelRatio(),r.orientation=d.getOrientation(),r.selector=getSelector(this),r.tagname=this.prop("tagName").toLowerCase(),e=d._responsiveBasis(g,r),f=!("c"!=e),r.is_resp_basis_container=f,!0){case f:d._containerMonitor(o,this,g,r);break;default:switch(!0){case!l:d._viewportMonitor(o,this,g,r),d._callbackManager(g,["ready","init"]);break;default:a.parent.rstv_store.main["rstv_breakpoints_"+m]=o,a.parent.rstv_store.main["rstv_this_"+m]=this,a.parent.rstv_store.main["rstv_options_"+m]=g,a.parent.rstv_store.main["rstv_core_info_"+m]=r,a.rstv_store.main=a.parent.rstv_store.main
}}return Restive.store("rstv_turbo_classes_reflow_status_in",null),Restive.store("rstv_bpm_addclass_init",!1),this.each(function(){var a=c(this);d.setBreakpoints(o,a,g,r)})}catch(s){alert(s),console.log(s)}},_error:function(a,b){var c=!("true"!==String(Restive.store(a+"_init")).toLowerCase());switch(!0){case!c:throw Restive.store(a+"_init",!0),new Error(b)}},_callbackManager:function(){var a,b,e=Array.prototype.slice.call(arguments),f=e[0],g=e[1];switch(!0){case in_array("ready",g):var h=f.onReady,i=f.onReady.getFuncBody().length;switch(!0){case c.isFunction(h)&&i>0:h()}}switch(!0){case in_array("resize",g):var j=f.onResize,k=f.onResize.getFuncBody().length;switch(!0){case c.isFunction(j)&&k>0:j()}}switch(!0){case in_array("turboclassesreflow",g):var l=g[1],m=f.onTurboClassReflow,n=f.onTurboClassReflow.getFuncBody().length;switch(!0){case c.isFunction(m)&&n>0:m()}var o=f.onTurboClassReflowIn,p=f.onTurboClassReflowIn.getFuncBody().length;switch(!0){case c.isFunction(o)&&p>0:switch(!0){case"in"==l:o()}}var q=f.onTurboClassReflowOut,r=f.onTurboClassReflowOut.getFuncBody().length;switch(!0){case c.isFunction(q)&&r>0:switch(!0){case"out"==l:q()}}}switch(!0){case in_array("rotate",g):var s=Restive.getOrientation(),t=f.onRotate,u=f.onRotate.getFuncBody().length;switch(!0){case c.isFunction(t)&&u>0:t()}var v=f.onRotateToP,w=f.onRotateToP.getFuncBody().length;switch(!0){case c.isFunction(v)&&w>0:switch(!0){case"portrait"==s:v()}}var x=f.onRotateToL,y=f.onRotateToL.getFuncBody().length;switch(!0){case c.isFunction(x)&&y>0:switch(!0){case"landscape"==s:x()}}}switch(!0){case in_array("addclass",g)||in_array("removeclass",g):var z=g[0],A=g[1],B={addclass:"onAddClass",removeclass:"onRemoveClass"};switch(a=f[B[""+z]],b=a.getFuncBody().length,!0){case c.isFunction(a)&&b>0:a(A)}}switch(!0){case in_array("init",g):switch(!0){case in_array("init",g):for(var C=["onPortrait","onLandscape","onRetina","onPhone","onTablet","onPC","onTV","onIOS","onAndroid","onSymbian","onBlackberry","onWindows","onWindowsPhone","onMobile","onNonMobile"],D=["isPortrait","isLandscape","isRetina","isPhone","isTablet","isPC","isTV","isIOS","isAndroid","isSymbian","isBlackberry","isWindows","isWindowsPhone","isMobile","isNonMobile"],E=0;E<count(D);E++)switch(a=f[C[E]],b=a.getFuncBody().length,!0){case c.isFunction(a)&&b>0:var F=d[D[E]],G=F();switch(!0){case G:a()}}}}},_URLMonitor:function(){var a=Restive.store("rstv_url"),b=Restive.store("rstv_url_hash"),c=md5(a);switch(!0){case c!=b:Restive.store("rstv_multi_bpm_idx rstv_cache_bpm rstv_cache_bpm_lock rstv_cache_req rstv_cache_bpm_viewport_diff",null),Restive.store("rstv_url_hash",c)}},_responsiveBasis:function(a,b){var c,d=b.selector,e=/^#[^\s]+$/i.test(d),f=elementIsChildOf("body",d),g=a.anchor;try{switch(!0){case f&&("element"==g||"e"==g):switch(!0){case!e:throw new Error("You must use only the JQuery ID selector when the 'anchor' option is set to 'e' or 'element'!")}c="c";break;default:c="v",Restive.store("rstv_resp_basis_viewport_init",!0)}return c}catch(h){alert(h),console.log(h)}},_viewportMonitor:function(b,e,f,g){var h="resize_viewport",i="change_orientation";c(a).on(h,function(){d._onResizeViewport(b,e,f,g)}),c(a).on(i,function(){d._onChangeOrientation(b,e,f,g)}),Restive.viewportMonitor()},_containerMonitor:function(a,b,c,e){var f="resizecontainer";b.on(f,function(){d._onResizeContainer(a,b,c,e)})},_onResizeViewport:function(a,b,e,f){try{return b.each(function(){var b=c(this);d.setBreakpoints(a,b,e,f,"rv"),d._callbackManager(e,["resize"])})}catch(g){alert(g),console.log(g)}},_onResizeContainer:function(a,b,e,f){try{return b.each(function(){var b=c(this);d.setBreakpoints(a,b,e,f,"rc")})}catch(g){alert(g),console.log(g)}},_onChangeOrientation:function(a,b,e,f){try{return b.each(function(){var b=c(this);d.setBreakpoints(a,b,e,f,"co"),d._callbackManager(e,["rotate"])})}catch(g){alert(g),console.log(g)}},getBreakpoints:function(a,b){return Restive.getBreakpoints(a,b)},setBreakpoints:function(){var a=Array.prototype.slice.call(arguments),b=a[0],c=a[1],e=a[2],f=a[3],g=a[4],h=!1,i=!1,j=!1,k=f.is_resp_basis_container,l=Restive.store("rstv_multi_abort_1");switch(!0){case"co"==g:h=!0}switch(!0){case"rv"==g:i=!0}switch(!0){case"rc"==g:j=!0}switch(!0){case l:return d._error("rstv_error_004","If you are calling the Restive.JS Constructor more than once, you must call $.restive.startMulti() before calling these constructors!"),!1}var m=Restive.store("rstv_multi_start"),n=parseInt(Restive.store("rstv_multi_count")),o=parseInt(Restive.store("rstv_multi_bpm_idx")),p=Restive.store("rstv_cache_bpm_lock");switch(!0){case!k:switch(!0){case m&&!h&&p:switch(!0){case isNumber(n)&&isNumber(o)&&n!=o:return!1}}}var q,r,s,t,u,v,w,x=(Restive.getUserAgent(),e.platform,e.formfactor,e.force_dip),y=f.platform,z=f.formfactor,A=(f.pixelratio,1==f.is_mobile?"true":"false",Restive.store("rstv_ort_init"),Restive.store("rstv_ort_curr"),Restive.isPortrait()),B=A===!0?!1:!0,C=[],D=!1,E=b.bp_w,F=b.bp_h,G=b.bp_o,H=b.bp_t,I=b.bp_c,J=[],K=[],L=[],M=[];switch(q=Restive.viewportW(),w=q,r=Restive.viewportH(),s=Restive.screenW(),t=Restive.screenH(),u=Restive.pixelW(),v=Restive.pixelH(),!0){case 1==x:w=Restive.pixelW()}switch(J=arrayToInteger(explode("|",E)),K=arrayToInteger(explode("|",F)),L=explode("|",G),M=explode("|",H),!0){case"undefined"!=typeof I||null!=I:D=!0,C=explode("|",I)}var N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb="",gb=!0,hb=!0,ib=!1,jb=!1,kb=!1,lb=!0,mb=!0,nb="",ob=count(J);N=arrayHasDuplicates(J),O=N?!1:!0;for(var pb=0;ob>pb;pb++){switch(!0){case"all"!=e.platform&&e.platform!=y:lb=!1}switch(!0){case"all"!=e.formfactor&&e.formfactor!=z:mb=!1}if(!lb||!mb)break;var qb=pb-1;switch(P=J[pb],!0){case pb>0:Q=J[qb];break;default:Q=0,R=0}switch(V=K[pb],$=M[pb],_=L[pb],hb=gb,!0){case"p"==_:db=A?!0:!1,ib=!0,gb=db,fb=hb===!1?R:fb;break;case"l"==_:db=B?!0:!1,ib=!0,gb=db,fb=hb===!1?R:fb;break;default:fb=ib===!0&&hb===!1?R:fb,R=pb>0?P:0,db=!0,gb=db}switch(!0){case 0==pb:S=0,fb=P;break;case pb>=1:switch(!0){case P!==Q:fb=P+"-!"+fb}S=parseInt(getValueAfterExplode(fb,"-!",1))}switch(ab=C[pb],!0){case 0==pb:T=S,U=P;break;default:T=0==S?S:S+1,U=P}switch(!0){case k:cb=Restive.eSpan(T,U,c,e.anchor_e_df,e.force_dip);break;default:cb=1==x?Restive.cSpan(T,U):Restive.vSpan(T,U)}switch(!0){case cb&&db:switch(!0){case k:jb=!0;break;default:switch(W=U-w,X=Math.abs(W),Y=w-T,Z=.1*U,Z=Math.round(Z),!0){case h:switch(!0){case W>Z:nb="4";break;default:nb="2"}break;default:switch(!0){case W>Z:nb="3";break;default:nb="1"}}switch(jb=!0,!0){case jb:switch(kb=!0,bb=ab,!0){case"x"!=_:O=!0}}}break;default:jb=!1}if(jb&&O)break}switch(!0){case kb:jb=!0,ab=bb}switch(!0){case!jb:switch(!0){case k:return d.unsetElementDOM(c,e),void 0}switch(T=0,U=0,!0){case!Restive.store("rstv_multi_start")||h:d.unsetElementDOM(c,e)}switch(!0){case!lb&&mb:nb="7";break;case!mb&&lb:nb="8";break;case!mb&&!lb:nb="9";break;default:switch(!0){case h:nb="6";break;default:nb="5"}}eb=d._addTurboClasses("",e.turbo_classes),eb=d._addTurboClassesReflow(eb,e),d.setElementDOM(c,eb,e),Restive.store("rstv_breakpoint_match_curr",!1);break;case jb:switch(eb=d._addTurboClasses(ab,e.turbo_classes),eb=d._addTurboClassesReflow(eb,e),!0){case k:return d.setElementDOM(c,eb,e),void 0}switch(!0){case Restive.store("rstv_multi_start"):var rb=parseInt(Restive.store("rstv_bpm_h_counter"));switch(!0){case h:d.setElementDOM(c,eb,e);break;default:switch(!0){case rb>1:var sb=parseInt(Restive.store("rstv_cache_bpm_viewport_diff"));switch(!0){case sb>X:switch(d.setElementDOM(c,eb,e),!0){case!p:Restive.store("rstv_multi_bpm_idx",n)}Restive.store("rstv_cache_bpm_viewport_diff",X)}break;default:switch(d.setElementDOM(c,eb,e),!0){case!p:Restive.store("rstv_multi_bpm_idx",n)}Restive.store("rstv_cache_bpm_viewport_diff",X)}rb++,Restive.store("rstv_bpm_h_counter",rb,"",{expires:1e3})}break;default:d.setElementDOM(c,eb,e)}Restive.store("rstv_breakpoint_match_curr",!0)}var tb=Restive.store("rstv_cache_bpm_lock");switch(!0){case m&&!h&&!(isString(tb)&&""!=tb||isBool(tb)):Restive.store("rstv_breakpoint_match_curr")?d._extVarTracker("rstv_cache_bpm","h","ls",!1,"",!1):d._extVarTracker("rstv_cache_bpm","m","ls",!1,"",!1)}switch(!0){case jb:return!0}return!1},_addTurboClassesReflow:function(a,b){switch(!0){case d.isPC():switch(!0){case b.turbo_classes_reflow&&isString(b.turbo_classes)&&""!=b.turbo_classes:var c,e,f,g,h,i,j,k,l,m=[],n=[],o=a,p=!1,q=Restive.store("rstv_turbo_classes_reflow_status_in");switch(m=explode(",",b.turbo_classes_reflow_limits),i=parseInt(m[0]),h=parseInt(m[1]),c=/is_mobile=/i.test(b.turbo_classes),!0){case c:n=explode(",",b.turbo_classes);for(var r=0;r<count(n);r++){switch(k=getValueAfterExplode(n[r],"=",0),l=getValueAfterExplode(n[r],"=",1),!0){case"is_mobile"==k:switch(e=1==b.force_dip?Restive.cSpan(0,h):Restive.vSpan(0,h),!0){case e:switch(o+=" "+l,p=!0,!0){case!q&&p:Restive.store("rstv_turbo_classes_reflow_status_in",!0),d._callbackManager(b,["turboclassesreflow","in"])}break;default:switch(p=!1,!0){case q&&!p:Restive.store("rstv_turbo_classes_reflow_status_in",!1),d._callbackManager(b,["turboclassesreflow","out"])}}}switch(!0){case"is_phone"==k:f=1==b.force_dip?Restive.cSpan(0,i):Restive.vSpan(0,i),o=f?o+" "+l:o}switch(!0){case"is_tablet"==k:j=i+1,g=1==b.force_dip?Restive.cSpan(j,h):Restive.vSpan(j,h),o=g?o+" "+l:o}}return o}}}return a},_addTurboClasses:function(a,b){switch(!0){case!isString(b)||""==b:return a}var c,e,f,g,h=[],i=[],j="",k="",l={is_mobile:"isMobile",is_non_mobile:"isNonMobile",is_retina:"isRetina",is_phone:"isPhone",is_tablet:"isTablet",is_tv:"isTV",is_pc:"isPC",is_portrait:"isPortrait",is_landscape:"isLandscape"};h=explode(",",b);for(var m=0;m<count(h);m++)switch(c=getValueAfterExplode(h[m],"=",0),e=getValueAfterExplode(h[m],"=",1),f=l[c],!0){case isString(f)&&""!=f:switch(g=d[f],!0){case g():i.push(e)}}return j=implode(" ",i),k=""!=j?j+" "+a:a},setElementDOM:function(a,b,c){var e,f=md5(getSelector(a)),g="rstv_bpm_class_"+f,h=Restive.store("rstv_bpm_addclass_init");switch(e=isString(Restive.store(g))&&""!=Restive.store(g)?Restive.store(g):"",!0){case e!=b||0==h:switch(!0){case""!=e:a.removeClass(e).addClass(b),d._callbackManager(c,["removeclass",""+e]);break;default:a.addClass(b)}Restive.store(g,b),d._callbackManager(c,["addclass",""+b]),Restive.store("rstv_bpm_addclass_init",!0)}},unsetElementDOM:function(a,b){var c,e=md5(getSelector(a)),f="rstv_bpm_class_"+e;c=isString(Restive.store(f))&&""!=Restive.store(f)?Restive.store(f):"",a.removeClass(c),d._callbackManager(b,["removeclass",""+c])},_extVarTracker:function(a,b){var c=Array.prototype.slice.call(arguments),d=isString(c[2])&&""!=c[2]?c[2]:"ck",e=isBool(c[3])?c[3]:!1,f=isNumber(c[4])||isString(c[4])?parseInt(c[4]):"",g=isBool(c[5])?c[5]:!0,h=isString(c[6])&&""!=c[6]?c[6]:"-!",i=isNumber(c[7])||isString(c[7])?parseInt(c[7]):80;return Restive.storeVarTracker(a,b,d,e,f,g,h,i)},_multiConstructorSelectPos:function(){var a,b=Restive.store("rstv_cache_bpm"),c=explode("-!",b),d=parseInt(Restive.store("rstv_multi_bpm_idx"));a=implode("",c);var e,f,g=new RegExp("^[^h]*h[^h]*$","gi"),h=new RegExp("^m+$","gi");switch(!0){case g.test(a):e=strrpos(a,"h");break;case h.test(a):Restive.store("rstv_cache_bpm_all_miss",!0,"",{expires:2e3}),e=strrpos(a,"m");break;case substr_count(a,"h")>1:e=d-1}return f=e+1,Restive.store("rstv_multi_bpm_idx",f),e},_multiConstructorManageEvents:function(b){c(a).off("resize");var e=parseInt(b)+1,f=a.parent.rstv_store.main["rstv_breakpoints_"+e],g=a.parent.rstv_store.main["rstv_this_"+e],h=a.parent.rstv_store.main["rstv_options_"+e],i=a.parent.rstv_store.main["rstv_core_info_"+e];switch(!0){case Restive.store("rstv_resp_basis_viewport_init"):d._viewportMonitor(f,g,h,i),d._callbackManager(h,["ready","init"])}},_multiConstructorFinalize:function(){var a=d._multiConstructorSelectPos();d._multiConstructorManageEvents(a),Restive.store("rstv_cache_bpm_lock",!0),Restive.store("rstv_cache_req",null),Restive.store("rstv_multi_count",null)},_multiConstructorStart:function(){switch(Restive.store("rstv_multi_count",0),Restive.store("rstv_multi_start",!0),Restive.store("rstv_multi_abort_1",!1),Restive.store("rstv_multi_abort_2",!1),Restive.store("rstv_bpm_h_counter",1,"",{expires:1e3}),Restive.store("rstv_bpm_m_counter",1,"",{expires:1e3}),!0){case!Restive.isStorageValueSet("rstv_multi_start_count"):Restive.store("rstv_multi_start_count",1),Restive.store("rstv_multi_end",!1);break;default:Restive.incrementStorageValue("rstv_multi_start_count")}},_multiConstructorManager:function(){var a=Restive.store("rstv_multi_start"),b=Restive.store("rstv_multi_end"),c=parseInt(Restive.store("rstv_multi_count")),e=parseInt(Restive.store("rstv_multi_start_count"));switch(!0){case c>1:switch(!0){case a===!1:Restive.store("rstv_multi_abort_1",!0)}}switch(!0){case e>1&&b===!1:Restive.store("rstv_multi_abort_2",!0)}d._URLMonitor()},_multiConstructorCounter:function(){Restive.incrementStorageValue("rstv_multi_count")},_multiConstructorEnd:function(){Restive.store("rstv_multi_start_count",0),Restive.store("rstv_multi_end",!0),d._multiConstructorFinalize()},getUserAgent:function(){return Restive.getUserAgent()},getPlatform:function(){return Restive.getPlatform()},getFormFactor:function(){return Restive.getFormFactor()},getOrientation:function(){return Restive.getOrientation()},getResolution:function(){return Restive.getResolution()},getPixelRatio:function(a){return Restive.getPixelRatio(a)},getViewportW:function(){return Restive.viewportW()},getViewportH:function(){return Restive.viewportH()},getScreenW:function(){return Restive.screenW()},getScreenH:function(){return Restive.screenH()},getPixelW:function(){return Restive.pixelW()},getPixelH:function(){return Restive.pixelH()},isRetina:function(){return Restive.isRetina()},isMobile:function(){return Restive.isMobile()},isNonMobile:function(){return Restive.isNonMobile()},isPhone:function(){return Restive.isPhone()},isTablet:function(){return Restive.isTablet()},isTV:function(){return Restive.isTV()},isPC:function(){return Restive.isPC()},isIOS:function(){return Restive.isIOS()},isApple:function(){return Restive.isApple()},isAndroid:function(){return Restive.isAndroid()},isSymbian:function(){return Restive.isSymbian()},isBlackberry:function(){return Restive.isBlackberry()},isWindows:function(){return Restive.isWindows()},isWindowsPhone:function(){return Restive.isWindowsPhone()},isPortrait:function(){return Restive.isPortrait()},isLandscape:function(){return Restive.isLandscape()}};c.fn.restive=function(a){if(d[a])return d[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"==typeof a||!a){var b=c.extend({},c.fn.restive.defaults,a),e=new Array(b);return d.init.apply(this,e)}c.error("Method "+a+" does not exist on Restive.JS")},c.fn.restive.defaults={breakpoints:[],classes:[],anchor:"window",anchor_e_df:"w",platform:"all",formfactor:"all",turbo_classes:"",turbo_classes_reflow:!1,turbo_classes_reflow_limits:"480,960",force_dip:!1,onReady:function(){},onResize:function(){},onRotate:function(){},onRotateToP:function(){},onRotateToL:function(){},onPortrait:function(){},onLandscape:function(){},onRetina:function(){},onPhone:function(){},onTablet:function(){},onPC:function(){},onTV:function(){},onIOS:function(){},onAndroid:function(){},onSymbian:function(){},onBlackberry:function(){},onWindows:function(){},onWindowsPhone:function(){},onMobile:function(){},onNonMobile:function(){},onTurboClassReflow:function(){},onTurboClassReflowIn:function(){},onTurboClassReflowOut:function(){},onAddClass:function(){},onRemoveClass:function(){}};var e=c.restive=function(){};c.extend(e,{getUserAgent:function(){return d.getUserAgent()},getPlatform:function(){return d.getPlatform()},getFormFactor:function(){return d.getFormFactor()},getOrientation:function(){return d.getOrientation()},getResolution:function(){return d.getResolution()},getPixelRatio:function(a){return d.getPixelRatio(a)},getViewportW:function(){return d.getViewportW()},getViewportH:function(){return d.getViewportH()},getScreenW:function(){return d.getScreenW()},getScreenH:function(){return d.getScreenH()},getPixelW:function(){return d.getPixelW()},getPixelH:function(){return d.getPixelH()},isRetina:function(){return d.isRetina()},isMobile:function(){return d.isMobile()},isNonMobile:function(){return d.isNonMobile()},isPhone:function(){return d.isPhone()},isTablet:function(){return d.isTablet()},isTV:function(){return d.isTV()},isPC:function(){return d.isPC()},isIOS:function(){return d.isIOS()},isApple:function(){return d.isIOS()},isAndroid:function(){return d.isAndroid()},isSymbian:function(){return d.isSymbian()},isBlackberry:function(){return d.isBlackberry()},isWindows:function(){return d.isWindows()},isWindowsPhone:function(){return d.isWindowsPhone()},isPortrait:function(){return d.isPortrait()},isLandscape:function(){return d.isLandscape()},startMulti:function(){d._multiConstructorStart()},endMulti:function(){d._multiConstructorEnd()}})}(window,document,jQuery);
$(function() {
    var region = $.cookie("telcelcom_region");
    if ((typeof region === 'undefined') || region === "") {
        region = 9;
    }
    if($("#carouselCall").length > 0){
        var sectionTag = $("#carouselCall").attr('data-url');
        var linkLabel = $("#carouselCall").attr('data-linkLabel');
        //var display = $("#carouselCall").attr('data-display');
        var device =  $("#carouselCall").attr('data-device');
        var encodedLabel = btoa(linkLabel);
        if(sectionTag.indexOf('.html') > -1){
            sectionTag = sectionTag.substring(0,sectionTag.indexOf('.html'));
            //sectionTag = sectionTag + "." + encodedLabel + "."+ device + "." + display + ".region-" + region + ".html?bustcache=" + generateTimeStamp();
            sectionTag = sectionTag + "." + encodedLabel + "."+ device + ".region-" + region + ".html?bustcache=" + generateTimeStamp();
        }
        $("#carouselCall").attr('data-url',sectionTag);
    }

});

$('body').on('device.carousel', '.js-cq-device-carousel', function (e,targetForm) {
    var region = $.cookie("telcelcom_region");
    if ((typeof region === 'undefined') || region === "") {
        region = 9;
    }
    if($("#carouselCall").length > 0){
        var sectionTag = $("#carouselCall").attr('data-url');
        if(sectionTag.indexOf('.html') > -1){
            sectionTag = sectionTag.substring(0,sectionTag.indexOf('.html'));
            sectionTag = sectionTag + ".region-" + region + ".html?bustcache=" + generateTimeStamp();
        }
        $("#carouselCall").attr('data-url',sectionTag);
    }
});
/*! jQuery UI - v1.10.4 - 2014-06-09
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.slider.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

(function(e,t){function i(t,i){var s,a,o,r=t.nodeName.toLowerCase();return"area"===r?(s=t.parentNode,a=s.name,t.href&&a&&"map"===s.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&n(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,a=e(this[0]);a.length&&a[0]!==document;){if(n=a.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(a.css("zIndex"),10),!isNaN(s)&&0!==s))return s;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?r["inner"+n].call(this):this.each(function(){e(this).css(o,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?r["outer"+n].call(this,t):this.each(function(){e(this).css(o,s(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,a=e.ui[t].prototype;for(s in n)a.plugins[s]=a.plugins[s]||[],a.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;s.length>n;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0?!0:(t[n]=1,s=t[n]>0,t[n]=0,s)}})})(jQuery);(function(t,e){var i=0,s=Array.prototype.slice,n=t.cleanData;t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(o){}n(e)},t.widget=function(i,s,n){var o,a,r,h,l={},c=i.split(".")[0];i=i.split(".")[1],o=c+"-"+i,n||(n=s,s=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},a=t[c][i],r=t[c][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new r(t,i)},t.extend(r,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),h=new s,h.options=t.widget.extend({},h.options),t.each(n,function(i,n){return t.isFunction(n)?(l[i]=function(){var t=function(){return s.prototype[i].apply(this,arguments)},e=function(t){return s.prototype[i].apply(this,t)};return function(){var i,s=this._super,o=this._superApply;return this._super=t,this._superApply=e,i=n.apply(this,arguments),this._super=s,this._superApply=o,i}}(),e):(l[i]=n,e)}),r.prototype=t.widget.extend(h,{widgetEventPrefix:a?h.widgetEventPrefix||i:i},l,{constructor:r,namespace:c,widgetName:i,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete a._childConstructors):s._childConstructors.push(r),t.widget.bridge(i,r)},t.widget.extend=function(i){for(var n,o,a=s.call(arguments,1),r=0,h=a.length;h>r;r++)for(n in a[r])o=a[r][n],a[r].hasOwnProperty(n)&&o!==e&&(i[n]=t.isPlainObject(o)?t.isPlainObject(i[n])?t.widget.extend({},i[n],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,n){var o=n.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,h=s.call(arguments,1),l=this;return a=!r&&h.length?t.widget.extend.apply(null,[a].concat(h)):a,r?this.each(function(){var s,n=t.data(this,o);return n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(s=n[a].apply(n,h),s!==n&&s!==e?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):e):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new n(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var n,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;n.length-1>a;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(i=n.pop(),1===arguments.length)return o[i]===e?null:o[i];o[i]=s}else{if(1===arguments.length)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var o,a=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=o=t(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,o=this.widget()),t.each(n,function(n,r){function h(){return i||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.delegate(u,c,h):s.bind(c,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}})})(jQuery);(function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return n&&!a&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);(function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)o.push(a);this.handles=n.add(t(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,a,o,r,l,h,u=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-u.values(e));(n>i||n===i&&(e===u._lastChangedValue||u.values(e)===c.min))&&(n=i,a=t(this),o=e)}),r=this._start(e,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),l=a.offset(),h=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:e.pageX-l.left-a.width()/2,top:e.pageY-l.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,a;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>s||1===e&&s>i)&&(i=s),i!==this.values(e)&&(n=this.values(),n[e]=i,a=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),a!==!1&&this.values(e,i))):i!==this.value()&&(a=this._trigger("slide",t,{handle:this.handles[e],value:i}),a!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(e,i){var s,n,a;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),undefined;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,a,o=this.options.range,r=this.options,l=this,h=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())),u["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](u,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[h?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[h?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var s,n,a,o,r=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),s=this._start(i,r),s===!1))return}switch(o=this.options.step,n=a=this.options.values&&this.options.values.length?this.values(r):this.value(),i.keyCode){case t.ui.keyCode.HOME:a=this._valueMin();break;case t.ui.keyCode.END:a=this._valueMax();break;case t.ui.keyCode.PAGE_UP:a=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;a=this._trimAlignValue(n+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;a=this._trimAlignValue(n-o)}this._slide(i,r,a)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})})(jQuery);
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery);
/*
Custom Selects
Chosen v1.1.0 | (c) 2011-2013 by Harvest | MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md */
!function(){var a,AbstractChosen,Chosen,SelectParser,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};SelectParser=function(){function SelectParser(){this.options_index=0,this.parsed=[]}return SelectParser.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)},SelectParser.prototype.add_group=function(a){var b,c,d,e,f,g;for(b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:this.escapeExpression(a.label),children:0,disabled:a.disabled}),f=a.childNodes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},SelectParser.prototype.add_option=function(a,b,c){return"OPTION"===a.nodeName.toUpperCase()?(""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},SelectParser.prototype.escapeExpression=function(a){var b,c;return null==a||a===!1?"":/[\&\<\>\"\'\`]/.test(a)?(b={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/&(?!\w+;)|[\<\>\"\'\`]/g,a.replace(c,function(a){return b[a]||"&amp;"})):a},SelectParser}(),SelectParser.select_to_array=function(a){var b,c,d,e,f;for(c=new SelectParser,f=a.childNodes,d=0,e=f.length;e>d;d++)b=f[d],c.add_node(b);return c.parsed},AbstractChosen=function(){function AbstractChosen(a,b){this.form_field=a,this.options=null!=b?b:{},AbstractChosen.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return AbstractChosen.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},AbstractChosen.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text},AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=!0},AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=!1},AbstractChosen.prototype.input_focus=function(){var a=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return a.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},AbstractChosen.prototype.input_blur=function(){var a=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return a.blur_test()},100))},AbstractChosen.prototype.results_option_build=function(a){var b,c,d,e,f;for(b="",f=this.results_data,d=0,e=f.length;e>d;d++)c=f[d],b+=c.group?this.result_add_group(c):this.result_add_option(c),(null!=a?a.first:void 0)&&(c.selected&&this.is_multiple?this.choice_build(c):c.selected&&!this.is_multiple&&this.single_set_selected_text(c.text));return b},AbstractChosen.prototype.result_add_option=function(a){var b,c;return a.search_match?this.include_option_in_results(a)?(b=[],a.disabled||a.selected&&this.is_multiple||b.push("active-result"),!a.disabled||a.selected&&this.is_multiple||b.push("disabled-result"),a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=document.createElement("li"),c.className=b.join(" "),c.style.cssText=a.style,c.setAttribute("data-option-array-index",a.array_index),c.innerHTML=a.search_text,this.outerHTML(c)):"":""},AbstractChosen.prototype.result_add_group=function(a){var b;return a.search_match||a.group_match?a.active_options>0?(b=document.createElement("li"),b.className="group-result",b.innerHTML=a.search_text,this.outerHTML(b)):"":""},AbstractChosen.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},AbstractChosen.prototype.reset_single_select_options=function(){var a,b,c,d,e;for(d=this.results_data,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.selected?e.push(a.selected=!1):e.push(void 0);return e},AbstractChosen.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},AbstractChosen.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},AbstractChosen.prototype.winnow_results=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;for(this.no_results_clear(),e=0,g=this.get_search_text(),a=g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),d=this.search_contains?"":"^",c=new RegExp(d+a,"i"),j=new RegExp(a,"i"),m=this.results_data,k=0,l=m.length;l>k;k++)b=m[k],b.search_match=!1,f=null,this.include_option_in_results(b)&&(b.group&&(b.group_match=!1,b.active_options=0),null!=b.group_array_index&&this.results_data[b.group_array_index]&&(f=this.results_data[b.group_array_index],0===f.active_options&&f.search_match&&(e+=1),f.active_options+=1),(!b.group||this.group_search)&&(b.search_text=b.group?b.label:b.html,b.search_match=this.search_string_match(b.search_text,c),b.search_match&&!b.group&&(e+=1),b.search_match?(g.length&&(h=b.search_text.search(j),i=b.search_text.substr(0,h+g.length)+"</em>"+b.search_text.substr(h+g.length),b.search_text=i.substr(0,h)+"<em>"+i.substr(h)),null!=f&&(f.group_match=!0)):null!=b.group_array_index&&this.results_data[b.group_array_index].search_match&&(b.search_match=!0)));return this.result_clear_highlight(),1>e&&g.length?(this.update_results_content(""),this.no_results(g)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},AbstractChosen.prototype.search_string_match=function(a,b){var c,d,e,f;if(b.test(a))return!0;if(this.enable_split_word_search&&(a.indexOf(" ")>=0||0===a.indexOf("["))&&(d=a.replace(/\[|\]/g,"").split(" "),d.length))for(e=0,f=d.length;f>e;e++)if(c=d[e],b.test(c))return!0},AbstractChosen.prototype.choices_count=function(){var a,b,c,d;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,d=this.form_field.options,b=0,c=d.length;c>b;b++)a=d[b],a.selected&&(this.selected_option_count+=1);return this.selected_option_count},AbstractChosen.prototype.choices_click=function(a){return a.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},AbstractChosen.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},AbstractChosen.prototype.clipboard_event_checker=function(){var a=this;return setTimeout(function(){return a.results_search()},50)},AbstractChosen.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},AbstractChosen.prototype.include_option_in_results=function(a){return this.is_multiple&&!this.display_selected_options&&a.selected?!1:!this.display_disabled_options&&a.disabled?!1:a.empty?!1:!0},AbstractChosen.prototype.search_results_touchstart=function(a){return this.touch_started=!0,this.search_results_mouseover(a)},AbstractChosen.prototype.search_results_touchmove=function(a){return this.touch_started=!1,this.search_results_mouseout(a)},AbstractChosen.prototype.search_results_touchend=function(a){return this.touch_started?this.search_results_mouseup(a):void 0},AbstractChosen.prototype.outerHTML=function(a){var b;return a.outerHTML?a.outerHTML:(b=document.createElement("div"),b.appendChild(a),b.innerHTML)},AbstractChosen.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},AbstractChosen.default_multiple_text="Select Some Options",AbstractChosen.default_single_text="Select an Option",AbstractChosen.default_no_result_text="No hay coincidencias para tu búsqueda",AbstractChosen}(),a=jQuery,a.fn.extend({chosen:function(b){return AbstractChosen.browser_is_supported()?this.each(function(){var c,d;c=a(this),d=c.data("chosen"),"destroy"===b&&d?d.destroy():d||c.data("chosen",new Chosen(this,b))}):this}}),Chosen=function(c){function Chosen(){return b=Chosen.__super__.constructor.apply(this,arguments)}return d(Chosen,c),Chosen.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},Chosen.prototype.set_up_html=function(){var b,c;return b=["chosen-container"],b.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&b.push(this.form_field.className),this.is_rtl&&b.push("chosen-rtl"),c={"class":b.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(c.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=a("<div />",c),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},Chosen.prototype.register_observers=function(){var a=this;return this.container.bind("mousedown.chosen",function(b){a.container_mousedown(b)}),this.container.bind("mouseup.chosen",function(b){a.container_mouseup(b)}),this.container.bind("mouseenter.chosen",function(b){a.mouse_enter(b)}),this.container.bind("mouseleave.chosen",function(b){a.mouse_leave(b)}),this.search_results.bind("mouseup.chosen",function(b){a.search_results_mouseup(b)}),this.search_results.bind("mouseover.chosen",function(b){a.search_results_mouseover(b)}),this.search_results.bind("mouseout.chosen",function(b){a.search_results_mouseout(b)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(b){a.search_results_mousewheel(b)}),this.search_results.bind("touchstart.chosen",function(b){a.search_results_touchstart(b)}),this.search_results.bind("touchmove.chosen",function(b){a.search_results_touchmove(b)}),this.search_results.bind("touchend.chosen",function(b){a.search_results_touchend(b)}),this.form_field_jq.bind("chosen:updated.chosen",function(b){a.results_update_field(b)}),this.form_field_jq.bind("chosen:activate.chosen",function(b){a.activate_field(b)}),this.form_field_jq.bind("chosen:open.chosen",function(b){a.container_mousedown(b)}),this.form_field_jq.bind("chosen:close.chosen",function(b){a.input_blur(b)}),this.search_field.bind("blur.chosen",function(b){a.input_blur(b)}),this.search_field.bind("keyup.chosen",function(b){a.keyup_checker(b)}),this.search_field.bind("keydown.chosen",function(b){a.keydown_checker(b)}),this.search_field.bind("focus.chosen",function(b){a.input_focus(b)}),this.search_field.bind("cut.chosen",function(b){a.clipboard_event_checker(b)}),this.search_field.bind("paste.chosen",function(b){a.clipboard_event_checker(b)}),this.is_multiple?this.search_choices.bind("click.chosen",function(b){a.choices_click(b)}):this.container.bind("click.chosen",function(a){a.preventDefault()})},Chosen.prototype.destroy=function(){return a(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},Chosen.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},Chosen.prototype.container_mousedown=function(b){return this.is_disabled||(b&&"mousedown"===b.type&&!this.results_showing&&b.preventDefault(),null!=b&&a(b.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!b||a(b.target)[0]!==this.selected_item[0]&&!a(b.target).parents("a.chosen-single").length||(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},Chosen.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},Chosen.prototype.search_results_mousewheel=function(a){var b;return a.originalEvent&&(b=-a.originalEvent.wheelDelta||a.originalEvent.detail),null!=b?(a.preventDefault(),"DOMMouseScroll"===a.type&&(b=40*b),this.search_results.scrollTop(b+this.search_results.scrollTop())):void 0},Chosen.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},Chosen.prototype.close_field=function(){return a(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},Chosen.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},Chosen.prototype.test_active_click=function(b){var c;return c=a(b.target).closest(".chosen-container"),c.length&&this.container[0]===c[0]?this.active_field=!0:this.close_field()},Chosen.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=SelectParser.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},Chosen.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(f>c)return this.search_results.scrollTop(c)}},Chosen.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},Chosen.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},Chosen.prototype.update_results_content=function(a){return this.search_results.html(a)},Chosen.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},Chosen.prototype.set_tab_index=function(){var a;return this.form_field.tabIndex?(a=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=a):void 0},Chosen.prototype.set_label_behavior=function(){var b=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=a("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(a){return b.is_multiple?b.container_mousedown(a):b.activate_field()}):void 0},Chosen.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},Chosen.prototype.search_results_mouseup=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(b),this.search_field.focus()):void 0},Chosen.prototype.search_results_mouseover=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},Chosen.prototype.search_results_mouseout=function(b){return a(b.target).hasClass("active-result")?this.result_clear_highlight():void 0},Chosen.prototype.choice_build=function(b){var c,d,e=this;return c=a("<li />",{"class":"search-choice"}).html("<span>"+b.html+"</span>"),b.disabled?c.addClass("search-choice-disabled"):(d=a("<a />",{"class":"search-choice-close","data-option-array-index":b.array_index}),d.bind("click.chosen",function(a){return e.choice_destroy_link_click(a)}),c.append(d)),this.search_container.before(c)},Chosen.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),b.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(a(b.target))},Chosen.prototype.choice_destroy=function(a){return this.result_deselect(a[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),a.parents("li").first().remove(),this.search_field_scale()):void 0},Chosen.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},Chosen.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},Chosen.prototype.result_select=function(a){var b,c;return this.result_highlight?(b=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?b.removeClass("active-result"):this.reset_single_select_options(),c=this.results_data[b[0].getAttribute("data-option-array-index")],c.selected=!0,this.form_field.options[c.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(c):this.single_set_selected_text(c.text),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[c.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},Chosen.prototype.single_set_selected_text=function(a){return null==a&&(a=this.default_text),a===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(a)},Chosen.prototype.result_deselect=function(a){var b;return b=this.results_data[a],this.form_field.options[b.options_index].disabled?!1:(b.selected=!1,this.form_field.options[b.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value}),this.search_field_scale(),!0)},Chosen.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},Chosen.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html()},Chosen.prototype.winnow_results_set_highlight=function(){var a,b;return b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),null!=a?this.result_do_highlight(a):void 0},Chosen.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},Chosen.prototype.keydown_arrow=function(){var a;return this.results_showing&&this.result_highlight?(a=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(a):void 0:this.results_show()},Chosen.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},Chosen.prototype.keydown_backstroke=function(){var a;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(a=this.search_container.siblings("li.search-choice").last(),a.length&&!a.hasClass("search-choice-disabled")?(this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},Chosen.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},Chosen.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow()}},Chosen.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){for(d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],i=0,j=g.length;j>i;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return b=a("<div />",{style:f}),b.text(this.search_field.val()),a("body").append(b),h=b.width()+25,b.remove(),c=this.container.outerWidth(),h>c-10&&(h=c-10),this.search_field.css({width:h+"px"})}},Chosen}(AbstractChosen)}.call(this);
/*
 *  Project: prettyCheckable
 *  Description: jQuery plugin to replace checkboxes and radios for custom images
 *  Author: Arthur Gouveia
 *  License: Licensed under the MIT License
 */
/* global jQuery:true, ko:true
!function(a,b,c,d){"use strict";var e="prettyCheckable",f="plugin_"+e,g={label:"",labelPosition:"right",customClass:"",color:"blue"},h=function(c){b.ko&&a(c).on("change",function(b){if(b.preventDefault(),b.originalEvent===d){var c=a(this).closest(".clearfix"),e=a(c).find("a:first"),f=e.hasClass("checked");f===!0?e.addClass("checked"):e.removeClass("checked")}}),c.find("a:first, label").on("touchstart click",function(c){c.preventDefault();var d=a(this).closest(".clearfix"),e=d.find("input"),f=d.find("a:first");f.hasClass("disabled")!==!0&&("radio"===e.prop("type")&&a('input[name="'+e.attr("name")+'"]').each(function(b,c){a(c).prop("checked",!1).parent().find("a:first").removeClass("checked")}),b.ko?ko.utils.triggerEvent(e[0],"click"):e.prop("checked")?e.prop("checked",!1).change():e.prop("checked",!0).change(),f.toggleClass("checked"))}),c.find("a:first").on("keyup",function(b){32===b.keyCode&&a(this).click()})},i=function(b){this.element=b,this.options=a.extend({},g)};i.prototype={init:function(b){a.extend(this.options,b);var c=a(this.element);c.parent().addClass("has-pretty-child"),c.css("display","none");var e=c.data("type")!==d?c.data("type"):c.attr("type"),f=null,g=c.attr("id");if(g!==d){var i=a("label[for="+g+"]");i.length>0&&(f=i.text(),i.remove())}""===this.options.label&&(this.options.label=f),f=c.data("label")!==d?c.data("label"):this.options.label;var j=c.data("labelposition")!==d?"label"+c.data("labelposition"):"label"+this.options.labelPosition,k=c.data("customclass")!==d?c.data("customclass"):this.options.customClass,l=c.data("color")!==d?c.data("color"):this.options.color,m=c.prop("disabled")===!0?"disabled":"",n=["pretty"+e,j,k,l].join(" ");c.wrap('<div class="clearfix '+n+'"></div>').parent().html();var o=[],p=c.prop("checked")?"checked":"";"labelright"===j?(o.push('<a href="#" class="'+p+" "+m+'"></a>'),o.push('<label for="'+c.attr("id")+'">'+f+"</label>")):(o.push('<label for="'+c.attr("id")+'">'+f+"</label>"),o.push('<a href="#" class="'+p+" "+m+'"></a>')),c.parent().append(o.join("\n")),h(c.parent())},check:function(){"radio"===a(this.element).prop("type")&&a('input[name="'+a(this.element).attr("name")+'"]').each(function(b,c){a(c).prop("checked",!1).attr("checked",!1).parent().find("a:first").removeClass("checked")}),a(this.element).prop("checked",!0).attr("checked",!0).parent().find("a:first").addClass("checked")},uncheck:function(){a(this.element).prop("checked",!1).attr("checked",!1).parent().find("a:first").removeClass("checked")},enable:function(){a(this.element).removeAttr("disabled").parent().find("a:first").removeClass("disabled")},disable:function(){a(this.element).attr("disabled","disabled").parent().find("a:first").addClass("disabled")},destroy:function(){var b=a(this.element),c=b.clone(),e=b.attr("id");if(e!==d){var f=a("label[for="+e+"]");f.length>0&&f.insertBefore(b.parent())}c.removeAttr("style").insertAfter(f),b.parent().remove()}},a.fn[e]=function(b){var c,d;if(this.data(f)instanceof i||this.data(f,new i(this)),d=this.data(f),d.element=this,"undefined"==typeof b||"object"==typeof b)"function"==typeof d.init&&d.init(b);else{if("string"==typeof b&&"function"==typeof d[b])return c=Array.prototype.slice.call(arguments,1),d[b].apply(d,c);a.error("Method "+b+" does not exist on jQuery."+e)}}}(jQuery,window,document);*/
/*
 *  Project: prettyCheckable
 *  Description: jQuery plugin to replace checkboxes and radios for custom images
 *  Author: Arthur Gouveia
 *  License: Licensed under the MIT License
 */
/* global jQuery:true, ko:true */
/*
 *  Project: prettyCheckable
 *  Description: jQuery plugin to replace checkboxes and radios for custom images
 *  Author: Arthur Gouveia
 *  License: Licensed under the MIT License
 */
/* global jQuery:true, ko:true */
;(function ( $, window, document, undefined ) {
    'use strict';
    var pluginName = 'prettyCheckable',
        dataPlugin = 'plugin_' + pluginName,
        defaults = {
            label: '',
            labelPosition: 'right',
            customClass: '',
            color: 'blue',
            customInnerClass: '',
            dataIcon:'',
            dataImage: ''
        };
    var addCheckableEvents = function (element) {
        if (window.ko) {
            $(element).on('change', function(e) {
                e.preventDefault();
                //only changes from knockout model
                if (e.originalEvent === undefined) {
                    var clickedParent = $(this).closest('.clearfix'),
                        fakeCheckable = $(clickedParent).find('a:first'),
                        isChecked = fakeCheckable.hasClass('checked');
                    if (isChecked === true) {
                        fakeCheckable.addClass('checked');
                        clickedParent.addClass('is-checked');
                    } else {
                        fakeCheckable.removeClass('checked');
                        clickedParent.removeClass('is-checked');
                    }
                }
            });
        }
        element.find('a:first, label').on('touchstart click', function(e){
            e.preventDefault();
            var clickedParent = $(this).closest('.clearfix'),
                input = clickedParent.find('input'),
                fakeCheckable = clickedParent.find('a:first');
            if (fakeCheckable.hasClass('disabled') === true) {
                return;
            }
            if (input.prop('type') === 'radio') {
                $('input[name="' + input.attr('name') + '"]').each(function(index, el){
                    $(el).prop('checked', false).parent().removeClass('is-checked').find('a:first').removeClass('checked');
                });
            }
            if (window.ko) {
                ko.utils.triggerEvent(input[0], 'click');
            } else {
                if (input.prop('checked')) {
                    input.prop('checked', false).change();
                } else {
                    input.prop('checked', true).change();
                }
            }
            fakeCheckable.toggleClass('checked').parent().toggleClass('is-checked');;
        });
        element.find('a:first').on('keyup', function(e){
            if (e.keyCode === 32) {
                $(this).click();
            }
        });
    };
    var Plugin = function ( element ) {
        this.element = element;
        this.options = $.extend( {}, defaults );
    };
    Plugin.prototype = {
        init: function ( options ) {
            $.extend( this.options, options );
            var el = $(this.element);
            el.parent().addClass('has-pretty-child');
            el.css('display', 'none');
            var classType = el.data('type') !== undefined ? el.data('type') : el.attr('type');
            var label = null,
                elLabelId = el.attr('id');
            if (elLabelId !== undefined) {
                var elLabel = $('label[for=' + elLabelId + ']');
                if (elLabel.length > 0) {
                    label = elLabel.text();
                    elLabel.remove();
                }
            }
            if (this.options.label === '') {
                this.options.label = label;
            }
            label = el.data('label') !== undefined ? el.data('label') : this.options.label;
            var labelPosition = el.data('labelposition') !== undefined ? 'label' + el.data('labelposition') : 'label' + this.options.labelPosition;
            var customClass = el.data('customclass') !== undefined ? el.data('customclass') : this.options.customClass;
            var color =  el.data('color') !== undefined ? el.data('color') : this.options.color;
            var customInnerClass = el.data('custominnerclass') !== undefined ? el.data('custominnerclass') : this.options.customInnerClass;
            var dataIcon = el.data('icon') !== undefined ? el.data('icon') : this.options.dataIcon;
            var dataImage = el.data('image') !== undefined ? el.data('image') : this.options.dataImage;
            //Añadir tooltips
            var dataToggle = el.data('toggle') !== undefined ? "data-toggle="+el.data('toggle') : '';

            var disabled = el.prop('disabled') === true ? 'disabled' : '';
            var isCheckedParent = el.prop('checked') ? 'is-checked' : '';
            var containerClasses = ['pretty' + classType, labelPosition, customClass, color, isCheckedParent].join(' ');
            var icon=(dataIcon!="")?'<i class="'+dataIcon+'"></i>':'';
            el.wrap('<div class="clearfix ' + containerClasses + '"  '+dataToggle+'></div>').parent().html();
            var dom = [];
            var isChecked = el.prop('checked') ? 'checked' : '';
            var element =(dataImage!="")?'<div style="background-image: url('+dataImage+')" class="img-holder"><a href="#" class="' + isChecked + ' ' + disabled + ' ' + customInnerClass + '">'+icon+'</a></div>':'<a href="#" class="' + isChecked + ' ' + disabled + ' ' + customInnerClass + '">'+icon+'</a>';
            if (labelPosition === 'labelright') {
                dom.push(element);
                dom.push('<label for="' + el.attr('id') + '">' + label + '</label>');
            } else {
                dom.push('<label for="' + el.attr('id') + '">' + label + '</label>');
                dom.push(element);
            }
            el.parent().append(dom.join('\n'));
            addCheckableEvents(el.parent());
        },
        check: function () {
            if ($(this.element).prop('type') === 'radio') {
                $('input[name="' + $(this.element).attr('name') + '"]').each(function(index, el){
                    $(el).prop('checked', false).attr('checked', false).parent().addClass('is-checked').find('a:first').removeClass('checked');
                });
            }
            $(this.element).prop('checked', true).attr('checked', true).parent().addClass('is-checked').find('a:first').addClass('checked');
        },
        uncheck: function () {
            $(this.element).prop('checked', false).attr('checked', false).parent().removeClass('is-checked').find('a:first').removeClass('checked');
        },
        enable: function () {
            $(this.element).removeAttr('disabled').parent().find('a:first').removeClass('disabled');
        },
        disable: function () {
            $(this.element).attr('disabled', 'disabled').parent().find('a:first').addClass('disabled');
        },
        destroy: function () {
            var el = $(this.element),
                clonedEl = el.clone(),
                label = null,
                elLabelId = el.attr('id');
            if (elLabelId !== undefined) {
                var elLabel = $('label[for=' + elLabelId + ']');
                if (elLabel.length > 0) {
                    elLabel.insertBefore(el.parent());
                }
            }
            clonedEl.removeAttr('style').insertAfter(elLabel);
            el.parent().remove();
        }
    };
    $.fn[ pluginName ] = function ( arg ) {
        var args, instance;
        if (!( this.data( dataPlugin ) instanceof Plugin )) {
            this.data( dataPlugin, new Plugin( this ) );
        }
        instance = this.data( dataPlugin );
        if (typeof instance != 'undefined') {
            instance.element = this;
            if (typeof arg === 'undefined' || typeof arg === 'object') {
                if ( typeof instance.init === 'function' ) {
                    instance.init( arg );
                }
            } else if ( typeof arg === 'string' && typeof instance[arg] === 'function' ) {
                args = Array.prototype.slice.call( arguments, 1 );
                return instance[arg].apply( instance, args );
            } else {
                $.error('Method ' + arg + ' does not exist on jQuery.' + pluginName);
            }
        }
    };
}(jQuery, window, document));
/*!
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*!
 * Generated using the Bootstrap Customizer (http://getbootstrap.com/customize/?id=df43c8b7772e7e1a7718)
 * Config saved to config.json and https://gist.github.com/df43c8b7772e7e1a7718
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.alert");n||o.data("bs.alert",n=new i(this)),"string"==typeof e&&n[e].call(o)})}var o='[data-dismiss="alert"]',i=function(e){t(e).on("click",o,this.close)};i.VERSION="3.2.0",i.prototype.close=function(e){function o(){s.detach().trigger("closed.bs.alert").remove()}var i=t(this),n=i.attr("data-target");n||(n=i.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,""));var s=t(n);e&&e.preventDefault(),s.length||(s=i.hasClass("alert")?i:i.parent()),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",o).emulateTransitionEnd(150):o())};var n=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",o,i.prototype.close)}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(n).remove(),t(s).each(function(){var i=o(t(this)),n={relatedTarget:this};i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown",n)),e.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",n))}))}function o(e){var o=e.attr("data-target");o||(o=e.attr("href"),o=o&&/#[A-Za-z]/.test(o)&&o.replace(/.*(?=#[^\s]*$)/,""));var i=o&&t(o);return i&&i.length?i:e.parent()}function i(e){return this.each(function(){var o=t(this),i=o.data("bs.dropdown");i||o.data("bs.dropdown",i=new r(this)),"string"==typeof e&&i[e].call(o)})}var n=".dropdown-backdrop",s='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.2.0",r.prototype.toggle=function(i){var n=t(this);if(!n.is(".disabled, :disabled")){var s=o(n),r=s.hasClass("open");if(e(),!r){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(s.trigger(i=t.Event("show.bs.dropdown",a)),i.isDefaultPrevented())return;n.trigger("focus"),s.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},r.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var n=o(i),r=n.hasClass("open");if(!r||r&&27==e.keyCode)return 27==e.which&&n.find(s).trigger("focus"),i.trigger("click");var a=" li:not(.divider):visible a",l=n.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var p=l.index(l.filter(":focus"));38==e.keyCode&&p>0&&p--,40==e.keyCode&&p<l.length-1&&p++,~p||(p=0),l.eq(p).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,r.prototype.toggle).on("keydown.bs.dropdown.data-api",s+', [role="menu"], [role="listbox"]',r.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,i){return this.each(function(){var n=t(this),s=n.data("bs.modal"),r=t.extend({},o.DEFAULTS,n.data(),"object"==typeof e&&e);s||n.data("bs.modal",s=new o(this,r)),"string"==typeof e?s[e](i):r.show&&s.show(i)})}var o=function(e,o){this.options=o,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};o.VERSION="3.2.0",o.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},o.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},o.prototype.show=function(e){var o=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var i=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),i&&o.$element[0].offsetWidth,o.$element.addClass("in").attr("aria-hidden",!1),o.enforceFocus();var n=t.Event("shown.bs.modal",{relatedTarget:e});i?o.$element.find(".modal-dialog").one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(n)}).emulateTransitionEnd(300):o.$element.trigger("focus").trigger(n)}))},o.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},o.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},o.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},o.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$element.trigger("hidden.bs.modal")})},o.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},o.prototype.backdrop=function(e){var o=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(150):s()}else e&&e()},o.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},o.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},o.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},o.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=o,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(o){var i=t(this),n=i.attr("href"),s=t(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),r=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},s.data(),i.data());i.is("a")&&o.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(s,r,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),n=i.data("bs.tooltip"),s="object"==typeof e&&e;(n||"destroy"!=e)&&(n||i.data("bs.tooltip",n=new o(this,s)),"string"==typeof e&&n[e]())})}var o=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};o.VERSION="3.2.0",o.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},o.prototype.init=function(e,o,i){this.enabled=!0,this.type=e,this.$element=t(o),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var n=this.options.trigger.split(" "),s=n.length;s--;){var r=n[s];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},o.prototype.getDefaults=function(){return o.DEFAULTS},o.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},o.prototype.getDelegateOptions=function(){var e={},o=this.getDefaults();return this._options&&t.each(this._options,function(t,i){o[t]!=i&&(e[t]=i)}),e},o.prototype.enter=function(e){var o=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return o||(o=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,o)),clearTimeout(o.timeout),o.hoverState="in",o.options.delay&&o.options.delay.show?void(o.timeout=setTimeout(function(){"in"==o.hoverState&&o.show()},o.options.delay.show)):o.show()},o.prototype.leave=function(e){var o=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return o||(o=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,o)),clearTimeout(o.timeout),o.hoverState="out",o.options.delay&&o.options.delay.hide?void(o.timeout=setTimeout(function(){"out"==o.hoverState&&o.hide()},o.options.delay.hide)):o.hide()},o.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var o=t.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!o)return;var i=this,n=this.tip(),s=this.getUID(this.type);this.setContent(),n.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&n.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,l=a.test(r);l&&(r=r.replace(a,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var p=this.getPosition(),h=n[0].offsetWidth,d=n[0].offsetHeight;if(l){var c=r,f=this.$element.parent(),u=this.getPosition(f);r="bottom"==r&&p.top+p.height+d-u.scroll>u.height?"top":"top"==r&&p.top-u.scroll-d<0?"bottom":"right"==r&&p.right+h>u.width?"left":"left"==r&&p.left-h<u.left?"right":r,n.removeClass(c).addClass(r)}var g=this.getCalculatedOffset(r,p,h,d);this.applyPlacement(g,r);var m=function(){i.$element.trigger("shown.bs."+i.type),i.hoverState=null};t.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",m).emulateTransitionEnd(150):m()}},o.prototype.applyPlacement=function(e,o){var i=this.tip(),n=i[0].offsetWidth,s=i[0].offsetHeight,r=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),e.top=e.top+r,e.left=e.left+a,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,p=i[0].offsetHeight;"top"==o&&p!=s&&(e.top=e.top+s-p);var h=this.getViewportAdjustedDelta(o,e,l,p);h.left?e.left+=h.left:e.top+=h.top;var d=h.left?2*h.left-n+l:2*h.top-s+p,c=h.left?"left":"top",f=h.left?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(d,i[0][f],c)},o.prototype.replaceArrow=function(t,e,o){this.arrow().css(o,t?50*(1-t/e)+"%":"")},o.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},o.prototype.hide=function(){function e(){"in"!=o.hoverState&&i.detach(),o.$element.trigger("hidden.bs."+o.type)}var o=this,i=this.tip(),n=t.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(n),n.isDefaultPrevented()?void 0:(i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},o.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},o.prototype.hasContent=function(){return this.getTitle()},o.prototype.getPosition=function(e){e=e||this.$element;var o=e[0],i="BODY"==o.tagName;return t.extend({},"function"==typeof o.getBoundingClientRect?o.getBoundingClientRect():null,{scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:i?t(window).width():e.outerWidth(),height:i?t(window).height():e.outerHeight()},i?{top:0,left:0}:e.offset())},o.prototype.getCalculatedOffset=function(t,e,o,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-o/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-o/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-o}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},o.prototype.getViewportAdjustedDelta=function(t,e,o,i){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-s-r.scroll,l=e.top+s-r.scroll+i;a<r.top?n.top=r.top-a:l>r.top+r.height&&(n.top=r.top+r.height-l)}else{var p=e.left-s,h=e.left+s+o;p<r.left?n.left=r.left-p:h>r.width&&(n.left=r.left+r.width-h)}return n},o.prototype.getTitle=function(){var t,e=this.$element,o=this.options;return t=e.attr("data-original-title")||("function"==typeof o.title?o.title.call(e[0]):o.title)},o.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},o.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},o.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},o.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},o.prototype.enable=function(){this.enabled=!0},o.prototype.disable=function(){this.enabled=!1},o.prototype.toggleEnabled=function(){this.enabled=!this.enabled},o.prototype.toggle=function(e){var o=this;e&&(o=t(e.currentTarget).data("bs."+this.type),o||(o=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,o))),o.tip().hasClass("in")?o.leave(o):o.enter(o)},o.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=o,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),n=i.data("bs.popover"),s="object"==typeof e&&e;(n||"destroy"!=e)&&(n||i.data("bs.popover",n=new o(this,s)),"string"==typeof e&&n[e]())})}var o=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");o.VERSION="3.2.0",o.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),o.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),o.prototype.constructor=o,o.prototype.getDefaults=function(){return o.DEFAULTS},o.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),o=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").empty()[this.options.html?"string"==typeof o?"html":"append":"text"](o),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},o.prototype.hasContent=function(){return this.getTitle()||this.getContent()},o.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},o.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},o.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=o,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),n=i.data("bs.tab");n||i.data("bs.tab",n=new o(this)),"string"==typeof e&&n[e]()})}var o=function(e){this.element=t(e)};o.VERSION="3.2.0",o.prototype.show=function(){var e=this.element,o=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var n=o.find(".active:last a")[0],s=t.Event("show.bs.tab",{relatedTarget:n});if(e.trigger(s),!s.isDefaultPrevented()){var r=t(i);this.activate(e.closest("li"),o),this.activate(r,r.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:n})})}}},o.prototype.activate=function(e,o,i){function n(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var s=o.find("> .active"),r=i&&t.support.transition&&s.hasClass("fade");r?s.one("bsTransitionEnd",n).emulateTransitionEnd(150):n(),s.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=o,t.fn.tab.noConflict=function(){return t.fn.tab=i,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(o){o.preventDefault(),e.call(t(this),"show")})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),n=i.data("bs.collapse"),s=t.extend({},o.DEFAULTS,i.data(),"object"==typeof e&&e);!n&&s.toggle&&"show"==e&&(e=!e),n||i.data("bs.collapse",n=new o(this,s)),"string"==typeof e&&n[e]()})}var o=function(e,i){this.$element=t(e),this.options=t.extend({},o.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};o.VERSION="3.2.0",o.DEFAULTS={toggle:!0},o.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){var i=this.$parent&&this.$parent.find("> .panel > .in");if(i&&i.length){var n=i.data("bs.collapse");if(n&&n.transitioning)return;e.call(i,"hide"),n||i.data("bs.collapse",null)}var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var a=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(350)[s](this.$element[0][a])}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var o=this.dimension();this.$element[o](this.$element[o]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[o](0).one("bsTransitionEnd",t.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var i=t.fn.collapse;t.fn.collapse=e,t.fn.collapse.Constructor=o,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(o){var i,n=t(this),s=n.attr("data-target")||o.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),r=t(s),a=r.data("bs.collapse"),l=a?"toggle":n.data(),p=n.attr("data-parent"),h=p&&t(p);a&&a.transitioning||(h&&h.find('[data-toggle="collapse"][data-parent="'+p+'"]').not(n).addClass("collapsed"),n[r.hasClass("in")?"addClass":"removeClass"]("collapsed")),e.call(r,l)})}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var o in e)if(void 0!==t.style[o])return{end:e[o]};return!1}t.fn.emulateTransitionEnd=function(e){var o=!1,i=this;t(this).one("bsTransitionEnd",function(){o=!0});var n=function(){o||t(i).trigger(t.support.transition.end)};return setTimeout(n,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery);
/*!
 * hoverIntent r7 // 2013.03.11 // jQuery 1.9.1+
 * http://cherne.net/brian/resources/jquery.hoverIntent.html
 *
 * You may use hoverIntent under the terms of the MIT license.
 * Copyright 2007, 2013 Brian Cherne
 */
(function(e){e.fn.hoverIntent=function(t,n,r){var i={interval:100,sensitivity:7,timeout:0};if(typeof t==="object"){i=e.extend(i,t)}else if(e.isFunction(n)){i=e.extend(i,{over:t,out:n,selector:r})}else{i=e.extend(i,{over:t,out:t,selector:n})}var s,o,u,a;var f=function(e){s=e.pageX;o=e.pageY};var l=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(u-s)+Math.abs(a-o)<i.sensitivity){e(n).off("mousemove.hoverIntent",f);n.hoverIntent_s=1;return i.over.apply(n,[t])}else{u=s;a=o;n.hoverIntent_t=setTimeout(function(){l(t,n)},i.interval)}};var c=function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t);t.hoverIntent_s=0;return i.out.apply(t,[e])};var h=function(t){var n=jQuery.extend({},t);var r=this;if(r.hoverIntent_t){r.hoverIntent_t=clearTimeout(r.hoverIntent_t)}if(t.type=="mouseenter"){u=n.pageX;a=n.pageY;e(r).on("mousemove.hoverIntent",f);if(r.hoverIntent_s!=1){r.hoverIntent_t=setTimeout(function(){l(n,r)},i.interval)}}else{e(r).off("mousemove.hoverIntent",f);if(r.hoverIntent_s==1){r.hoverIntent_t=setTimeout(function(){c(n,r)},i.timeout)}}};return this.on({"mouseenter.hoverIntent":h,"mouseleave.hoverIntent":h},i.selector)}})(jQuery)
"function"!==typeof Object.create&&(Object.create=function(f){function g(){}g.prototype=f;return new g});
(function(f,g,k){var l={init:function(a,b){this.$elem=f(b);this.options=f.extend({},f.fn.owlCarousel.options,this.$elem.data(),a);this.userOptions=a;this.loadContent()},loadContent:function(){function a(a){var d,e="";if("function"===typeof b.options.jsonSuccess)b.options.jsonSuccess.apply(this,[a]);else{for(d in a.owl)a.owl.hasOwnProperty(d)&&(e+=a.owl[d].item);b.$elem.html(e)}b.logIn()}var b=this,e;"function"===typeof b.options.beforeInit&&b.options.beforeInit.apply(this,[b.$elem]);"string"===typeof b.options.jsonPath?
(e=b.options.jsonPath,f.getJSON(e,a)):b.logIn()},logIn:function(){this.$elem.data("owl-originalStyles",this.$elem.attr("style"));this.$elem.data("owl-originalClasses",this.$elem.attr("class"));this.$elem.css({opacity:0});this.orignalItems=this.options.items;this.checkBrowser();this.wrapperWidth=0;this.checkVisible=null;this.setVars()},setVars:function(){if(0===this.$elem.children().length)return!1;this.baseClass();this.eventTypes();this.$userItems=this.$elem.children();this.itemsAmount=this.$userItems.length;
this.wrapItems();this.$owlItems=this.$elem.find(".owl-item");this.$owlWrapper=this.$elem.find(".owl-wrapper");this.playDirection="next";this.prevItem=0;this.prevArr=[0];this.currentItem=0;this.customEvents();this.onStartup()},onStartup:function(){this.updateItems();this.calculateAll();this.buildControls();this.updateControls();this.response();this.moveEvents();this.stopOnHover();this.owlStatus();!1!==this.options.transitionStyle&&this.transitionTypes(this.options.transitionStyle);!0===this.options.autoPlay&&
(this.options.autoPlay=5E3);this.play();this.$elem.find(".owl-wrapper").css("display","block");this.$elem.is(":visible")?this.$elem.css("opacity",1):this.watchVisibility();this.onstartup=!1;this.eachMoveUpdate();"function"===typeof this.options.afterInit&&this.options.afterInit.apply(this,[this.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad();!0===this.options.autoHeight&&this.autoHeight();this.onVisibleItems();"function"===typeof this.options.afterAction&&this.options.afterAction.apply(this,
[this.$elem])},updateVars:function(){"function"===typeof this.options.beforeUpdate&&this.options.beforeUpdate.apply(this,[this.$elem]);this.watchVisibility();this.updateItems();this.calculateAll();this.updatePosition();this.updateControls();this.eachMoveUpdate();"function"===typeof this.options.afterUpdate&&this.options.afterUpdate.apply(this,[this.$elem])},reload:function(){var a=this;g.setTimeout(function(){a.updateVars()},0)},watchVisibility:function(){var a=this;if(!1===a.$elem.is(":visible"))a.$elem.css({opacity:0}),
g.clearInterval(a.autoPlayInterval),g.clearInterval(a.checkVisible);else return!1;a.checkVisible=g.setInterval(function(){a.$elem.is(":visible")&&(a.reload(),a.$elem.animate({opacity:1},200),g.clearInterval(a.checkVisible))},500)},wrapItems:function(){this.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>');this.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">');this.wrapperOuter=this.$elem.find(".owl-wrapper-outer");this.$elem.css("display","block")},
baseClass:function(){var a=this.$elem.hasClass(this.options.baseClass),b=this.$elem.hasClass(this.options.theme);a||this.$elem.addClass(this.options.baseClass);b||this.$elem.addClass(this.options.theme)},updateItems:function(){var a,b;if(!1===this.options.responsive)return!1;if(!0===this.options.singleItem)return this.options.items=this.orignalItems=1,this.options.itemsCustom=!1,this.options.itemsDesktop=!1,this.options.itemsDesktopSmall=!1,this.options.itemsTablet=!1,this.options.itemsTabletSmall=
!1,this.options.itemsMobile=!1;a=f(this.options.responsiveBaseWidth).width();a>(this.options.itemsDesktop[0]||this.orignalItems)&&(this.options.items=this.orignalItems);if(!1!==this.options.itemsCustom)for(this.options.itemsCustom.sort(function(a,b){return a[0]-b[0]}),b=0;b<this.options.itemsCustom.length;b+=1)this.options.itemsCustom[b][0]<=a&&(this.options.items=this.options.itemsCustom[b][1]);else a<=this.options.itemsDesktop[0]&&!1!==this.options.itemsDesktop&&(this.options.items=this.options.itemsDesktop[1]),
a<=this.options.itemsDesktopSmall[0]&&!1!==this.options.itemsDesktopSmall&&(this.options.items=this.options.itemsDesktopSmall[1]),a<=this.options.itemsTablet[0]&&!1!==this.options.itemsTablet&&(this.options.items=this.options.itemsTablet[1]),a<=this.options.itemsTabletSmall[0]&&!1!==this.options.itemsTabletSmall&&(this.options.items=this.options.itemsTabletSmall[1]),a<=this.options.itemsMobile[0]&&!1!==this.options.itemsMobile&&(this.options.items=this.options.itemsMobile[1]);this.options.items>this.itemsAmount&&
!0===this.options.itemsScaleUp&&(this.options.items=this.itemsAmount)},response:function(){var a=this,b,e;if(!0!==a.options.responsive)return!1;e=f(g).width();a.resizer=function(){f(g).width()!==e&&(!1!==a.options.autoPlay&&g.clearInterval(a.autoPlayInterval),g.clearTimeout(b),b=g.setTimeout(function(){e=f(g).width();a.updateVars()},a.options.responsiveRefreshRate))};f(g).resize(a.resizer)},updatePosition:function(){this.jumpTo(this.currentItem);!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var a=
this,b=0,e=a.itemsAmount-a.options.items;a.$owlItems.each(function(c){var d=f(this);d.css({width:a.itemWidth}).data("owl-item",Number(c));if(0===c%a.options.items||c===e)c>e||(b+=1);d.data("owl-roundPages",b)})},appendWrapperSizes:function(){this.$owlWrapper.css({width:this.$owlItems.length*this.itemWidth*2,left:0});this.appendItemsSizes()},calculateAll:function(){this.calculateWidth();this.appendWrapperSizes();this.loops();this.max()},calculateWidth:function(){this.itemWidth=Math.round(this.$elem.width()/
this.options.items)},max:function(){var a=-1*(this.itemsAmount*this.itemWidth-this.options.items*this.itemWidth);this.options.items>this.itemsAmount?this.maximumPixels=a=this.maximumItem=0:(this.maximumItem=this.itemsAmount-this.options.items,this.maximumPixels=a);return a},min:function(){return 0},loops:function(){var a=0,b=0,e,c;this.positionsInArray=[0];this.pagesInArray=[];for(e=0;e<this.itemsAmount;e+=1)b+=this.itemWidth,this.positionsInArray.push(-b),!0===this.options.scrollPerPage&&(c=f(this.$owlItems[e]),
c=c.data("owl-roundPages"),c!==a&&(this.pagesInArray[a]=this.positionsInArray[e],a=c))},buildControls:function(){if(!0===this.options.navigation||!0===this.options.pagination)this.owlControls=f('<div class="owl-controls"/>').toggleClass("clickable",!this.browser.isTouch).appendTo(this.$elem);!0===this.options.pagination&&this.buildPagination();!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var a=this,b=f('<div class="owl-buttons"/>');a.owlControls.append(b);a.buttonPrev=
f("<div/>",{"class":"owl-prev",html:a.options.navigationText[0]||""});a.buttonNext=f("<div/>",{"class":"owl-next",html:a.options.navigationText[1]||""});b.append(a.buttonPrev).append(a.buttonNext);b.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(a){a.preventDefault()});b.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(b){b.preventDefault();f(this).hasClass("owl-next")?a.next():a.prev()})},buildPagination:function(){var a=this;a.paginationWrapper=
f('<div class="owl-pagination"/>');a.owlControls.append(a.paginationWrapper);a.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(b){b.preventDefault();Number(f(this).data("owl-page"))!==a.currentItem&&a.goTo(Number(f(this).data("owl-page")),!0)})},updatePagination:function(){var a,b,e,c,d,g;if(!1===this.options.pagination)return!1;this.paginationWrapper.html("");a=0;b=this.itemsAmount-this.itemsAmount%this.options.items;for(c=0;c<this.itemsAmount;c+=1)0===c%this.options.items&&
(a+=1,b===c&&(e=this.itemsAmount-this.options.items),d=f("<div/>",{"class":"owl-page"}),g=f("<span></span>",{text:!0===this.options.paginationNumbers?a:"","class":!0===this.options.paginationNumbers?"owl-numbers":""}),d.append(g),d.data("owl-page",b===c?e:c),d.data("owl-roundPages",a),this.paginationWrapper.append(d));this.checkPagination()},checkPagination:function(){var a=this;if(!1===a.options.pagination)return!1;a.paginationWrapper.find(".owl-page").each(function(){f(this).data("owl-roundPages")===
f(a.$owlItems[a.currentItem]).data("owl-roundPages")&&(a.paginationWrapper.find(".owl-page").removeClass("active"),f(this).addClass("active"))})},checkNavigation:function(){if(!1===this.options.navigation)return!1;!1===this.options.rewindNav&&(0===this.currentItem&&0===this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.addClass("disabled")):0===this.currentItem&&0!==this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.removeClass("disabled")):this.currentItem===
this.maximumItem?(this.buttonPrev.removeClass("disabled"),this.buttonNext.addClass("disabled")):0!==this.currentItem&&this.currentItem!==this.maximumItem&&(this.buttonPrev.removeClass("disabled"),this.buttonNext.removeClass("disabled")))},updateControls:function(){this.updatePagination();this.checkNavigation();this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(a){if(this.isTransition)return!1;
this.currentItem+=!0===this.options.scrollPerPage?this.options.items:1;if(this.currentItem>this.maximumItem+(!0===this.options.scrollPerPage?this.options.items-1:0))if(!0===this.options.rewindNav)this.currentItem=0,a="rewind";else return this.currentItem=this.maximumItem,!1;this.goTo(this.currentItem,a)},prev:function(a){if(this.isTransition)return!1;this.currentItem=!0===this.options.scrollPerPage&&0<this.currentItem&&this.currentItem<this.options.items?0:this.currentItem-(!0===this.options.scrollPerPage?
this.options.items:1);if(0>this.currentItem)if(!0===this.options.rewindNav)this.currentItem=this.maximumItem,a="rewind";else return this.currentItem=0,!1;this.goTo(this.currentItem,a)},goTo:function(a,b,e){var c=this;if(c.isTransition)return!1;"function"===typeof c.options.beforeMove&&c.options.beforeMove.apply(this,[c.$elem]);a>=c.maximumItem?a=c.maximumItem:0>=a&&(a=0);c.currentItem=c.owl.currentItem=a;if(!1!==c.options.transitionStyle&&"drag"!==e&&1===c.options.items&&!0===c.browser.support3d)return c.swapSpeed(0),
!0===c.browser.support3d?c.transition3d(c.positionsInArray[a]):c.css2slide(c.positionsInArray[a],1),c.afterGo(),c.singleItemTransition(),!1;a=c.positionsInArray[a];!0===c.browser.support3d?(c.isCss3Finish=!1,!0===b?(c.swapSpeed("paginationSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},c.options.paginationSpeed)):"rewind"===b?(c.swapSpeed(c.options.rewindSpeed),g.setTimeout(function(){c.isCss3Finish=!0},c.options.rewindSpeed)):(c.swapSpeed("slideSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},
c.options.slideSpeed)),c.transition3d(a)):!0===b?c.css2slide(a,c.options.paginationSpeed):"rewind"===b?c.css2slide(a,c.options.rewindSpeed):c.css2slide(a,c.options.slideSpeed);c.afterGo()},jumpTo:function(a){"function"===typeof this.options.beforeMove&&this.options.beforeMove.apply(this,[this.$elem]);a>=this.maximumItem||-1===a?a=this.maximumItem:0>=a&&(a=0);this.swapSpeed(0);!0===this.browser.support3d?this.transition3d(this.positionsInArray[a]):this.css2slide(this.positionsInArray[a],1);this.currentItem=
this.owl.currentItem=a;this.afterGo()},afterGo:function(){this.prevArr.push(this.currentItem);this.prevItem=this.owl.prevItem=this.prevArr[this.prevArr.length-2];this.prevArr.shift(0);this.prevItem!==this.currentItem&&(this.checkPagination(),this.checkNavigation(),this.eachMoveUpdate(),!1!==this.options.autoPlay&&this.checkAp());"function"===typeof this.options.afterMove&&this.prevItem!==this.currentItem&&this.options.afterMove.apply(this,[this.$elem])},stop:function(){this.apStatus="stop";g.clearInterval(this.autoPlayInterval)},
checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var a=this;a.apStatus="play";if(!1===a.options.autoPlay)return!1;g.clearInterval(a.autoPlayInterval);a.autoPlayInterval=g.setInterval(function(){a.next(!0)},a.options.autoPlay)},swapSpeed:function(a){"slideSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):"paginationSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):"string"!==typeof a&&this.$owlWrapper.css(this.addCssSpeed(a))},
addCssSpeed:function(a){return{"-webkit-transition":"all "+a+"ms ease","-moz-transition":"all "+a+"ms ease","-o-transition":"all "+a+"ms ease",transition:"all "+a+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(a){return{"-webkit-transform":"translate3d("+a+"px, 0px, 0px)","-moz-transform":"translate3d("+a+"px, 0px, 0px)","-o-transform":"translate3d("+a+"px, 0px, 0px)","-ms-transform":"translate3d("+
a+"px, 0px, 0px)",transform:"translate3d("+a+"px, 0px,0px)"}},transition3d:function(a){this.$owlWrapper.css(this.doTranslate(a))},css2move:function(a){this.$owlWrapper.css({left:a})},css2slide:function(a,b){var e=this;e.isCssFinish=!1;e.$owlWrapper.stop(!0,!0).animate({left:a},{duration:b||e.options.slideSpeed,complete:function(){e.isCssFinish=!0}})},checkBrowser:function(){var a=k.createElement("div");a.style.cssText="  -moz-transform:translate3d(0px, 0px, 0px); -ms-transform:translate3d(0px, 0px, 0px); -o-transform:translate3d(0px, 0px, 0px); -webkit-transform:translate3d(0px, 0px, 0px); transform:translate3d(0px, 0px, 0px)";
a=a.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g);this.browser={support3d:null!==a&&1===a.length,isTouch:"ontouchstart"in g||g.navigator.msMaxTouchPoints}},moveEvents:function(){if(!1!==this.options.mouseDrag||!1!==this.options.touchDrag)this.gestures(),this.disabledEvents()},eventTypes:function(){var a=["s","e","x"];this.ev_types={};!0===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:
!1===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===this.options.mouseDrag&&!1===this.options.touchDrag&&(a=["mousedown.owl","mousemove.owl","mouseup.owl"]);this.ev_types.start=a[0];this.ev_types.move=a[1];this.ev_types.end=a[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(a){a.preventDefault()});this.$elem.on("mousedown.disableTextSelect",function(a){return f(a.target).is("input, textarea, select, option")})},
gestures:function(){function a(a){if(void 0!==a.touches)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(void 0===a.touches){if(void 0!==a.pageX)return{x:a.pageX,y:a.pageY};if(void 0===a.pageX)return{x:a.clientX,y:a.clientY}}}function b(a){"on"===a?(f(k).on(d.ev_types.move,e),f(k).on(d.ev_types.end,c)):"off"===a&&(f(k).off(d.ev_types.move),f(k).off(d.ev_types.end))}function e(b){b=b.originalEvent||b||g.event;d.newPosX=a(b).x-h.offsetX;d.newPosY=a(b).y-h.offsetY;d.newRelativeX=d.newPosX-h.relativePos;
"function"===typeof d.options.startDragging&&!0!==h.dragging&&0!==d.newRelativeX&&(h.dragging=!0,d.options.startDragging.apply(d,[d.$elem]));(8<d.newRelativeX||-8>d.newRelativeX)&&!0===d.browser.isTouch&&(void 0!==b.preventDefault?b.preventDefault():b.returnValue=!1,h.sliding=!0);(10<d.newPosY||-10>d.newPosY)&&!1===h.sliding&&f(k).off("touchmove.owl");d.newPosX=Math.max(Math.min(d.newPosX,d.newRelativeX/5),d.maximumPixels+d.newRelativeX/5);!0===d.browser.support3d?d.transition3d(d.newPosX):d.css2move(d.newPosX)}
function c(a){a=a.originalEvent||a||g.event;var c;a.target=a.target||a.srcElement;h.dragging=!1;!0!==d.browser.isTouch&&d.$owlWrapper.removeClass("grabbing");d.dragDirection=0>d.newRelativeX?d.owl.dragDirection="left":d.owl.dragDirection="right";0!==d.newRelativeX&&(c=d.getNewPosition(),d.goTo(c,!1,"drag"),h.targetElement===a.target&&!0!==d.browser.isTouch&&(f(a.target).on("click.disable",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();f(a.target).off("click.disable")}),
a=f._data(a.target,"events").click,c=a.pop(),a.splice(0,0,c)));b("off")}var d=this,h={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};d.isCssFinish=!0;d.$elem.on(d.ev_types.start,".owl-wrapper",function(c){c=c.originalEvent||c||g.event;var e;if(3===c.which)return!1;if(!(d.itemsAmount<=d.options.items)){if(!1===d.isCssFinish&&!d.options.dragBeforeAnimFinish||!1===d.isCss3Finish&&!d.options.dragBeforeAnimFinish)return!1;
!1!==d.options.autoPlay&&g.clearInterval(d.autoPlayInterval);!0===d.browser.isTouch||d.$owlWrapper.hasClass("grabbing")||d.$owlWrapper.addClass("grabbing");d.newPosX=0;d.newRelativeX=0;f(this).css(d.removeTransition());e=f(this).position();h.relativePos=e.left;h.offsetX=a(c).x-e.left;h.offsetY=a(c).y-e.top;b("on");h.sliding=!1;h.targetElement=c.target||c.srcElement}})},getNewPosition:function(){var a=this.closestItem();a>this.maximumItem?a=this.currentItem=this.maximumItem:0<=this.newPosX&&(this.currentItem=
a=0);return a},closestItem:function(){var a=this,b=!0===a.options.scrollPerPage?a.pagesInArray:a.positionsInArray,e=a.newPosX,c=null;f.each(b,function(d,g){e-a.itemWidth/20>b[d+1]&&e-a.itemWidth/20<g&&"left"===a.moveDirection()?(c=g,a.currentItem=!0===a.options.scrollPerPage?f.inArray(c,a.positionsInArray):d):e+a.itemWidth/20<g&&e+a.itemWidth/20>(b[d+1]||b[d]-a.itemWidth)&&"right"===a.moveDirection()&&(!0===a.options.scrollPerPage?(c=b[d+1]||b[b.length-1],a.currentItem=f.inArray(c,a.positionsInArray)):
(c=b[d+1],a.currentItem=d+1))});return a.currentItem},moveDirection:function(){var a;0>this.newRelativeX?(a="right",this.playDirection="next"):(a="left",this.playDirection="prev");return a},customEvents:function(){var a=this;a.$elem.on("owl.next",function(){a.next()});a.$elem.on("owl.prev",function(){a.prev()});a.$elem.on("owl.play",function(b,e){a.options.autoPlay=e;a.play();a.hoverStatus="play"});a.$elem.on("owl.stop",function(){a.stop();a.hoverStatus="stop"});a.$elem.on("owl.goTo",function(b,e){a.goTo(e)});
a.$elem.on("owl.jumpTo",function(b,e){a.jumpTo(e)})},stopOnHover:function(){var a=this;!0===a.options.stopOnHover&&!0!==a.browser.isTouch&&!1!==a.options.autoPlay&&(a.$elem.on("mouseover",function(){a.stop()}),a.$elem.on("mouseout",function(){"stop"!==a.hoverStatus&&a.play()}))},lazyLoad:function(){var a,b,e,c,d;if(!1===this.options.lazyLoad)return!1;for(a=0;a<this.itemsAmount;a+=1)b=f(this.$owlItems[a]),"loaded"!==b.data("owl-loaded")&&(e=b.data("owl-item"),c=b.find(".lazyOwl"),"string"!==typeof c.data("src")?
b.data("owl-loaded","loaded"):(void 0===b.data("owl-loaded")&&(c.hide(),b.addClass("loading").data("owl-loaded","checked")),(d=!0===this.options.lazyFollow?e>=this.currentItem:!0)&&e<this.currentItem+this.options.items&&c.length&&this.lazyPreload(b,c)))},lazyPreload:function(a,b){function e(){a.data("owl-loaded","loaded").removeClass("loading");b.removeAttr("data-src");"fade"===d.options.lazyEffect?b.fadeIn(400):b.show();"function"===typeof d.options.afterLazyLoad&&d.options.afterLazyLoad.apply(this,
[d.$elem])}function c(){f+=1;d.completeImg(b.get(0))||!0===k?e():100>=f?g.setTimeout(c,100):e()}var d=this,f=0,k;"DIV"===b.prop("tagName")?(b.css("background-image","url("+b.data("src")+")"),k=!0):b[0].src=b.data("src");c()},autoHeight:function(){function a(){var a=f(e.$owlItems[e.currentItem]).height();e.wrapperOuter.css("height",a+"px");e.wrapperOuter.hasClass("autoHeight")||g.setTimeout(function(){e.wrapperOuter.addClass("autoHeight")},0)}function b(){d+=1;e.completeImg(c.get(0))?a():100>=d?g.setTimeout(b,
100):e.wrapperOuter.css("height","")}var e=this,c=f(e.$owlItems[e.currentItem]).find("img"),d;void 0!==c.get(0)?(d=0,b()):a()},completeImg:function(a){return!a.complete||"undefined"!==typeof a.naturalWidth&&0===a.naturalWidth?!1:!0},onVisibleItems:function(){var a;!0===this.options.addClassActive&&this.$owlItems.removeClass("active");this.visibleItems=[];for(a=this.currentItem;a<this.currentItem+this.options.items;a+=1)this.visibleItems.push(a),!0===this.options.addClassActive&&f(this.$owlItems[a]).addClass("active");
this.owl.visibleItems=this.visibleItems},transitionTypes:function(a){this.outClass="owl-"+a+"-out";this.inClass="owl-"+a+"-in"},singleItemTransition:function(){var a=this,b=a.outClass,e=a.inClass,c=a.$owlItems.eq(a.currentItem),d=a.$owlItems.eq(a.prevItem),f=Math.abs(a.positionsInArray[a.currentItem])+a.positionsInArray[a.prevItem],g=Math.abs(a.positionsInArray[a.currentItem])+a.itemWidth/2;a.isTransition=!0;a.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":g+"px","-moz-perspective-origin":g+
"px","perspective-origin":g+"px"});d.css({position:"relative",left:f+"px"}).addClass(b).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endPrev=!0;d.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend");a.clearTransStyle(d,b)});c.addClass(e).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endCurrent=!0;c.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend");a.clearTransStyle(c,e)})},clearTransStyle:function(a,
b){a.css({position:"",left:""}).removeClass(b);this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass("owl-origin"),this.isTransition=this.endCurrent=this.endPrev=!1)},owlStatus:function(){this.owl={userOptions:this.userOptions,baseElement:this.$elem,userItems:this.$userItems,owlItems:this.$owlItems,currentItem:this.currentItem,prevItem:this.prevItem,visibleItems:this.visibleItems,isTouch:this.browser.isTouch,browser:this.browser,dragDirection:this.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect");
f(k).off(".owl owl");f(g).off("resize",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove());this.clearEvents();this.$elem.attr("style",this.$elem.data("owl-originalStyles")||"").attr("class",this.$elem.data("owl-originalClasses"))},destroy:function(){this.stop();g.clearInterval(this.checkVisible);this.unWrap();this.$elem.removeData()},reinit:function(a){a=f.extend({},this.userOptions,
a);this.unWrap();this.init(a,this.$elem)},addItem:function(a,b){var e;if(!a)return!1;if(0===this.$elem.children().length)return this.$elem.append(a),this.setVars(),!1;this.unWrap();e=void 0===b||-1===b?-1:b;e>=this.$userItems.length||-1===e?this.$userItems.eq(-1).after(a):this.$userItems.eq(e).before(a);this.setVars()},removeItem:function(a){if(0===this.$elem.children().length)return!1;a=void 0===a||-1===a?-1:a;this.unWrap();this.$userItems.eq(a).remove();this.setVars()}};f.fn.owlCarousel=function(a){return this.each(function(){if(!0===
f(this).data("owl-init"))return!1;f(this).data("owl-init",!0);var b=Object.create(l);b.init(a,this);f.data(this,"owlCarousel",b)})};f.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1E3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,
responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:g,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}})(jQuery,window,document);
// Plugin that provides a "pathchange" event on the window object, notifying an application when the URL changes
// This is accomplished by watching the hash, using the hashchange event from HTML5 or a polling interval in older browsers.
// In addition, in some modern browsers, HTML5 History Management is used to support changing the URL's path without reloading the page.
// This plugin also provides a method to navigate to a URL safely, that will use HTML5 History Management to avoid a page load.
// Everything degrades gracefully, and supports RESTful client development.

// Browser Support:
//  Chrome  - Any recent version of Chrome supports everything.
//  Safari  - Any recent version of Safari supports everything.
//  Firefox - Newer versions of Firefox support the hashchange event
//            Firefox 4 betas also support HTML5 History Management
//  Internet Explorer - IE8 supports hashchange
//                      IE6 and 7 receive inferior hashchange support through a polling interval.
//  Others  - Other modern browsers probably support some subset of features.

// This plugin was authored by Ben Cherry (bcherry@gmail.com), and is released under an MIT License (do what you want with it).
// Some of the code in this plugin was adapted from Modernizr, which is also available under an MIT License.
(function($) {
  // can use $(window).bind("pathchange", fn) or $(window).pathchange(fn)
  $.fn.pathchange = function(handler) {
    return handler ? this.bind("pathchange", handler) : this.trigger("pathchange");
  };

  var my = $.pathchange = {
    // default options
    options: {
      useHistory: true, // whether we use HTML5 History Management to change the current path
      useHashchange: true, // whether we use HTML5 Hashchange to listen to the URL hash
      pollingInterval: 250, // when using Hashchange in browsers without it, how often to poll the hash (in ms)
      interceptLinks: true, // do we intercept all relative links to avoid some page reloads?
      disableHashLinks: true // do we ensure all links with href=# are not followed (this would mess with our history)?
    },

    // call this once when your app is ready to use pathchange
    init: function(options) {
      var lastHash;
      $.extend(my.options, options);

      // Listen to the HTML5 "popstate" event, if supported and desired
      if (my.options.useHistory && my.detectHistorySupport()) {
        $(window).bind("popstate", function(e) {
          $(window).trigger("pathchange");
        });
      }

      // Listen to the HTML5 "hashchange" event, if supported and desired
      if (my.options.useHashchange) {
        $(window).bind("hashchange", function(e) {
          $(window).trigger("pathchange");
        });

        // Hashchange support for older browsers (IE6/7)
        if (!my.detectHashchangeSupport()) {
          lastHash = window.location.hash;
          setInterval(function() {
            if (lastHash !== window.location.hash) {
              $(window).trigger("hashchange");
              lastHash = window.location.hash;
            }
          }, my.options.pollingInterval);
        }
      }

      // Intercept all relative links on the page, to avoid unneccesary page refreshes
      if (my.options.interceptLinks) {
        $("body").delegate("a[href^='/']", "click", function(e) {
          my.changeTo($(this).attr("href"));
          e.preventDefault();
        });
      }

      // Ensure all the href=# links on the page don't mess with things
      if (my.options.disableHashLinks) {
        $("body").delegate("a[href='#']", "click", function(e) {
          e.preventDefault();
        });
      }
    },

    // Call to manually navigate the app somewhere
    changeTo: function(path) {
      // If we're using History Management, just push an entry
      if (my.options.useHistory && my.detectHistorySupport()) {
        window.history.pushState(null, null, path);
        $(window).trigger("pathchange");
      } else {
        // Make sure there's a hash (going from foo.com#bar to foo.com would trigger a reload in Firefox, sadly)
        if (path.indexOf("#") < 0) {
          path += "#";
        }
        // Otherwise, navigate to the new URL.  Might reload the browser.  Might trigger a hashchange.
        window.location.href = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ":" + window.location.port : "") + path;
      }
    },

    // Simple feature detection for History Management (borrowed from Modernizr)
    detectHistorySupport: function() {
      return !!(window.history && history.pushState);
    },

    // Simple feature detection for hashchange (adapted from Modernizr)
    detectHashchangeSupport: function() {
      var isSupported = "onhashchange" in window;
      if (!isSupported && window.setAttribute) {
        window.setAttribute("onhashchange", "return;");
        isSupported = typeof window.onhashchange === "function";
      }
      return isSupported;
    }
  };
}(jQuery));
/*
 *  Project: jquery.responsiveTabs.js
 *  Description: A plugin that creates responsive tabs, optimized for all devices
 *  Author: Jelle Kralt (jelle@jellekralt.nl)
 *  Version: 1.4.0
 *  License: MIT
 */

;(function ( $, window, undefined ) {

    /** Default settings */
    var defaults = {
        active: null,
        disabled: [],
        collapsible: 'accordion',
        startCollapsed: false,
        rotate: false,
        setHash: false,
        animation: 'default',
        duration: 500,
        activate: function(){},
        deactivate: function(){},
        load: function(){},
        activateState: function(){},
        classes: {
            stateDefault: 'r-tabs-state-default',
            stateActive: 'r-tabs-state-active',
            stateDisabled: 'r-tabs-state-disabled',
            stateExcluded: 'r-tabs-state-excluded',
            tab: 'r-tabs-tab',
            anchor: 'r-tabs-anchor',
            panel: 'r-tabs-panel',
            accordionTitle: 'r-tabs-accordion-title'
        }
    };

    /**
     * Responsive Tabs
     * @constructor
     * @param {object} element - The HTML element the validator should be bound to
     * @param {object} options - An option map
     */
    function ResponsiveTabs(element, options) {
        this.element = element; // Selected DOM element
        this.$element = $(element); // Selected jQuery element

        this.tabs = []; // Create tabs array
        this.state = ''; // Define the plugin state (tabs/accordion)
        this.rotateInterval = 0; // Define rotate interval
        this.$queue = $({});

        // Extend the defaults with the passed options
        this.options = $.extend( {}, defaults, options);

        this.init();
    }


    /**
     * This function initializes the tab plugin
     */
    ResponsiveTabs.prototype.init = function () {
        var _this = this;

        // Load all the elements
        this.tabs = this._loadElements();
        this._loadClasses();
        this._loadEvents();

        // Window resize bind to check state
        $(window).on('resize', function(e) {
            _this._setState(e);
        });

        // Hashchange event
        $(window).on('hashchange', function(e) {
            var tabRef = _this._getTabRefBySelector(window.location.hash);
            var oTab = _this._getTab(tabRef);

            // Check if a tab is found that matches the hash
            if(tabRef >= 0 && !oTab._ignoreHashChange && !oTab.disabled) {
                // If so, open the tab and auto close the current one
                _this._openTab(e, _this._getTab(tabRef), true);
            }
        });

        // Start rotate event if rotate option is defined
        if(this.options.rotate !== false) {
            this.startRotation();
        }

        // --------------------
        // Define plugin events
        //

        // Activate: this event is called when a tab is selected
        this.$element.bind('tabs-activate', function(e, oTab) {
            _this.options.activate.call(this, e, oTab);
        });
        // Deactivate: this event is called when a tab is closed
        this.$element.bind('tabs-deactivate', function(e, oTab) {
            _this.options.deactivate.call(this, e, oTab);
        });
        // Activate State: this event is called when the plugin switches states
        this.$element.bind('tabs-activate-state', function(e, state) {
            _this.options.activateState.call(this, e, state);
        });

        // Load: this event is called when the plugin has been loaded
        this.$element.bind('tabs-load', function(e) {
            var tabRef = _this._getTabRefBySelector(window.location.hash);
            var firstTab;

            _this._setState(e); // Set state

            // Check if the panel should be collaped on load
            if(_this.options.startCollapsed !== true && !(_this.options.startCollapsed === 'accordion' && _this.state === 'accordion')) {

                // Check if the page has a hash set that is linked to a tab
                if(tabRef >= 0 && !_this._getTab(tabRef).disabled) {
                    // If so, set the current tab to the linked tab
                    firstTab = _this._getTab(tabRef);
                } else if(_this.options.active > 0 && !_this._getTab(_this.options.active).disabled) {
                    firstTab = _this._getTab(_this.options.active);
                } else {
                    // If not, just get the first one
                    firstTab = _this._getTab(0);
                }

                // Open the initial tab
                _this._openTab(e, firstTab); // Open first tab

                // Call the callback function
                _this.options.load.call(this, e, firstTab); // Call the load callback
            }
        });
        // Trigger loaded event
        this.$element.trigger('tabs-load');
    };
    
    //
    // PRIVATE FUNCTIONS
    //

    /**
     * This function loads the tab elements and stores them in an array
     * @returns {Array} Array of tab elements
     */
    ResponsiveTabs.prototype._loadElements = function() {
        var _this = this;
        var $ul = this.$element.children('ul');
        var tabs = [];
        var id = 0;

        // Add the classes to the basic html elements
        this.$element.addClass('r-tabs'); // Tab container
        $ul.addClass('r-tabs-nav'); // List container

        // Get tab buttons and store their data in an array
        $('li', $ul).each(function() {
            var $tab = $(this);
            var isExcluded = $tab.hasClass(_this.options.classes.stateExcluded);
            var $anchor, $panel, $accordionTab, $accordionAnchor, panelSelector;

            // Check if the tab should be excluded
            if(!isExcluded) {

                $anchor = $('a', $tab);
                panelSelector = $anchor.data('target');
                $panel = $(panelSelector);
                $accordionTab = $('<div></div>').insertBefore($panel);
                $accordionAnchor = $anchor.clone().appendTo($accordionTab);
                //$('<a></a>').data('target', panelSelector).html($anchor.html()).appendTo($accordionTab);

                var oTab = {
                    _ignoreHashChange: false,
                    id: id,
                    disabled: ($.inArray(id, _this.options.disabled) !== -1),
                    tab: $(this),
                    anchor: $('a', $tab),
                    panel: $panel,
                    selector: panelSelector,
                    accordionTab: $accordionTab,
                    accordionAnchor: $accordionAnchor,
                    active: false
                };

                // 1up the ID
                id++;
                // Add to tab array
                tabs.push(oTab);
            }
        });
        return tabs;
    };


    /**
     * This function adds classes to the tab elements based on the options
     */
    ResponsiveTabs.prototype._loadClasses = function() {
        for (var i=0; i<this.tabs.length; i++) {
            this.tabs[i].tab.addClass(this.options.classes.stateDefault).addClass(this.options.classes.tab);
            this.tabs[i].anchor.addClass(this.options.classes.anchor);
            this.tabs[i].panel.addClass(this.options.classes.stateDefault).addClass(this.options.classes.panel);
            this.tabs[i].accordionTab.addClass(this.options.classes.accordionTitle);
            this.tabs[i].accordionAnchor.addClass(this.options.classes.anchor);
            if(this.tabs[i].disabled) {
                this.tabs[i].tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled);
                this.tabs[i].accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled);
           }
        }
    };

    /**
     * This function adds events to the tab elements
     */
    ResponsiveTabs.prototype._loadEvents = function() {
        var _this = this;
        // Define click event on a tab element
        var fClick = function(e) {
            var current = _this._getCurrentTab(); // Fetch current tab
            var clickedTab = e.data.tab;

            e.preventDefault();

            // Make sure this tab isn't disabled
            if(!clickedTab.disabled) {

                // Check if hash has to be set in the URL location
                if(_this.options.setHash) {
                    window.location.hash = clickedTab.selector;
                }

                e.data.tab._ignoreHashChange = true;

                // Check if the clicked tab isnt the current one or if its collapsible. If not, do nothing
                if(current !== clickedTab || _this._isCollapisble()) {
                    // The clicked tab is either another tab of the current one. If it's the current tab it is collapsible
                    // Either way, the current tab can be closed
                    _this._closeTab(e, current);

                    // Check if the clicked tab isnt the current one or if it isnt collapsible
                    if(current !== clickedTab || !_this._isCollapisble()) {
                        _this._openTab(e, clickedTab, false, true);
                    }
                }
            }
        };

        // Loop tabs
        for (var i=0; i<this.tabs.length; i++) {
            // Add click function to the tab and accordion selection element
            this.tabs[i].anchor.on('click', {tab: _this.tabs[i]}, fClick);
            this.tabs[i].accordionAnchor.on('click', {tab: _this.tabs[i]}, fClick);
        }
    };

    /**
     * This function sets the current state of the plugin
     * @param {Event} e - The event that triggers the state change
     */
    ResponsiveTabs.prototype._setState = function() {
        var $ul = $('ul', this.$element);
        var oldState = this.state;

        // The state is based on the visibility of the tabs list
        if($ul.is(':visible')){
            // Tab list is visible, so the state is 'tabs'
            this.state = 'tabs';
        } else {
            // Tab list is invisible, so the state is 'accordion'
            this.state = 'accordion';
        }

        // If the new state is different from the old state, the state activate trigger must be called
        if(this.state !== oldState) {
            this.$element.trigger('tabs-activate-state', {oldState: oldState, newState: this.state});
        }
    };

    /**
     * This function opens a tab
     * @param {Event} e - The event that triggers the tab opening
     * @param {Object} oTab - The tab object that should be opened
     * @param {Boolean} closeCurrent - Defines if the current tab should be closed
     * @param {Boolean} stopRotation - Defines if the tab rotation loop should be stopped
     */
    ResponsiveTabs.prototype._openTab = function(e, oTab, closeCurrent, stopRotation) {
        var _this = this;

        // Check if the current tab has to be closed
        if(closeCurrent) {
            this._closeTab(e, this._getCurrentTab());
        }

        // Check if the rotation has to be stopped when activated
        if(stopRotation && this.rotateInterval > 0) {
            this.stopRotation();
        }

        // Set this tab to active
        oTab.active = true;
        // Set active classes to the tab button and accordion tab button
        oTab.tab.removeClass(_this.options.classes.stateDefault).addClass(_this.options.classes.stateActive);
        oTab.accordionTab.removeClass(_this.options.classes.stateDefault).addClass(_this.options.classes.stateActive);

        // Run panel transiton
        _this._doTransition(oTab.panel, _this.options.animation, 'open', function() {
            // When finished, set active class to the panel
            oTab.panel.removeClass(_this.options.classes.stateDefault).addClass(_this.options.classes.stateActive);
        });

        this.$element.trigger('tabs-activate', oTab);
    };

    /**
     * This function closes a tab
     * @param {Event} e - The event that is triggered when a tab is closed
     * @param {Object} oTab - The tab object that should be closed
     */
    ResponsiveTabs.prototype._closeTab = function(e, oTab) {
        var _this = this;

        if(oTab !== undefined) {

            // Deactivate tab
            oTab.active = false;
            // Set default class to the tab button
            oTab.tab.removeClass(_this.options.classes.stateActive).addClass(_this.options.classes.stateDefault);

            // Run panel transition
            _this._doTransition(oTab.panel, _this.options.animation, 'close', function() {
                // Set default class to the accordion tab button and tab panel
                oTab.accordionTab.removeClass(_this.options.classes.stateActive).addClass(_this.options.classes.stateDefault);
                oTab.panel.removeClass(_this.options.classes.stateActive).addClass(_this.options.classes.stateDefault);
            }, true);

            this.$element.trigger('tabs-deactivate', oTab);
        }
    };

    /**
     * This function runs an effect on a panel
     * @param {Element} panel - The HTML element of the tab panel
     * @param {String} method - The transition method reference
     * @param {String} state - The state (open/closed) that the panel should transition to
     * @param {Function} callback - The callback function that is called after the transition
     * @param {Boolean} dequeue - Defines if the event queue should be dequeued after the transition
     */
    ResponsiveTabs.prototype._doTransition = function(panel, method, state, callback, dequeue) {
        var effect;
        var _this = this;

        // Get effect based on method
        switch(method) {
            case 'slide':
                effect = (state === 'open') ? 'slideDown' : 'slideUp';
                break;
            case 'fade':
                effect = (state === 'open') ? 'fadeIn' : 'fadeOut';
                break;
            default:
                effect = (state === 'open') ? 'show' : 'hide';
                // When default is used, set the duration to 0
                _this.options.duration = 0;
                break;
        }

        // Add the transition to a custom queue
        this.$queue.queue('responsive-tabs',function(next){
            // Run the transition on the panel
            panel[effect]({
                duration: _this.options.duration,
                complete: function() {
                    // Call the callback function
                    callback.call(panel, method, state);
                    // Run the next function in the queue
                    next();
                }
            });
        });

        // When the panel is openend, dequeue everything so the animation starts
        if(state === 'open' || dequeue) {
            this.$queue.dequeue('responsive-tabs');
        }

    };

    /**
     * This function returns the collapsibility of the tab in this state
     * @returns {Boolean} The collapsibility of the tab
     */
    ResponsiveTabs.prototype._isCollapisble = function() {
        return (typeof this.options.collapsible === 'boolean' && this.options.collapsible) || (typeof this.options.collapsible === 'string' && this.options.collapsible === this.getState());
    };

    /**
     * This function returns a tab by numeric reference
     * @param {Integer} numRef - Numeric tab reference
     * @returns {Object} Tab object
     */
    ResponsiveTabs.prototype._getTab = function(numRef) {
        return this.tabs[numRef];
    };

    /**
     * This function returns the numeric tab reference based on a hash selector
     * @param {String} selector - Hash selector
     * @returns {Integer} Numeric tab reference
     */
    ResponsiveTabs.prototype._getTabRefBySelector = function(selector) {
        // Loop all tabs
        for (var i=0; i<this.tabs.length; i++) {
            // Check if the hash selector is equal to the tab selector
            if(this.tabs[i].selector === selector) {
                return i;
            }
        }
        // If none is found return a negative index
        return -1;
    };

    /**
     * This function returns the current tab element
     * @returns {Object} Current tab element
     */
    ResponsiveTabs.prototype._getCurrentTab = function() {
        return this._getTab(this._getCurrentTabRef());
    };

    /**
     * This function returns the next tab's numeric reference
     * @param {Integer} currentTabRef - Current numeric tab reference
     * @returns {Integer} Numeric tab reference
     */
    ResponsiveTabs.prototype._getNextTabRef = function(currentTabRef) {
        var tabRef = (currentTabRef || this._getCurrentTabRef());
        var nextTabRef = (tabRef === this.tabs.length - 1) ? 0 : tabRef + 1;
        return (this._getTab(nextTabRef).disabled) ? this._getNextTabRef(nextTabRef) : nextTabRef;
    };

    /**
     * This function returns the previous tab's numeric reference
     * @returns {Integer} Numeric tab reference
     */
    ResponsiveTabs.prototype._getPreviousTabRef = function() {
        return (this._getCurrentTabRef() === 0) ? this.tabs.length - 1 : this._getCurrentTabRef() - 1;
    };

    /**
     * This function returns the current tab's numeric reference
     * @returns {Integer} Numeric tab reference
     */
    ResponsiveTabs.prototype._getCurrentTabRef = function() {
        // Loop all tabs
        for (var i=0; i<this.tabs.length; i++) {
            // If this tab is active, return it
            if(this.tabs[i].active) {
                return i;
            }
        }
        // No tabs have been found, return negative index
        return -1;
    };

    //
    // PUBLIC FUNCTIONS
    //

    /**
     * This function activates a tab
     * @param {Integer} tabRef - Numeric tab reference
     * @param {Boolean} stopRotation - Defines if the tab rotation should stop after activation
     */
    ResponsiveTabs.prototype.activate = function(tabRef, stopRotation) {
        var e = jQuery.Event('tabs-activate');
        var oTab = this._getTab(tabRef);
        if(!oTab.disabled) {
            this._openTab(e, oTab, true, stopRotation || true);
        }
    };

    /**
     * This function deactivates a tab
     * @param {Integer} tabRef - Numeric tab reference
     */
    ResponsiveTabs.prototype.deactivate = function(tabRef) {
        var e = jQuery.Event('tabs-dectivate');
        var oTab = this._getTab(tabRef);
        if(!oTab.disabled) {
            this._closeTab(e, oTab);
        }
    };

    /**
     * This function gets the current state of the plugin
     * @returns {String} State of the plugin
     */
    ResponsiveTabs.prototype.getState = function() {
        return this.state;
    };

    /**
     * This function starts the rotation of the tabs
     * @param {Integer} speed - The speed of the rotation
     */
    ResponsiveTabs.prototype.startRotation = function(speed) {
        var _this = this;
        // Make sure not all tabs are disabled
        if(this.tabs.length > this.options.disabled.length) {
            this.rotateInterval = setInterval(function(){
                var e = jQuery.Event('rotate');
                _this._openTab(e, _this._getTab(_this._getNextTabRef()), true);
            }, speed || (($.isNumeric(_this.options.rotate)) ? _this.options.rotate : 4000) );
        } else {
            throw new Error("Rotation is not possible if all tabs are disabled");
        }
    };

    /**
     * This function stops the rotation of the tabs
     */
    ResponsiveTabs.prototype.stopRotation = function() {
        window.clearInterval(this.rotateInterval);
        this.rotateInterval = 0;
    };

    /** jQuery wrapper */
    $.fn.responsiveTabs = function ( options ) {
        var args = arguments;
        if (options === undefined || typeof options === 'object') {
            return this.each(function () {
                if (!$.data(this, 'responsivetabs')) {
                    $.data(this, 'responsivetabs', new ResponsiveTabs( this, options ));
                }
            });
        } else if (typeof options === 'string' && options[0] !== '_' && options !== 'init') {
            return this.each(function () {
                var instance = $.data(this, 'responsivetabs');

                if (instance instanceof ResponsiveTabs && typeof instance[options] === 'function') {
                    instance[options].apply( instance, Array.prototype.slice.call( args, 1 ) );
                }

                // Allow instances to be destroyed via the 'destroy' method
                if (options === 'destroy') {
                    // TODO: destroy instance classes, etc
                    $.data(this, 'responsivetabs', null);
                }
            });
        }
    };

}(jQuery, window));

//fgnass.github.com/spin.js#v2.0.0
!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(m.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",m.cssRules.length),l[e]=1),e}function d(a,b){var c,d,e=a.style;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<k.length;d++)if(c=k[d]+b,void 0!==e[c])return c;return void 0!==e[b]?b:void 0}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a,b){return"string"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,n)}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}m.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.width,left:d.radius,top:-d.width>>1,filter:i}),c("fill",{color:g(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.length+d.width,k=2*j,l=2*-(d.width+d.length)+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)h(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=d.lines;i++)h(i);return b(a,m)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k=["webkit","Moz","ms","O"],l={},m=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};h.defaults={},f(h.prototype,{spin:function(b){this.stop();{var c=this,d=c.opts,f=c.el=e(a(0,{className:d.className}),{position:d.position,width:0,zIndex:d.zIndex});d.radius+d.length+d.width}if(b&&(b.insertBefore(f,b.firstChild||null),e(f,{left:d.left,top:d.top})),f.setAttribute("role","progressbar"),c.lines(f,c.opts),!j){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function o(){h++;for(var a=0;a<d.lines;a++)g=Math.max(1-(h+(d.lines-a)*n)%l*m,d.opacity),c.opacity(f,a*d.direction+i,g,d);c.timeout=c.el&&setTimeout(o,~~(1e3/k))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function h(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*k+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;k<f.lines;k++)i=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(h("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,h(g(f.color,k),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var o=e(a("group"),{behavior:"url(#default#VML)"});return!d(o,"transform")&&o.adj?i():j=d(o,"animation"),h});

/**
 * Copyright (c) 2011-2014 Felix Gnass
 * Licensed under the MIT license
 */

/*

 Basic Usage:
 ============

 $('#el').spin(); // Creates a default Spinner using the text color of #el.
 $('#el').spin({ ... }); // Creates a Spinner using the provided options.

 $('#el').spin(false); // Stops and removes the spinner.

 Using Presets:
 ==============

 $('#el').spin('small'); // Creates a 'small' Spinner using the text color of #el.
 $('#el').spin('large', '#fff'); // Creates a 'large' white Spinner.

 Adding a custom preset:
 =======================

 $.fn.spin.presets.flower = {
 lines: 9
 length: 10
 width: 20
 radius: 0
 }

 $('#el').spin('flower', 'red');

 */

(function(factory) {

    if (typeof exports == 'object') {
        // CommonJS
        factory(require('jquery'), require('spin'))
    }
    else if (typeof define == 'function' && define.amd) {
        // AMD, register as anonymous module
        define(['jquery', 'spin'], factory)
    }
    else {
        // Browser globals
        if (!window.Spinner) throw new Error('Spin.js not present')
        factory(window.jQuery, window.Spinner)
    }

}(function($, Spinner) {

    $.fn.spin = function(opts, color) {

        return this.each(function() {
            var $this = $(this),
                data = $this.data();

            if (data.spinner) {
                data.spinner.stop();
                delete data.spinner;
            }
            if (opts !== false) {
                opts = $.extend(
                    { color: color || $this.css('color') },
                    $.fn.spin.presets[opts] || opts
                )
                data.spinner = new Spinner(opts).spin(this)
            }
        })
    }

    $.fn.spin.presets = {
        tiny: { lines: 8, length: 2, width: 2, radius: 3 },
        small: { lines: 8, length: 4, width: 3, radius: 5 },
        large: { lines: 10, length: 8, width: 4, radius: 8 }
    }

}));
$.fn.spin.presets.defaultSpin = {
    lines: 17, // The number of lines to draw
    length: 0, // The length of each line
    width: 18, // The line thickness
    radius: 28, // The radius of the inner circle
    corners: 1, // Corner roundness (0..1)
    rotate: 24, // The rotation offset
    direction: 1, // 1: clockwise, -1: counterclockwise
    color: '#02b0ef', // #rgb or #rrggbb or array of colors
    speed: 1.4, // Rounds per second
    trail: 50, // Afterglow percentage
    shadow: false, // Whether to render a shadow
    hwaccel: false, // Whether to use hardware acceleration
    className: 'spinner', // The CSS class to assign to the spinner
    zIndex: 2e9 // The z-index (defaults to 2000000000)
}
$.fn.spin.presets.largeSpin = {
    lines: 17, // The number of lines to draw
    length: 0, // The length of each line
    width: 18, // The line thickness
    radius: 130, // The radius of the inner circle
    corners: 1, // Corner roundness (0..1)
    rotate: 24, // The rotation offset
    direction: 1, // 1: clockwise, -1: counterclockwise
    color: '#02b0ef', // #rgb or #rrggbb or array of colors
    speed: 1.4, // Rounds per second
    trail: 50, // Afterglow percentage
    shadow: false, // Whether to render a shadow
    hwaccel: false, // Whether to use hardware acceleration
    className: 'spinner', // The CSS class to assign to the spinner
    zIndex: 2e9 // The z-index (defaults to 2000000000)
}

$.fn.spin.presets.xlargeSpin = {
    lines: 17, // The number of lines to draw
    length: 0, // The length of each line
    width: 25, // The line thickness
    radius: 200, // The radius of the inner circle
    corners: 1, // Corner roundness (0..1)
    rotate: 24, // The rotation offset
    direction: 1, // 1: clockwise, -1: counterclockwise
    color: '#02b0ef', // #rgb or #rrggbb or array of colors
    speed: 1.4, // Rounds per second
    trail: 50, // Afterglow percentage
    shadow: false, // Whether to render a shadow
    hwaccel: false, // Whether to use hardware acceleration
    className: 'spinner', // The CSS class to assign to the spinner
    zIndex: 2e9 // The z-index (defaults to 2000000000)
}

/*! Lazy Load 1.9.3 - MIT license - Copyright 2010-2013 Mika Tuupola */
!function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(":visible"))if(a.abovethetop(this,j)||a.leftofbegin(this,j));else if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit)return!1}else c.trigger("appear"),b=0})}var h,i=this,j={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf("scroll")&&h.bind(j.event,function(){return g()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,(c.attr("src")===d||c.attr("src")===!1)&&c.is("img")&&c.attr("src",j.placeholder),c.one("appear",function(){if(!this.loaded){if(j.appear){var d=i.length;j.appear.call(b,d,j)}a("<img />").bind("load",function(){var d=c.attr("data-"+j.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[j.effect](j.effect_speed),b.loaded=!0;var e=a.grep(i,function(a){return!a.loaded});if(i=a(e),j.load){var f=i.length;j.load.call(b,f,j)}}).attr("src",c.attr("data-"+j.data_attribute))}}),0!==j.event.indexOf("scroll")&&c.bind(j.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){g()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&i.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){g()}),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document);
/**
* jquery.matchHeight-min.js master
* http://brm.io/jquery-match-height/
* License: MIT
*/
(function(c){var n=-1,f=-1,g=function(a){return parseFloat(a)||0},r=function(a){var b=null,d=[];c(a).each(function(){var a=c(this),k=a.offset().top-g(a.css("margin-top")),l=0<d.length?d[d.length-1]:null;null===l?d.push(a):1>=Math.floor(Math.abs(b-k))?d[d.length-1]=l.add(a):d.push(a);b=k});return d},p=function(a){var b={byRow:!0,property:"height",target:null,remove:!1};if("object"===typeof a)return c.extend(b,a);"boolean"===typeof a?b.byRow=a:"remove"===a&&(b.remove=!0);return b},b=c.fn.matchHeight=
function(a){a=p(a);if(a.remove){var e=this;this.css(a.property,"");c.each(b._groups,function(a,b){b.elements=b.elements.not(e)});return this}if(1>=this.length&&!a.target)return this;b._groups.push({elements:this,options:a});b._apply(this,a);return this};b._groups=[];b._throttle=80;b._maintainScroll=!1;b._beforeUpdate=null;b._afterUpdate=null;b._apply=function(a,e){var d=p(e),h=c(a),k=[h],l=c(window).scrollTop(),f=c("html").outerHeight(!0),m=h.parents().filter(":hidden");m.each(function(){var a=c(this);
a.data("style-cache",a.attr("style"))});m.css("display","block");d.byRow&&!d.target&&(h.each(function(){var a=c(this),b="inline-block"===a.css("display")?"inline-block":"block";a.data("style-cache",a.attr("style"));a.css({display:b,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px"})}),k=r(h),h.each(function(){var a=c(this);a.attr("style",a.data("style-cache")||"")}));c.each(k,function(a,b){var e=c(b),f=0;if(d.target)f=
d.target.outerHeight(!1);else{if(d.byRow&&1>=e.length){e.css(d.property,"");return}e.each(function(){var a=c(this),b={display:"inline-block"===a.css("display")?"inline-block":"block"};b[d.property]="";a.css(b);a.outerHeight(!1)>f&&(f=a.outerHeight(!1));a.css("display","")})}e.each(function(){var a=c(this),b=0;d.target&&a.is(d.target)||("border-box"!==a.css("box-sizing")&&(b+=g(a.css("border-top-width"))+g(a.css("border-bottom-width")),b+=g(a.css("padding-top"))+g(a.css("padding-bottom"))),a.css(d.property,
f-b))})});m.each(function(){var a=c(this);a.attr("style",a.data("style-cache")||null)});b._maintainScroll&&c(window).scrollTop(l/f*c("html").outerHeight(!0));return this};b._applyDataApi=function(){var a={};c("[data-match-height], [data-mh]").each(function(){var b=c(this),d=b.attr("data-mh")||b.attr("data-match-height");a[d]=d in a?a[d].add(b):b});c.each(a,function(){this.matchHeight(!0)})};var q=function(a){b._beforeUpdate&&b._beforeUpdate(a,b._groups);c.each(b._groups,function(){b._apply(this.elements,
this.options)});b._afterUpdate&&b._afterUpdate(a,b._groups)};b._update=function(a,e){if(e&&"resize"===e.type){var d=c(window).width();if(d===n)return;n=d}a?-1===f&&(f=setTimeout(function(){q(e);f=-1},b._throttle)):q(e)};c(b._applyDataApi);c(window).bind("load",function(a){b._update(!1,a)});c(window).bind("resize orientationchange",function(a){b._update(!0,a)})})(jQuery);
/*! perfect-scrollbar - v0.4.10
* http://noraesae.github.com/perfect-scrollbar/
* Copyright (c) 2014 Hyeonje Alex Jun; Licensed MIT */
(function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)})(function(e){"use strict";var t={wheelSpeed:10,wheelPropagation:!1,minScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,includePadding:!1},o=function(){var e=0;return function(){var t=e;return e+=1,".perfect-scrollbar-"+t}}();e.fn.perfectScrollbar=function(n,r){return this.each(function(){var l=e.extend(!0,{},t),s=e(this);if("object"==typeof n?e.extend(!0,l,n):r=n,"update"===r)return s.data("perfect-scrollbar-update")&&s.data("perfect-scrollbar-update")(),s;if("destroy"===r)return s.data("perfect-scrollbar-destroy")&&s.data("perfect-scrollbar-destroy")(),s;if(s.data("perfect-scrollbar"))return s.data("perfect-scrollbar");s.addClass("ps-container");var a,i,c,u,d,p,f,h,v,g,b=e("<div class='ps-scrollbar-x-rail'></div>").appendTo(s),m=e("<div class='ps-scrollbar-y-rail'></div>").appendTo(s),w=e("<div class='ps-scrollbar-x'></div>").appendTo(b),T=e("<div class='ps-scrollbar-y'></div>").appendTo(m),L=parseInt(b.css("bottom"),10),y=L===L,S=y?null:parseInt(b.css("top"),10),I=parseInt(m.css("right"),10),x=I===I,M=x?null:parseInt(m.css("left"),10),P="rtl"===s.css("direction"),X=o(),D=function(e,t){var o=e+t,n=u-v;g=0>o?0:o>n?n:o;var r=parseInt(g*(p-u)/(u-v),10);s.scrollTop(r),y?b.css({bottom:L-r}):b.css({top:S+r})},Y=function(e,t){var o=e+t,n=c-f;h=0>o?0:o>n?n:o;var r=parseInt(h*(d-c)/(c-f),10);s.scrollLeft(r),x?m.css({right:I-r}):m.css({left:M+r})},k=function(e){return l.minScrollbarLength&&(e=Math.max(e,l.minScrollbarLength)),e},C=function(){var e={width:c,display:a?"inherit":"none"};e.left=P?s.scrollLeft()+c-d:s.scrollLeft(),y?e.bottom=L-s.scrollTop():e.top=S+s.scrollTop(),b.css(e);var t={top:s.scrollTop(),height:u,display:i?"inherit":"none"};x?t.right=P?d-s.scrollLeft()-I-T.outerWidth():I-s.scrollLeft():t.left=P?s.scrollLeft()+2*c-d-M-T.outerWidth():M+s.scrollLeft(),m.css(t),w.css({left:h,width:f}),T.css({top:g,height:v})},j=function(){c=l.includePadding?s.innerWidth():s.width(),u=l.includePadding?s.innerHeight():s.height(),d=s.prop("scrollWidth"),p=s.prop("scrollHeight"),!l.suppressScrollX&&d>c+l.scrollXMarginOffset?(a=!0,f=k(parseInt(c*c/d,10)),h=parseInt(s.scrollLeft()*(c-f)/(d-c),10)):(a=!1,f=0,h=0,s.scrollLeft(0)),!l.suppressScrollY&&p>u+l.scrollYMarginOffset?(i=!0,v=k(parseInt(u*u/p,10)),g=parseInt(s.scrollTop()*(u-v)/(p-u),10)):(i=!1,v=0,g=0,s.scrollTop(0)),g>=u-v&&(g=u-v),h>=c-f&&(h=c-f),C()},O=function(){var t,o;w.bind("mousedown"+X,function(e){o=e.pageX,t=w.position().left,b.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),e(document).bind("mousemove"+X,function(e){b.hasClass("in-scrolling")&&(Y(t,e.pageX-o),e.stopPropagation(),e.preventDefault())}),e(document).bind("mouseup"+X,function(){b.hasClass("in-scrolling")&&b.removeClass("in-scrolling")}),t=o=null},W=function(){var t,o;T.bind("mousedown"+X,function(e){o=e.pageY,t=T.position().top,m.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),e(document).bind("mousemove"+X,function(e){m.hasClass("in-scrolling")&&(D(t,e.pageY-o),e.stopPropagation(),e.preventDefault())}),e(document).bind("mouseup"+X,function(){m.hasClass("in-scrolling")&&m.removeClass("in-scrolling")}),t=o=null},E=function(e,t){var o=s.scrollTop();if(0===e){if(!i)return!1;if(0===o&&t>0||o>=p-u&&0>t)return!l.wheelPropagation}var n=s.scrollLeft();if(0===t){if(!a)return!1;if(0===n&&0>e||n>=d-c&&e>0)return!l.wheelPropagation}return!0},H=function(){l.wheelSpeed/=10;var e=!1;s.bind("mousewheel"+X,function(t,o,n,r){var c=t.deltaX*t.deltaFactor||n,u=t.deltaY*t.deltaFactor||r;e=!1,l.useBothWheelAxes?i&&!a?(u?s.scrollTop(s.scrollTop()-u*l.wheelSpeed):s.scrollTop(s.scrollTop()+c*l.wheelSpeed),e=!0):a&&!i&&(c?s.scrollLeft(s.scrollLeft()+c*l.wheelSpeed):s.scrollLeft(s.scrollLeft()-u*l.wheelSpeed),e=!0):(s.scrollTop(s.scrollTop()-u*l.wheelSpeed),s.scrollLeft(s.scrollLeft()+c*l.wheelSpeed)),j(),e=e||E(c,u),e&&(t.stopPropagation(),t.preventDefault())}),s.bind("MozMousePixelScroll"+X,function(t){e&&t.preventDefault()})},A=function(){var t=!1;s.bind("mouseenter"+X,function(){t=!0}),s.bind("mouseleave"+X,function(){t=!1});var o=!1;e(document).bind("keydown"+X,function(n){if(t&&!e(document.activeElement).is(":input,[contenteditable]")){var r=0,l=0;switch(n.which){case 37:r=-30;break;case 38:l=30;break;case 39:r=30;break;case 40:l=-30;break;case 33:l=90;break;case 32:case 34:l=-90;break;case 35:l=-u;break;case 36:l=u;break;default:return}s.scrollTop(s.scrollTop()-l),s.scrollLeft(s.scrollLeft()+r),o=E(r,l),o&&n.preventDefault()}})},q=function(){var e=function(e){e.stopPropagation()};T.bind("click"+X,e),m.bind("click"+X,function(e){var t=parseInt(v/2,10),o=e.pageY-m.offset().top-t,n=u-v,r=o/n;0>r?r=0:r>1&&(r=1),s.scrollTop((p-u)*r)}),w.bind("click"+X,e),b.bind("click"+X,function(e){var t=parseInt(f/2,10),o=e.pageX-b.offset().left-t,n=c-f,r=o/n;0>r?r=0:r>1&&(r=1),s.scrollLeft((d-c)*r)})},F=function(){var t=function(e,t){s.scrollTop(s.scrollTop()-t),s.scrollLeft(s.scrollLeft()-e),j()},o={},n=0,r={},l=null,a=!1;e(window).bind("touchstart"+X,function(){a=!0}),e(window).bind("touchend"+X,function(){a=!1}),s.bind("touchstart"+X,function(e){var t=e.originalEvent.targetTouches[0];o.pageX=t.pageX,o.pageY=t.pageY,n=(new Date).getTime(),null!==l&&clearInterval(l),e.stopPropagation()}),s.bind("touchmove"+X,function(e){if(!a&&1===e.originalEvent.targetTouches.length){var l=e.originalEvent.targetTouches[0],s={};s.pageX=l.pageX,s.pageY=l.pageY;var i=s.pageX-o.pageX,c=s.pageY-o.pageY;t(i,c),o=s;var u=(new Date).getTime(),d=u-n;d>0&&(r.x=i/d,r.y=c/d,n=u),e.preventDefault()}}),s.bind("touchend"+X,function(){clearInterval(l),l=setInterval(function(){return.01>Math.abs(r.x)&&.01>Math.abs(r.y)?(clearInterval(l),void 0):(t(30*r.x,30*r.y),r.x*=.8,r.y*=.8,void 0)},10)})},z=function(){s.bind("scroll"+X,function(){j()})},B=function(){s.unbind(X),e(window).unbind(X),e(document).unbind(X),s.data("perfect-scrollbar",null),s.data("perfect-scrollbar-update",null),s.data("perfect-scrollbar-destroy",null),w.remove(),T.remove(),b.remove(),m.remove(),b=m=w=T=a=i=c=u=d=p=f=h=L=y=S=v=g=I=x=M=P=X=null},K=function(t){s.addClass("ie").addClass("ie"+t);var o=function(){var t=function(){e(this).addClass("hover")},o=function(){e(this).removeClass("hover")};s.bind("mouseenter"+X,t).bind("mouseleave"+X,o),b.bind("mouseenter"+X,t).bind("mouseleave"+X,o),m.bind("mouseenter"+X,t).bind("mouseleave"+X,o),w.bind("mouseenter"+X,t).bind("mouseleave"+X,o),T.bind("mouseenter"+X,t).bind("mouseleave"+X,o)},n=function(){C=function(){var e={left:h+s.scrollLeft(),width:f};y?e.bottom=L:e.top=S,w.css(e);var t={top:g+s.scrollTop(),height:v};x?t.right=I:t.left=M,T.css(t),w.hide().show(),T.hide().show()}};6===t&&(o(),n())},Q="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,N=function(){var e=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/);e&&"msie"===e[1]&&K(parseInt(e[2],10)),j(),z(),O(),W(),q(),Q&&F(),s.mousewheel&&H(),l.useKeyboard&&A(),s.data("perfect-scrollbar",s),s.data("perfect-scrollbar-update",j),s.data("perfect-scrollbar-destroy",B)};return N(),s})}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var s=t||window.event,a=i.call(arguments,1),c=0,u=0,d=0,p=0;if(t=e.event.fix(s),t.type="mousewheel","detail"in s&&(d=-1*s.detail),"wheelDelta"in s&&(d=s.wheelDelta),"wheelDeltaY"in s&&(d=s.wheelDeltaY),"wheelDeltaX"in s&&(u=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(u=-1*d,d=0),c=0===d?u:d,"deltaY"in s&&(d=-1*s.deltaY,c=d),"deltaX"in s&&(u=s.deltaX,0===d&&(c=-1*u)),0!==d||0!==u){if(1===s.deltaMode){var f=e.data(this,"mousewheel-line-height");c*=f,d*=f,u*=f}else if(2===s.deltaMode){var h=e.data(this,"mousewheel-page-height");c*=h,d*=h,u*=h}return p=Math.max(Math.abs(d),Math.abs(u)),(!l||l>p)&&(l=p,n(s,p)&&(l/=40)),n(s,p)&&(c/=40,u/=40,d/=40),c=Math[c>=1?"floor":"ceil"](c/l),u=Math[u>=1?"floor":"ceil"](u/l),d=Math[d>=1?"floor":"ceil"](d/l),t.deltaX=u,t.deltaY=d,t.deltaFactor=l,t.deltaMode=0,a.unshift(t,c,u,d),r&&clearTimeout(r),r=setTimeout(o,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function o(){l=null}function n(e,t){return u.settings.adjustOldDeltas&&"mousewheel"===e.type&&0===t%120}var r,l,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(e.event.fixHooks)for(var c=s.length;c;)e.event.fixHooks[s[--c]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var o=a.length;o;)this.addEventListener(a[--o],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=a.length;e;)this.removeEventListener(a[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});
/*
 * Sidr
 * https://github.com/artberri/sidr
 *
 * Copyright (c) 2013 Alberto Varela
 * Licensed under the MIT license.
 */

;(function( $ ){

    var sidrMoving = false,
        sidrOpened = false;

// Private methods
    var privateMethods = {
// Check for valids urls
// From : http://stackoverflow.com/questions/5717093/check-if-a-javascript-string-is-an-url
        isUrl: function (str) {
            var pattern = new RegExp('^(https?:\\/\\/)?'+ // protocol
                '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name
                '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
                '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
                '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
                '(\\#[-a-z\\d_]*)?$','i'); // fragment locator
            if(!pattern.test(str)) {
                return false;
            } else {
                return true;
            }
        },
// Loads the content into the menu bar
        loadContent: function($menu, content) {
            $menu.html(content);
        },
// Add sidr prefixes
        addPrefix: function($element) {
            var elementId = $element.attr('id'),
                elementClass = $element.attr('class');

            if(typeof elementId === 'string' && '' !== elementId) {
                $element.attr('id', elementId.replace(/([A-Za-z0-9_.\-]+)/g, 'sidr-id-$1'));
            }
            if(typeof elementClass === 'string' && '' !== elementClass && 'sidr-inner' !== elementClass) {
                $element.attr('class', elementClass.replace(/([A-Za-z0-9_.\-]+)/g, 'sidr-class-$1'));
            }
            $element.removeAttr('style');
        },
        execute: function(action, name, callback) {
// Check arguments
            if(typeof name === 'function') {
                callback = name;
                name = 'sidr';
            }
            else if(!name) {
                name = 'sidr';
            }

// Declaring
            var $menu = $('#' + name),
                $body = $($menu.data('body')),
                $html = $('html'),
                menuWidth = $menu.outerWidth(true),
                speed = $menu.data('speed'),
                side = $menu.data('side'),
                displace = $menu.data('displace'),
                onOpen = $menu.data('onOpen'),
                onClose = $menu.data('onClose'),
                bodyAnimation,
                menuAnimation,
                scrollTop,
                bodyClass = (name === 'sidr' ? 'sidr-open' : 'sidr-open ' + name + '-open');

// Open Sidr
            if('open' === action || ('toggle' === action && !$menu.is(':visible'))) {
// Check if we can open it
                if( $menu.is(':visible') || sidrMoving ) {
                    return;
                }

// If another menu opened close first
                if(sidrOpened !== false) {
                    methods.close(sidrOpened, function() {
                        methods.open(name);
                    });

                    return;
                }

// Lock sidr
                sidrMoving = true;

// Left or right?
                if(side === 'left') {
                    bodyAnimation = {left: menuWidth + 'px'};
                    menuAnimation = {left: '0px'};
                }
                else {
                    bodyAnimation = {right: menuWidth + 'px'};
                    menuAnimation = {right: '0px'};
                }

// Prepare page if container is body
                if($body.is('body')){
                    scrollTop = $html.scrollTop();
                    $html.css('overflow-x', 'hidden').scrollTop(scrollTop);
                }

// Open menu
                if(displace){
                    $body.addClass('sidr-animating').css({
                        width: $body.width(),
                        position: 'absolute'
                    }).animate(bodyAnimation, speed, function() {
                            $(this).addClass(bodyClass);
                        });
                }
                else {
                    setTimeout(function() {
                        $(this).addClass(bodyClass);
                    }, speed);
                }
                $menu.css('display', 'block').animate(menuAnimation, speed, function() {
                    sidrMoving = false;
                    sidrOpened = name;
// Callback
                    if(typeof callback === 'function') {
                        callback(name);
                    }
                    $body.removeClass('sidr-animating');
                });

// onOpen callback
                onOpen();
            }
// Close Sidr
            else {
// Check if we can close it
                if( !$menu.is(':visible') || sidrMoving ) {
                    return;
                }

// Lock sidr
                sidrMoving = true;

// Right or left menu?
                if(side === 'left') {
                    bodyAnimation = {left: 0};
                    menuAnimation = {left: '-' + menuWidth + 'px'};
                }
                else {
                    bodyAnimation = {right: 0};
                    menuAnimation = {right: '-' + menuWidth + 'px'};
                }

// Close menu
                if($body.is('body')){
                    scrollTop = $html.scrollTop();
                    $html.removeAttr('style').scrollTop(scrollTop);
                }
                $body.addClass('sidr-animating').animate(bodyAnimation, speed).removeClass(bodyClass);
                $menu.animate(menuAnimation, speed, function() {
                    $menu.removeAttr('style').hide();
                    $body.removeAttr('style');
                    $('html').removeAttr('style');
                    sidrMoving = false;
                    sidrOpened = false;
// Callback
                    if(typeof callback === 'function') {
                        callback(name);
                    }
                    $body.removeClass('sidr-animating');
                });

// onClose callback
                onClose();
            }
        }
    };

// Sidr public methods
    var methods = {
        open: function(name, callback) {
            privateMethods.execute('open', name, callback);
        },
        close: function(name, callback) {
            privateMethods.execute('close', name, callback);
        },
        toggle: function(name, callback) {
            privateMethods.execute('toggle', name, callback);
        },
// I made a typo, so I mantain this method to keep backward compatibilty with 1.1.1v and previous
        toogle: function(name, callback) {
            privateMethods.execute('toggle', name, callback);
        }
    };

    $.sidr = function( method ) {

        if ( methods[method] ) {
            return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
        }
        else if ( typeof method === 'function' || typeof method === 'string' || ! method ) {
            return methods.toggle.apply( this, arguments );
        }
        else {
            $.error( 'Method ' + method + ' does not exist on jQuery.sidr' );
        }

    };

    $.fn.sidr = function( options ) {

        var settings = $.extend( {
            name : 'sidr', // Name for the 'sidr'
            speed : 200, // Accepts standard jQuery effects speeds (i.e. fast, normal or milliseconds)
            side : 'left', // Accepts 'left' or 'right'
            source : null, // Override the source of the content.
            renaming : true, // The ids and classes will be prepended with a prefix when loading existent content
            body : 'body', // Page container selector,
            displace: true, // Displace the body content or not
            onOpen : function() {}, // Callback when sidr opened
            onClose : function() {} // Callback when sidr closed
        }, options);

        var name = settings.name,
            $sideMenu = $('#' + name);

// If the side menu do not exist create it
        if( $sideMenu.length === 0 ) {
            $sideMenu = $('<div />')
                .attr('id', name)
                .appendTo($('body'));
        }

// Adding styles and options
        $sideMenu
            .addClass('sidr')
            .addClass(settings.side)
            .data({
                speed : settings.speed,
                side : settings.side,
                body : settings.body,
                displace : settings.displace,
                onOpen : settings.onOpen,
                onClose : settings.onClose
            });

// The menu content
        if(typeof settings.source === 'function') {
            var newContent = settings.source(name);
            privateMethods.loadContent($sideMenu, newContent);
        }
        else if(typeof settings.source === 'string' && privateMethods.isUrl(settings.source)) {
            $.get(settings.source, function(data) {
                privateMethods.loadContent($sideMenu, data);
            });
        }
        else if(typeof settings.source === 'string') {
            var htmlContent = '',
                selectors = settings.source.split(',');

            $.each(selectors, function(index, element) {
                htmlContent += '<div class="sidr-inner">' + $(element).html() + '</div>';
            });

// Renaming ids and classes
            if(settings.renaming) {
                var $htmlContent = $('<div />').html(htmlContent);
                $htmlContent.find('*').each(function(index, element) {
                    var $element = $(element);
                    privateMethods.addPrefix($element);
                });
                htmlContent = $htmlContent.html();
            }
            privateMethods.loadContent($sideMenu, htmlContent);
        }
        else if(settings.source !== null) {
            $.error('Invalid Sidr Source');
        }

        return this.each(function(){
            var $this = $(this),
                data = $this.data('sidr');

// If the plugin hasn't been initialized yet
            if ( ! data ) {

                $this.data('sidr', name);

                if(settings.forceclick){
                    $this.click(function(e) {
                        e.preventDefault();
                        methods.toggle(name);
                    });
                }
                else{

                    if('ontouchstart' in document.documentElement) {
                        $this.bind('touchstart', function(e) {
                            var theEvent = e.originalEvent.touches[0];
                            this.touched = e.timeStamp;
                        });
                        $this.bind('touchend', function(e) {
                            var delta = Math.abs(e.timeStamp - this.touched);
                            if(delta < 200) {
                                e.preventDefault();
                                methods.toggle(name);
                            }
                        });
                    }
                    else {
                        $this.click(function(e) {
                            e.preventDefault();
                            methods.toggle(name);
                        });
                    }
                }
            }
        });
    };

})( jQuery );
var url_comparador='../ajax/add-comparador.php';
/*
* Archivo: customplugins.js
* Proyecto TelCel México
* Descripción Widgets para TelCel
* Autor: Santi Risco @ Mx
* Fecha: Junio 2014
* Versión: 0.1
* Dependencias: jquery 1.11.1
* spin.min.js
* */
/*
* Widget 1: Simple AJAX Form
* Requiere: spin.js o spin.min.js
* Descripción: envía el formulario y recarga el resultado en la capa indicada, desde el botón de submit() o desde eventos en los campos o en los plugins que lo requieran.
* Opciones:
*   url, default atributo data-url
*   target, default atributo data-ajax-target
*   data: form.serialize()
*   spin: 'defaultSpin'
*   mensajeError: "Se ha producido un error al procesar su peticion"
*   strType: Get or post
*   callback: function(obj,target)
* */



(function ($) {
    $.fn.simpleAjaxForm = function(options) {
        var defaults = {
            url: ($(this).prop("tagName")=='FORM')?$(this).attr('action'):$(this).data('url'),
            target: $(this).data('ajax-target'),
            data: ($(this).prop('tagName')=='FORM') ? $(this).serialize() : $(this).closest('form').serialize(),
            spin: 'defaultSpin',
            mensajeError: "Se ha producido un error al procesar su peticion",
            strType:($(this).prop("tagName")=='FORM')?$(this).attr('method'):(($(this).data('srttype'))?$(this).data('srttype'):'GET'),
            callback: function(obj,target){}
        }
        var settings = $.extend( {}, defaults, options );
        if($(this).data('strtype')){
            settings.strType=$(this).data('strtype');
        }
        var loader,
            url=settings.url,
            target=settings.target,
            data=$(this).data('ajaxNoData') ? {} : settings.data,
            strType=settings.strType,
            callback=settings.callback,
            obj=($(this).prop("tagName")=='FORM')?$(this):$(this).closest('form');

        $(target).animate({'opacity': '.5'}, function() {
            loader = $('<div/>', {
                'class': 'spinner-holder clear'
            }).css({'position':'absolute','bottom':'50%', 'right':'50%'}).appendTo(target).spin(settings.spin);
            //perform ajax request
            $.ajax({
                url: url,
                data: data,
                dataType: 'HTML',
                type:strType
            }).done( function (result) {
                    $(target).find('.spinner-holder').spin(false);
                    $(target).html(result).css({'opacity': '1','height':'auto'}).find('.customCheck, .customRadio').each(function(){
                        $(this).prettyCheckable();
                    });
                    $(target).find('[data-trigger-events]').each(function() {
                        $(this).dataTriggerEvent();
                    });
                    onAjaxSuccess(target);
                    $('.js-tooltip').tooltip();
                    callback(obj,target);
                })
                .fail(function() {
                    // alert(target)
                    $(target).prepend('<div class="container-fluid "><div class="alert alert-warning fade in">'+settings.mensajeError+'</div></div>').css({'opacity': '1'}).find('.spinner-holder').spin(false);
                    $(target).find('.alert').delay('800').slideUp('slow');
                });
        });
    };
}(jQuery));

(function ($) {
    $.fn.simpleAjaxTabs = function(options) {
        var defaults = {
            spin: 'defaultSpin',
            mensajeError: "Se ha producido un error al procesar su peticion",
            callback: function(){}
        }
        var settings = $.extend( {}, defaults, options );
        var loader,  spin=settings.spin,  callback=settings.callback, $selector=$(this).selector;

        var render = function(e, obj){
            var URL = obj.data('href');//obj.data('href') ? obj.data('href') : obj.attr('href');
            var target = obj.data('target');//obj.data('href') ? obj.attr('href') : obj.data('target');

            //Find GET parameters in the original url and append it to the new url.
            var originalUrl = window.location.toString();
            var newUrl = obj.attr('href');

            //console.log("original url:" + originalUrl);
            //console.log("new url:" + newUrl);

            if (originalUrl != null && originalUrl != "") {

                var originalUrlArr = originalUrl.split("?");

                if (originalUrlArr != null && originalUrlArr.length == 2) {

                    var getParameters = originalUrlArr[1];

                    //If the original url has GET parameters then append it to the tab url.
                    if (getParameters != "") {

                        if (newUrl != null && newUrl != "undefined") {

                            newUrl = newUrl + "?" + getParameters;

                        }

                    }

                }

            }

            //console.log("pathchange:" + newUrl);

            $.pathchange.changeTo(newUrl);



            if(!$.trim($(target).html())){//We're not using :empty selector as some browsers may interprete a space o br as not empty
                $(target).css({'position':'relative'});/*'min-height': '400px'*/
                loader = $('<div/>', {
                    'class': 'spinner-holder clear'
                }).css({'position':'absolute','top':'200px', 'right':'50%'}).appendTo(target).spin(spin);
                $.ajax(
                    {
                        url : URL,
                        success:function(data, textStatus, jqXHR)
                        {
                            $(target).html(data);
                            $(target).find('.customCheck,.customRadio').each(function(){
                                $(this).prettyCheckable();
                            });

                            onAjaxSuccess(target);

                            $(target).find('.js-simpleAjaxTabs > li.active > a').each(function() {
                                render(null, $(this));
                            });

                            $(target).find('[data-trigger-events]').each(function() {
                                $(this).dataTriggerEvent();
                            });
                            callback(obj,target);
                        },
                        error: function(jqXHR, textStatus, errorThrown)
                        {
                            $(target).find('.spinner-holder').spin(false).detach();
                            $(target).prepend('<div class="container-fluid container-alert"><div class="alert alert-warning fade in">Se ha producido un error al procesar tu petición, inténtalo de nuevo.</div></div>').css({'opacity': '1'});
                            $(target).find('.container-alert').delay('800').slideUp('slow');
                        }
                    });
            }
            var text=obj.find('h2').text();
            obj.tab('show');
            obj.parents('.js-simpleAjaxTabs').prev('button').find('span').text(text);
            if(e) {
                e.preventDefault()
            }
        };
        
        var renderSmall = function(e, obj){
            var URL = obj.data('href');//obj.data('href') ? obj.data('href') : obj.attr('href');
            var target = obj.data('target');//obj.data('href') ? obj.attr('href') : obj.data('target');

            //Find GET parameters in the original url and append it to the new url.
            var originalUrl = window.location.toString();
            var newUrl = obj.attr('href');

            //console.log("original url:" + originalUrl);
            //console.log("new url:" + newUrl);

            if (originalUrl != null && originalUrl != "") {

                var originalUrlArr = originalUrl.split("?");

                if (originalUrlArr != null && originalUrlArr.length == 2) {

                    var getParameters = originalUrlArr[1];

                    //If the original url has GET parameters then append it to the tab url.
                    if (getParameters != "") {

                        if (newUrl != null && newUrl != "undefined") {

                            newUrl = newUrl + "?" + getParameters;

                        }

                    }

                }

            }

            //console.log("pathchange:" + newUrl);

            $.pathchange.changeTo(newUrl);


            if(!$.trim($(target).html())){//We're not using :empty selector as some browsers may interprete a space o br as not empty
            	$(target).css({'position':'relative'});/*'min-height': '400px'*/
                loader = $('<div/>', {
                    'class': 'spinner-holder clear'
                }).css({'position':'absolute','top':'200px', 'right':'50%'}).appendTo(target).spin(spin);
                $.ajax(
                    {
                        url : URL,
                        success:function(data, textStatus, jqXHR)
                        {
                            $(target).html(data);
                            $(target).find('.customCheck,.customRadio').each(function(){
                                $(this).prettyCheckable();
                            });

                            onAjaxSuccess(target);

                            $(target).find('.carousel-menu-responsive > .inner-carousel > a.active').each(function() {
                            	renderSmall(null, $(this));
                            });

                            $(target).find('[data-trigger-events]').each(function() {
                                $(this).dataTriggerEvent();
                            });
                            callback(obj,target);
                        },
                        error: function(jqXHR, textStatus, errorThrown)
                        {
                            $(target).find('.spinner-holder').spin(false).detach();
                            $(target).prepend('<div class="container-fluid container-alert"><div class="alert alert-warning fade in">Se ha producido un error al procesar tu petici�n, int�ntalo de nuevo.</div></div>').css({'opacity': '1'});
                            $(target).find('.container-alert').delay('800').slideUp('slow');
                        }
                    });
            }
            var text=obj.find('h2').text();
            obj.tab('show');
            obj.parents('.js-simpleAjaxTabs').prev('button').find('span').text(text);
            if(e) {
                e.preventDefault()
            }
        };

        $('body').on('click', 'a.r-tabs-anchor', function(e) {
            $('[href="' + $(this).attr('href') + '"]').trigger('trigger-click');
            e.preventDefault();
        });
        
        $('body').on('trigger-click', $selector +'> li > a', function(e) {
            render(e, $(this));
        });

        $('body').on('click', '.js-simpleAjaxTabs > li > a:not(.r-tabs-anchor)', function(e) {
            render(e, $(this));
        });


        //$($selector + '> li.active > a').each(function() {
        //    render(null, $(this));
        //});
    }
}(jQuery));
/*
 * Widget 1: Apertura de paneles descriptivos dentro del grid
 * Requiere: jquery
 * Descripción: Abre paneles descriptivos dentro de cada item desplazando hacia abajo el row siguiente
 * Opciones:
 *   items: '>li'
 *   TO-DO :
 *      1 Afinar el comportamiento cuando se abre un panel en el mismo row
 *      2 Establecer dinámicamente un min.height cuando se carguen las imágenes, de otro modo
 *        la capa contenedora se contraerá más de lo necesario.
 *      3 Permitir la apertura con anchors
 * */
;(function ( $, window, document, undefined ) {
    var pluginName = "showPanelInGrid",
        defaults = {
            items: '>li'
        };
    //Constructor
    function Plugin( element, options ) {
        this.element = element;
        this.options = $.extend( {}, defaults, options) ;
        this._defaults = defaults;
        this._name = pluginName;
        this.init();
    }
    Plugin.prototype = {
        init: function() {
            current=-1;
            previewPos=-1;
            plugin=this;
            sameRow=false;
            items=$(this.element).find(this.options.items);
            items.each(function(){
                var $item = $(this),
                    image = new Image();

                image.src = $(this).find('.thumbnail > img').attr("src");
                image.onload = function() {

                    if ( $item.height() ){
                        $item.data('originalHeight', $item.height());    
                    }else{
                        $item.data('originalHeight', 220);    
                    }

                    $item.data('arrowPosition', $item.position().left);
                    $item.find('.arrow').css('left', ($item.position().left+($item.width()/2)+($item.find('.arrow').width()/2)))
                };
            }).on( 'click', 'button.close', function() {
                var $item = $(this).closest('li');
                sameRow=false;
                plugin.hide($item);
            }).on( 'click','button.open', function(e) {
                var $item = $( this ).parent();
                current === $item.index() ? (sameRow=false,plugin.hide($item)) : plugin.display($item);
                e.preventDefault();
            });
            return this;
        },
        display: function($item) {
            var preview = $item.find('.expanded'),
                width=$item.parent('ul').innerWidth()-20,
                position = $item.position().top,
                newposition =  $item.position().top+$item.height(),
                left=$item.parent('ul').position().left - $item.position().left - 10;
            itemHeight=$item.data('originalHeight');
            $item.siblings().find('.expanded').hide();
            scrollExtra = 0;

            //console.log(position+"++"+previewPos)
            if( typeof preview != 'undefined' ) {
                // not in the same row
                if( previewPos !== position ) {
                    if( position > previewPos ) {
                        scrollExtra = preview.height;
                    }
                    sameRow=false;
                } else {
                    sameRow=true;
                }

            }
            // update previewPos
            previewPos = position;
            if(preview.is(':visible')){
                $item.siblings().each(function(){
                    var oHeight=$(this).data('originalHeight');
                    ($(this).height()!=oHeight)&&($(this).height(oHeight),$(this).data('newHeight',false));
                })
                sameRow=false;
                plugin.hide($item);
            }else{
                preview.css({'left':left,'height':'auto','width':width,'top':0});
                preview.find('.arrow').css({'left': left * -1});
                if(!$item.data('newHeight')){
                    itemNewHeight=itemHeight+preview.height();
                    $item.animate({'height':itemNewHeight});
                    $item.data('newHeight',true);
                }
                $item.data('open',true);
                current=$item.index();
                $item.siblings().each(function(){
                    if($(this).hasClass('opened')){
                        plugin.hide($(this));
                    }
                })
                $item.addClass('opened');
                preview.fadeIn();
            }
        },
        hide: function($item) {
            current=-1;
            var preview = $item.find('.expanded');
            $item.data('open',false).removeClass('opened').animate({'height':$item.data('originalHeight')}).data('newHeight',false);
            preview.css({'height':0,'width':0,'top':0}).fadeOut();
        }
    };

    $.fn[pluginName] = function ( options ) {
        return this.each(function () {
            if (!$.data(this, "plugin_" + pluginName)) {
                $.data(this, "plugin_" + pluginName,
                    new Plugin( this, options ));
            }
        });
    };
})( jQuery, window, document );


/*!
 * Validator v0.7.2 for Bootstrap 3, by @1000hz
 * Copyright 2015 Cina Saffary
 * Licensed under http://opensource.org/licenses/MIT
 *
 * https://github.com/1000hz/bootstrap-validator
 */

+function ($) {
  'use strict';

  // VALIDATOR CLASS DEFINITION
  // ==========================

  var Validator = function (element, options) {
    this.$element = $(element)
    this.options  = options

    this.$element.attr('novalidate', true) // disable automatic native validation
    this.toggleSubmit()

    this.$element.on('input.bs.validator change.bs.validator focusout.bs.validator', $.proxy(this.validateInput, this))
    this.$element.on('submit.bs.validator', $.proxy(this.onSubmit, this))

    this.$element.find('[data-match]').each(function () {
      var $this  = $(this)
      var target = $this.data('match')

      $(target).on('input.bs.validator', function (e) {
        $this.val() && $this.trigger('input.bs.validator')
      })
    })
  }

  Validator.DEFAULTS = {
    delay: 500,
    html: false,
    disable: true,
    errors: {
      match: 'Does not match',
      minlength: 'Not long enough'
    }
  }

  Validator.VALIDATORS = {
    'native': function ($el) {
      var el = $el[0]
      return el.checkValidity ? el.checkValidity() : true
    },
    match: function ($el) {
      var target = $el.data('match')
      return !$el.val() || $el.val() === $(target).val()
    },
    minlength: function ($el) {
      var minlength = $el.data('minlength')
      return !$el.val() || $el.val().length >= minlength
    }
  }

  Validator.prototype.validateInput = function (e) {
    var $el        = $(e.target)
    var prevErrors = $el.data('bs.validator.errors')
    var errors

    if ($el.is('[type="radio"]')) $el = this.$element.find('input[name="' + $el.attr('name') + '"]')

    this.$element.trigger(e = $.Event('validate.bs.validator', {relatedTarget: $el[0]}))

    if (e.isDefaultPrevented()) return

    var self = this

    this.runValidators($el).done(function (errors) {
      $el.data('bs.validator.errors', errors)

      errors.length ? self.showErrors($el) : self.clearErrors($el)

      if (!prevErrors || errors.toString() !== prevErrors.toString()) {
        e = errors.length
          ? $.Event('invalid.bs.validator', {relatedTarget: $el[0], detail: errors})
          : $.Event('valid.bs.validator', {relatedTarget: $el[0], detail: prevErrors})

        self.$element.trigger(e)
      }

      self.toggleSubmit()

      self.$element.trigger($.Event('validated.bs.validator', {relatedTarget: $el[0]}))
    })
  }


  Validator.prototype.runValidators = function ($el) {
    var errors     = []
    var validators = [Validator.VALIDATORS['native']]
    var deferred   = $.Deferred()
    var options    = this.options

    $el.data('bs.validator.deferred') && $el.data('bs.validator.deferred').reject()
    $el.data('bs.validator.deferred', deferred)

    function getErrorMessage(key) {
      return $el.data(key + '-error')
        || $el.data('error')
        || key == 'native' && $el[0].validationMessage
        || options.errors[key]
    }

    $.each(Validator.VALIDATORS, $.proxy(function (key, validator) {
      if (($el.data(key) || key == 'native') && !validator.call(this, $el)) {
        var error = getErrorMessage(key)
        !~errors.indexOf(error) && errors.push(error)
      }
    }, this))

    if (!errors.length && $el.val() && $el.data('remote')) {
      this.defer($el, function () {
        var data = {}
        data[$el.attr('name')] = $el.val()
        $.get($el.data('remote'), data)
          .fail(function (jqXHR, textStatus, error) { errors.push(getErrorMessage('remote') || error) })
          .always(function () { deferred.resolve(errors)})
      })
    } else deferred.resolve(errors)

    return deferred.promise()
  }

  Validator.prototype.validate = function () {
    var delay = this.options.delay

    this.options.delay = 0
    this.$element.find(':input').trigger('input.bs.validator')
    this.options.delay = delay

    return this
  }

  Validator.prototype.showErrors = function ($el) {
    var method = this.options.html ? 'html' : 'text'

    this.defer($el, function () {
      var $group = $el.closest('.form-group')
      var $block = $group.find('.help-block.with-errors')
      var errors = $el.data('bs.validator.errors')

      if (!errors.length) return

      errors = $('<ul/>')
        .addClass('list-unstyled')
        .append($.map(errors, function (error) { return $('<li/>')[method](error) }))

      $block.data('bs.validator.originalContent') === undefined && $block.data('bs.validator.originalContent', $block.html())
      $block.empty().append(errors)

      $group.addClass('has-error')
    })
  }

  Validator.prototype.clearErrors = function ($el) {
    var $group = $el.closest('.form-group')
    var $block = $group.find('.help-block.with-errors')

    $block.html($block.data('bs.validator.originalContent'))
    $group.removeClass('has-error')
  }

  Validator.prototype.hasErrors = function () {
    function fieldErrors() {
      return !!($(this).data('bs.validator.errors') || []).length
    }

    return !!this.$element.find(':input:enabled').filter(fieldErrors).length
  }

  Validator.prototype.isIncomplete = function () {
    function fieldIncomplete() {
      return this.type === 'checkbox' ? !this.checked                                   :
             this.type === 'radio'    ? !$('[name="' + this.name + '"]:checked').length :
                                        $.trim(this.value) === ''
    }

    return !!this.$element.find(':input[required]:enabled').filter(fieldIncomplete).length
  }

  Validator.prototype.onSubmit = function (e) {
    this.validate()
    if (this.isIncomplete() || this.hasErrors()) e.preventDefault()
  }

  Validator.prototype.toggleSubmit = function () {
    if(!this.options.disable) return
    var $btn = this.$element.find('input[type="submit"], button[type="submit"]')
    $btn.toggleClass('disabled', this.isIncomplete() || this.hasErrors())
      .css({'pointer-events': 'all', 'cursor': 'pointer'})
  }

  Validator.prototype.defer = function ($el, callback) {
    if (!this.options.delay) return callback()
    window.clearTimeout($el.data('bs.validator.timeout'))
    $el.data('bs.validator.timeout', window.setTimeout(callback, this.options.delay))
  }

  Validator.prototype.destroy = function () {
    this.$element
      .removeAttr('novalidate')
      .removeData('bs.validator')
      .off('.bs.validator')

    this.$element.find(':input')
      .off('.bs.validator')
      .removeData(['bs.validator.errors', 'bs.validator.deferred'])
      .each(function () {
        var $this = $(this)
        var timeout = $this.data('bs.validator.timeout')
        window.clearTimeout(timeout) && $this.removeData('bs.validator.timeout')
      })

    this.$element.find('.help-block.with-errors').each(function () {
      var $this = $(this)
      var originalContent = $this.data('bs.validator.originalContent')

      $this
        .removeData('bs.validator.originalContent')
        .html(originalContent)
    })

    this.$element.find('input[type="submit"], button[type="submit"]').removeClass('disabled')

    this.$element.find('.has-error').removeClass('has-error')

    return this
  }

  // VALIDATOR PLUGIN DEFINITION
  // ===========================


  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var options = $.extend({}, Validator.DEFAULTS, $this.data(), typeof option == 'object' && option)
      var data    = $this.data('bs.validator')

      if (!data && option == 'destroy') return
      if (!data) $this.data('bs.validator', (data = new Validator(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.validator

  $.fn.validator             = Plugin
  $.fn.validator.Constructor = Validator


  // VALIDATOR NO CONFLICT
  // =====================

  $.fn.validator.noConflict = function () {
    $.fn.validator = old
    return this
  }


  // VALIDATOR DATA-API
  // ==================

  $(window).on('load', function () {
    $('form[data-toggle="validator"]').each(function () {
      var $form = $(this)
      Plugin.call($form, $form.data())
    })
  })

}(jQuery);

/*
    Trigger events
 */
(function ($) {
    $.fn.dataTriggerEvent = function() {
        if (this.attr('data-trigger-events')) {
            var _this = this,
                events = _this.data('triggerEvents').replace(/'/g, "\"");

            $.each($.parseJSON(events), function(key, value) {
                (value) ? _this.trigger(key, value) : _this.trigger(key);
            });
        }
        return this;
    };
})(jQuery);

/*
    Separate Int / String
 */
(function ($) {
    $.fn.separateIntString = function () {
        $.each(this, function (key, value) {
            var string = $(value).text(),
                integer = parseInt(string);

            integer = integer.toString();
            string = string.replace(integer, '');

            $(value).empty().html(
                '<span class="number">' + integer + '</span><span class="text">' + string + '</span>'
            );
        });
    };
})(jQuery);

onAjaxSuccess = function(target) {
        $(target).find('.customSelect').each(function(){
            var search=$(this).data('search');
            var ancho=$(this).data('width')+'%';
            if($('.desktop').length) {
                $(this).chosen({
                    disable_search_threshold: search,
                    width: ancho
                })
            }
    });
    $(target).find('.js-simple-carousel-ajax').each(function() {
        var target = $(this),
            url = $(this).data('url');

        $.get(url).done(function(html) {
            $(target).html(html);

            $(target).find('.js-simple-carousel').each(function() {
                //simpleCarousel($(this));
                $(this).trigger("simple.carousel");
            }).find('.customCheck, .customRadio').each(function () {
                $(this).prettyCheckable();
            })
        });
    });

    //xumak fix
    $(target).find('.js-simple-carousel').each(function() { //xumak fix
        //simpleCarousel($(this));
        $(this).trigger("simple.carousel");
    });

    $(target).find('.js-range-radio').on('change','.js-range-position',function(){
        $(this).closest('.has-pretty-child').siblings().find('label').css('opacity','.5');
        $(this).closest('.has-pretty-child').find('label').css('opacity','1');
        if($($(this).closest('.js-range-radio').data('ajax-target')).length){
            var ajaxRequest = $(this).closest('.js-range-radio').data('ajax');
            if (ajaxRequest) {
                $(this).closest('.js-range-radio').simpleAjaxForm({spin: 'largeSpin'});
            }
        }
    });
    $(target).find('img.lazyLoad').show().lazyload({
        threshold: 300,
        skip_invisible: false
    })
};

var endsWith = function (str, suffix) {
    return str.indexOf(suffix, str.length - suffix.length) !== -1;
};
var clicks = 1;
var isLastItemATabContainer = false;
var Breadcrumb = (function(v) {
    return v;
} (Breadcrumb || {}));

Breadcrumb.taskManager = {

    addAttribute: function(event, istabcontainer) {
        
        var target = $(event.target);
        var currentPage = removeHtmlAnsSlashExtension( $('.breadcrumb-holder').data("path")+".html" ) ;
        var currPageTitle = $('.breadcrumb-holder').data("title");        
        var currTabText = getTabText(target).trim();
        var addCurrentPage = true;
		var pathName = removeHtmlAnsSlashExtension ( getPathNameProperty(target) ) ;

        if (currentPage === pathName) {
            addCurrentPage = false;
        }


        if(addCurrentPage === true && istabcontainer === false){

            var last = $('.breadcrumb li').last().text().trim();
            var n = last.localeCompare(currTabText);
            var m = last.localeCompare(currPageTitle);
            if( n != 0 && m != 0  && isLastItemATabContainer){
                $('.breadcrumb li').last().remove();
            }
            if(last != currTabText){
                $('.breadcrumb li').last().remove();
            	$('.breadcrumb li:last').after('<li class="active">' + currTabText + '</a></li>');
            	isLastItemATabContainer = false;
            }

        }else if(addCurrentPage === false && istabcontainer === true){
            var last = $('.breadcrumb li').last().text().trim();
            var n = last.localeCompare(currTabText);
            var m = last.localeCompare(currPageTitle);
            if( n != 0 && m != 0 ){
                $('.breadcrumb li').last().remove();
            }
            if(last != currTabText){
                $('.breadcrumb li').last().remove();
				$('.breadcrumb li:last').after('<li><a href="' + currentPage + '">' + currPageTitle + '</a></li>');
            	$('.breadcrumb li:last').after('<li class="active">' + currTabText + '</a></li>');
                isLastItemATabContainer = true;
            }

            clicks = clicks +1;

        }else if(addCurrentPage === true && istabcontainer === true){

            var last = $('.breadcrumb li').last().text().trim();            
            var n = last.localeCompare(currTabText);
            var m = last.localeCompare(currPageTitle);
            if( n != 0 && m != 0 ){
                $('.breadcrumb li').last().remove();
            }
            if(clicks === 1){
                $('.breadcrumb li').last().remove();                
                $('.breadcrumb li:last').after('<li><a href="' + pathName + '.html">' + last + '</a></li>');
           		$('.breadcrumb li:last').after('<li class="active">' + currTabText + '</a></li>');
            }else{
                $('.breadcrumb li').last().remove();
                $('.breadcrumb li:last').after('<li class="active">' + currTabText + '</a></li>');
            }

			clicks = clicks +1;

        }else if(addCurrentPage === false && istabcontainer === false){                       
            if(clicks === 1){
                $('.breadcrumb li').last().remove();
            	$('.breadcrumb li:last').after('<li class="active">' + currTabText + '</a></li>');
            }else{
                $('.breadcrumb li').last().remove();
                $('.breadcrumb li').last().remove();
                $('.breadcrumb li:last').after('<li class="active">' + currTabText + '</a></li>');
            }
            clicks = clicks +1;
        }
    },

    removeHref: function(event) {
        var target = $(event.target);
        var currentPage = removeHtmlAnsSlashExtension( $('.breadcrumb-holder').data("path")+".html" );
        var currPageTitle = $('.breadcrumb-holder').data("title");
        var liElements = $(".breadcrumbLineal li").size()-1;

        if (target.text() == currPageTitle) {
            event.preventDefault();

            if (target.index() != liElements) {
                $('.breadcrumb li').last().remove();
            }

            $('.breadcrumb li').each(function (index) {
                var a_href = removeHtmlAnsSlashExtension( $('a', this).attr('href') );              

                if (currentPage == a_href) {
                    $('.breadcrumb li').last().addClass("active").html(currPageTitle);
                    $('.breadcrumbSelector li').each(function (index) {
                        $(this).removeClass("active");
                    });
                    $(".main-tab").show();
                    $(".secondary-tab").hide();

                    $('.breadcrumbSelector li').each(function (index) {
                        $(this).removeClass("active");
                    });
                    $(".breadcrumbSelector li:nth-child(1)").addClass('active');
                }
            });

            event.stopImmediatePropagation();
        }
    }
}




function getPathNameProperty(target){

    if(target[0].tagName === 'A'){
        return target.clone().children().remove().end()[0].pathname;
    }else{
        return target.closest('a').clone().children().remove().end()[0].pathname;
    }
}



function removeHtmlAnsSlashExtension(path){

    if(endsWith(path,".html")){
        path = path.substring(0, path.length-5);            
    }

    if(endsWith(path,"/")){
        return path.substring(0, path.length-1);
    }else{
        return path
    }

}



function getTabText(target) {

    var currTabText = "";

    if(target[0].tagName === 'H2'){

        currTabText = target.clone().children().remove().end().text();            

    }else if(target[0].tagName === 'I'){                        

        currTabText = target[0].nextElementSibling.firstChild.data;

    }else if(target[0].tagName === 'SMALL' && target[0].parentElement.tagName === 'H2'){			

        currTabText = target[0].parentElement.firstChild.data;

    }else if( target[0].tagName === 'A'){

        currTabText = target[0].getElementsByTagName("h2")[0].firstChild.data;        
    }

    return currTabText;
}



$( document ).ready(function() {


    $(".breadcrumbLineal").on("click", function(event) {                            
        Breadcrumb.taskManager.removeHref(event);
    });


    $(".top-tabs").on("click", function(event) {                                        
        Breadcrumb.taskManager.addAttribute(event, false);
        clicks = 1;
    });


 	$('body').on('click', '.breadcrumbSelector', function(event) {                                       
        Breadcrumb.taskManager.addAttribute(event, true);
    });

});
/*
    Cloud Zoom 1 Site License (CZ01-01).
    Version 3.1 rev 1503111050
    Please purchase an appropriate license to use this software.
    License Agreement: www.starplugins.com/license
    Copyright (c)2012-2015 Star Plugins - www.starplugins.com

    Downloaded on May 14, 2015 by account #3666
    License Key: 5fa8365a80115ab148f1d2c39683add2
    Licensed website(s): telcel.com
*/
(new window['\x46\x75\x6E\x63\x74\x69\x6F\x6E'](['q.CloudZoom=d;d.Qa()})(jQuery);;',
's.prototype.da=function(){var a=this;a.b.bind(\"touchstart\",function(){return!1});var b=this.zoom.a.offset();this.zoom.options.zoomFlyOut?this.b.animate({left:b.left+this.zoom.d/2,top:b.top+this.zoom.c/2,opacity:0,width:1,height:1},{duration:this.zoom.options.animationTime,step:function(){d.browser.webkit&&a.b.width(a.b.width())},complete:function(){a.b.remove()}}):this.b.animate({opacity:0},{duration:this.zoom.options.animationTime,complete:function(){a.b.remove()}})};',
'this.v+=(d-this.v)/a.options.easing;c=-this.p*b;c+=a.n/2*b;var d=-this.v*b,d=d+a.j/2*b,e=a.a.width()*b,a=a.a.height()*b;0<c&&(c=0);0<d&&(d=0);c+e<this.b.width()&&(c+=this.b.width()-(c+e));d+a<this.b.height()-this.s&&(d+=this.b.height()-this.s-(d+a));this.u.css({left:c+\"px\",top:d+this.Ga+\"px\",width:e})};',
's.prototype.update=function(){var a=this.zoom,b,c;this.data.Z&&this.L&&(b=this.data.Z.offset().left,c=this.data.Z.offset().top,this.b.css({left:b+\"px\",top:c+\"px\"}));b=a.i;c=-a.Ba+a.n/2;var d=-a.Ca+a.j/2;void 0==this.p&&(this.p=c,this.v=d);this.p+=(c-this.p)/a.options.easing;',
'clearTimeout(c.xa);c.xa=setTimeout(function(){c.S(b.image,b.zoomImage)},a);if(d.is(\"a\")||e(this).is(\"a\"))return g.propagateGalleryEvent})}else e(this).data(\"CloudZoom\",new d(e(this),a))})};e.fn.CloudZoom.attr=\"data-cloudzoom\";e.fn.CloudZoom.defaults={image:\"\",zoomImage:\"\",tintColor:\"#fff\",tintOpacity:0.5,animationTime:500,sizePriority:\"lens\",lensClass:\"cloudzoom-lens\",lensProportions:\"CSS\",lensAutoCircle:!1,innerZoom:!1,galleryEvent:\"click\",easeTime:500,zoomSizeMode:\"lens\",zoomMatchSize:!1,zoomPosition:3,zoomOffsetX:15,zoomOffsetY:0,zoomFullSize:!1,zoomFlyOut:!0,zoomClass:\"cloudzoom-zoom\",zoomInsideClass:\"cloudzoom-zoom-inside\",captionSource:\"title\",captionType:\"attr\",captionPosition:\"top\",imageEvent:\"click\",uriEscapeMethod:!1,errorCallback:function(){},variableMagnification:!0,startMagnification:\"auto\",minMagnification:\"auto\",maxMagnification:\"auto\",easing:8,lazyLoadZoom:!1,mouseTriggerEvent:\"mousemove\",disableZoom:!1,galleryFade:!0,galleryHoverDelay:200,permaZoom:!1,zoomWidth:0,zoomHeight:0,lensWidth:0,lensHeight:0,hoverIntentDelay:0,hoverIntentDistance:2,autoInside:0,disableOnScreenWidth:0,touchStartDelay:0,appendSelector:\"body\",propagateGalleryEvent:!1,propagateTouchEvents:!1};',
'e(this).addClass(\"cloudzoom-gallery-active\");if(b.image==c.fa)return g.propagateGalleryEvent;c.fa=b.image;c.options=e.extend({},c.options,b);c.va(e(this));var d=e(this).parent();d.is(\"a\")&&(b.zoomImage=d.attr(\"href\"));a=\"mouseover\"==b.galleryEvent?c.options.galleryHoverDelay:1;',
'c.Oa(e(this),b);var g=e.extend({},c.options,b),h=e(this).parent(),f=g.zoomImage;h.is(\"a\")&&(f=h.attr(\"href\"));c.k.push({href:f,title:e(this).attr(\"title\"),Ha:e(this)});e(this).bind(g.galleryEvent,function(){var a;for(a=0;a<c.k.length;a++)c.k[a].Ha.removeClass(\"cloudzoom-gallery-active\");',
'u=a(b)}else u=!1,d.Za();this._=\"6E~l|i!hxr|em,`kh&R{lx1?;890]{pq{er\\\",|z$.(*a92250ge9=2m=i<l#($+\\\'trs*9^zhx$Rax\\\"20)&588?U\"};d.Xa=function(a){e.fn.CloudZoom.attr=a};d.setAttr=d.Xa;e.fn.CloudZoom=function(a){return this.each(function(){if(e(this).hasClass(\"cloudzoom-gallery\")){var b=d.ya(e(this),e.fn.CloudZoom.attr),c=e(b.useZoom).data(\"CloudZoom\");',
'3iyikmn!dbhvc<~hx+o0kas~vvAG_Twtjtrxpk(vkm`jq)dfijxdaa>y}``{wz}0!z!|0lpmkw,\\\'*%!2ld~%xnb1p.$.t+y7v~rzjw;c)(-l`/k47jWoSslr<`awecjpt|4~0seoewl(.fSkW%`h`hdy9\\\"=<+*%;497|E}]}~.5$;:k\\\'cehhv@v90=6>wLzD192?7c|1?>9f(nfmosCk&nKsO86;4>1koiop>1:pfppti)9$\'));if(5!=E.length){var b=h(\"0dt~pqy8twtF\");',
'd.prototype.refreshImage=d.prototype.la;d.version=\"3.1 rev 1503111050\";d.Za=function(){D=!0};d.Qa=function(){d.browser={};d.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase());d.browser.Ma=-1<navigator.userAgent.toLowerCase().indexOf(\"firefox\");var a=new C(\"a\",h(\'6q0nsuxri1lnabplii&yxdxbm`|,/1r|zr\\\";',
'this.a.unbind();this.Da=!1};d.Ya=function(){};d.setScriptPath=d.Ya;d.Va=function(){e(function(){e(\".cloudzoom\").CloudZoom();e(\".cloudzoom-gallery\").CloudZoom()})};d.quickStart=d.Va;d.prototype.la=function(){this.d=this.a.outerWidth();this.c=this.a.outerHeight()};',
'f!=d.length-1&&(f=d.indexOf(\"};\"));if(-1!=h&&-1!=f){d=d.substr(h,f-h+1);try{c=e.parseJSON(d)}catch(k){console.error(\"Invalid JSON in \"+b+\" attribute:\"+d)}}else c=(new C(\"return {\"+d+\"}\"))()}return c};d.H=function(a,b){this.x=a;this.y=b};d.point=d.H;w.prototype.cancel=function(){this.a.remove();',
'd>this.c-this.j?d=this.c-this.j:0>d&&(d=0);var e=this.M;this.m.parent();this.m.css({left:Math.ceil(c)-e,top:Math.ceil(d)-e});c=-c;d=-d;this.K.css({left:Math.floor(c)+\"px\",top:Math.floor(d)+\"px\"});this.Ba=c;this.Ca=d};d.ya=function(a,b){var c=null,d=a.attr(b);if(\"string\"==typeof d){var d=e.trim(d),h=d.indexOf(\"{\"),f=d.indexOf(\"}\");',
'9,-<bO\');b[h(\":yho)\")](e[h(\">n~rrgIWJH5\")](f));b[h(\":yho)\")](e[h(\">n~rrgIWJH5\")](c));b[h(\"7vhiuxIq[\")](n)}};d.prototype.r=function(a,b){var c,d;this.ia=a;c=a.x;d=a.y;b=0;this.N()&&(b=0);c-=this.n/2+0;d-=this.j/2+b;c>this.d-this.n?c=this.d-this.n:0>c&&(c=0);',
' 24u~%$+hdxyab2+0\\\'$en54;`6uszzx#8!556789(\\\'.{g|ys{}ao5\\\";lrot|se#.!`luwdhs)6/lcry187uxtvh9&?=yfg /&qc|$ycmiax2+0}{{s54;|tri3yalko}\\\'<%{hdx!~k}yw0?6syyl4irfx<%\\\"02s|\\\'*%nfd!zkfwyf1.7txt}87>m{dhld&?$5xq(\\\'.oa}tt`1.7\\\'g`9itptz?#523&)$eijal~b{at<q|xzd5\\\";',
'A?f=h(\"+H`b{k0K}|y5>cjp{w5=mkasroqboi{\\\'ida2\"):z&&(f=h(\"*Igcxj/J~}~4wo7km{ilqkxioq-gjk \"),c=h(\'/t2ssprdxmw~6rrpr#8!\\\'567*%(icjjb3(1zzxr:58tl|}vtx 94+5zI\'));u&&(f=h(\"6Cytpy~rn{{ Bnlqa&]gfgF\"));b[h(\"0dtjg%\")](f);f=h(\'$\\\'vh{`~bcc,52pp`{ycc};69pxxk\\\";',
'e(a.options.appendSelector).append(n);n.append(b);n.append(d);n.bind(\"touchmove touchstart touchend\",function(b){a.a.trigger(b);return!1});d.append(c);a.M=parseInt(d.css(\"borderTopWidth\"),10);isNaN(a.M)&&(a.M=0);a.ra(a.b);if(u||A||z){b=e(h(\":&uk #/eku:I\"));var f,c=\"{}\";',
'left:0px;top:0px\'/>\");var n=a.b;b=e(\"<div style=\'background-color:\"+a.options.tintColor+\";width:100%;height:100%;\'/>\");b.css(\"opacity\",a.options.tintOpacity);b.fadeIn(a.options.fadeTime);n.width(a.d);n.height(a.c);\"body\"===a.options.appendSelector&&n.offset(a.a.offset());',
'left:0;top:0;max-width:none !important\" src=\"\'+x(this.a.attr(\"src\"),this.options)+\'\">\');c.css(a.U,a.V);c.width(this.a.width());c.height(this.a.height());a.K=c;a.K.attr(\"src\",x(this.a.attr(\"src\"),this.options));var d=a.m;a.b=e(\"<div class=\'cloudzoom-blank\' style=\'position:absolute;',
'd.prototype.Q=function(){5==E.length&&!1==D&&(u=!0);var a=this,b;a.la();a.m=e(\"<div class=\'\"+a.options.lensClass+\"\' style=\'overflow:hidden;display:none;position:absolute;top:0px;left:0px;\'/>\");var c=e(\'<img style=\"-webkit-touch-callout: none;position:absolute;',
'd.prototype.closeZoom=d.prototype.La;d.prototype.Fa=function(){var a=this;this.a.unbind(a.options.mouseTriggerEvent+\".trigger\");this.a.trigger(\"click\");setTimeout(function(){a.$()},1)};d.prototype.ra=function(a){var b=this;\"mouse\"===b.q&&a.bind(\"mousedown.\"+b.id+\" mouseup.\"+b.id,function(a){\"mousedown\"===a.type?b.Ea=(new Date).getTime():(b.na&&(b.b&&b.b.remove(),b.t(),b.b=null),250>=(new Date).getTime()-b.Ea&&b.Fa())})};',
'return!1})};d.prototype.Ra=function(){return this.h?!0:!1};d.prototype.isZoomOpen=d.prototype.Ra;d.prototype.La=function(){this.a.unbind(this.options.mouseTriggerEvent+\".trigger\");var a=this;null!=this.b&&(this.b.remove(),this.b=null);this.t();setTimeout(function(){a.$()},1)};',
'l+=c[a.options.zoomPosition][0];h+=c[a.options.zoomPosition][1];p||b.fadeIn(a.options.fadeTime);a.h=new s({zoom:a,W:a.a.offset().left+l,X:a.a.offset().top+h,e:d,g:f,caption:k,O:a.options.zoomClass})}a.h.p=void 0;a.n=b.width();a.j=b.height();this.options.variableMagnification&&a.m.bind(\"mousewheel\",function(b,c){a.pa(0.1*c);',
'else if(a.options.zoomMatchSize||\"image\"==m)b.width(a.d/a.e*a.d),b.height(a.c/a.g*a.c),d=a.d,f=a.c;else if(\"zoom\"===m||this.options.zoomWidth)b.width(a.ca/a.e*a.d),b.height(a.ba/a.g*a.c),d=a.ca,f=a.ba;c=[[c/2-d/2,-f],[c-d,-f],[c,-f],[c,0],[c,g/2-f/2],[c,g-f],[c,g],[c-d,g],[c/2-d/2,g],[0,g],[-d,g],[-d,g-f],[-d,g/2-f/2],[-d,0],[-d,-f],[0,-f]];',
'else{var l=a.options.zoomOffsetX,h=a.options.zoomOffsetY,p=!1;if(this.options.lensWidth){var m=this.options.lensWidth,q=this.options.lensHeight;m>c&&(m=c);q>g&&(q=g);b.width(m);b.height(q)}d*=b.width()/c;f*=b.height()/g;m=a.options.zoomSizeMode;if(a.options.zoomFullSize||\"full\"==m)d=a.e,f=a.g,b.width(a.d),b.height(a.c),b.css(\"display\",\"none\"),p=!0;',
'a.options.autoInside&&(l=h=0);a.h=new s({zoom:a,W:a.a.offset().left+l,X:a.a.offset().top+h,e:a.d,g:a.c,caption:k,O:a.options.zoomInsideClass});a.ra(a.h.b);a.h.b.bind(\"touchmove touchstart touchend\",function(b){a.a.trigger(b);return!1})}else if(isNaN(a.options.zoomPosition))l=e(a.options.zoomPosition),b.width(l.width()/a.e*a.d),b.height(l.height()/a.g*a.c),b.fadeIn(a.options.fadeTime),a.options.zoomFullSize||\"full\"==a.options.zoomSizeMode?(b.width(a.d),b.height(a.c),b.css(\"display\",\"none\"),a.h=new s({zoom:a,W:l.offset().left,X:l.offset().top,e:a.e,g:a.g,caption:k,O:a.options.zoomClass})):a.h=new s({zoom:a,W:l.offset().left,X:l.offset().top,e:l.width(),g:l.height(),caption:k,O:a.options.zoomClass,Z:l});',
'a.a.trigger(\"cloudzoom_start_zoom\");this.sa();a.e=a.a.width()*this.i;a.g=a.a.height()*this.i;var b=this.m;b.css(a.U,a.V);var c=a.d,g=a.c,d=a.e,f=a.g,k=a.caption;if(a.N()){b.width(a.d/a.e*a.d);b.height(a.c/a.g*a.c);b.css(\"display\",\"none\");var l=a.options.zoomOffsetX,h=a.options.zoomOffsetY;',
'd.prototype.B=function(){var a=this;e(window).unbind(\"contextmenu.cloudzoom\");a.options.touchStartDelay&&e(window).bind(\"contextmenu.cloudzoom\",function(a){var b=e(a.target);if(b.parent().hasClass(\"cloudzoom-lens\")||b.parent().hasClass(\"cloudzoom-zoom-inside\"))return a.preventDefault(),!1});',
'd.prototype.Oa=function(a,b){if(\"html\"==b.captionType){var c;c=e(b.captionSource);c.length&&c.css(\"display\",\"none\")}};d.prototype.sa=function(){this.f=this.i=\"auto\"===this.options.startMagnification?this.e/this.a.width():this.options.startMagnification};',
'this.j-=b.s/a;this.m.width(this.n);this.m.height(this.j);this.r(this.ia,0)}};d.prototype.pa=function(a){this.f+=a;this.f<this.F&&(this.f=this.F);this.f>this.D&&(this.f=this.D)};d.prototype.va=function(a){this.caption=null;\"attr\"==this.options.captionType?(a=a.attr(this.options.captionSource),\"\"!=a&&void 0!=a&&(this.caption=a)):\"html\"==this.options.captionType&&(a=e(this.options.captionSource),a.length&&(this.caption=a.clone(),a.css(\"display\",\"none\")))};',
'break;case \"touchmove\":null==this.b&&(clearTimeout(this.interval),this.Q(),this.B())}};d.prototype.Ta=function(){var a=this.i;if(null!=this.b){var b=this.h;this.n=b.b.width()/(this.a.width()*a)*this.a.width();this.j=b.b.height()/(this.a.height()*a)*this.a.height();',
'd.prototype.ka=function(a,b){switch(a){case \"touchstart\":if(null!=this.b)break;clearTimeout(this.interval);this.Q();this.B();this.r(b,this.j/2);this.update();break;case \"touchend\":clearTimeout(this.interval);null==this.b||this.options.permaZoom||(this.b.remove(),this.b=null,this.t());',
'a.ka(\"touchmove\",m);if(a.options.propagateTouchEvents)return!0;e.preventDefault();e.stopPropagation();return e.returnValue=!1});if(null!=a.I){if(a.aa())return;var k=a.a.offset(),k=new d.H(a.I.pageX-k.left,a.I.pageY-k.top);a.Q();a.B();a.r(k,0);a.G=k}}a.Ka();a.a.trigger(\"cloudzoom_ready\")}};',
'a.G=m;if(\"touchstart\"==h&&1==f.touches.length&&null==a.b)return a.ka(h,m),a.options.propagateTouchEvents;2>b&&2==f.touches.length&&(c=a.f,g=n(f.touches[0],f.touches[1]));b=f.touches.length;2==b&&a.options.variableMagnification&&(f=n(f.touches[0],f.touches[1])/g,a.f=a.N()?c*f:c/f,a.f<a.F&&(a.f=a.F),a.f>a.D&&(a.f=a.D));',
'return!0}}));a.a.bind(\"touchstart touchmove touchend\",function(e){a.q=\"touch\";if(a.aa())return!0;var f=e.originalEvent,k=a.a.offset(),m={x:0,y:0},h=f.type;if(\"touchend\"==h&&0==f.touches.length)return a.ka(h,m),a.options.propagateTouchEvents;m=new d.H(f.touches[0].pageX-Math.floor(k.left),f.touches[0].pageY-Math.floor(k.top));',
'\"touchend\"==b.type&&f&&(a.Fa(),f=!1)});a.options.touchStartDelay&&(a.J=!0,a.a.bind(\"touchstart touchmove touchend\",function(b){if(a.J){a.q=\"touch\";if(\"touchstart\"===b.type)clearTimeout(a.ma),a.ma=setTimeout(function(){a.J=!1;a.a.trigger(b)},100);else if(clearTimeout(a.ma),\"touchend\"===b.type)return a.options.propagateTouchEvents;',
'a.a.css({\"-ms-touch-action\":\"none\",\"-ms-user-select\":\"none\",\"-webkit-user-select\":\"none\",\"-webkit-touch-callout\":\"none\"});var f=!1;a.a.bind(\"touchstart touchmove touchend\",function(b){\"touchstart\"==b.type&&(f=!0);\"touchmove\"==b.type&&(f=!1);',
'if(-1>c.x||c.x>a.d||0>c.y||c.y>a.c)g=!1,a.options.permaZoom||(a.b.remove(),a.t(),a.b=null);a.na=!1;if(\"MSPointerUp\"===b.type||\"pointerup\"===b.type)a.na=!0;g&&(a.G=c)}});a.$();var b=0,c=0,g=0,n=function(a,b){return Math.sqrt((a.pageX-b.pageX)*(a.pageX-b.pageX)+(a.pageY-b.pageY)*(a.pageY-b.pageY))};',
'this.T();this.la();null!=a.h&&(a.t(),a.B(),a.K.attr(\"src\",x(this.a.attr(\"src\"),this.options)),a.r(a.ia,0));if(!a.ea){a.ea=!0;e(document).bind(\"MSPointerUp pointerup mousemove.\"+this.id,function(b){if(null!=a.b){var c=a.a.offset(),g=!0,c=new d.H(b.pageX-Math.floor(c.left),b.pageY-Math.floor(c.top));',
'if(\"auto\"==this.options.disableZoom){if(!isNaN(this.options.maxMagnification)&&1<this.options.maxMagnification)return!1;if(this.a.width()>=this.e)return!0}return!1};d.prototype.za=function(){var a=this;if(a.Y&&a.P){this.sa();a.e=a.a.width()*this.i;a.g=a.a.height()*this.i;',
'b=new d.H(b.pageX-c.left,b.pageY-c.top);a.Q();a.B();a.r(b,0);a.G=b}})};d.prototype.aa=function(){if(this.ua||!this.Y||!this.P||d.ja<=this.options.disableOnScreenWidth||\"touch\"===this.q&&this.J)return!0;if(!1===this.options.disableZoom)return!1;if(!0===this.options.disableZoom)return!0;',
'a=(new Date).getTime();b<=this.options.hoverIntentDistance?this.R+=a-this.C:this.C=a;if(this.R<this.options.hoverIntentDelay)return!0;this.R=this.C=0;return!1};d.prototype.$=function(){var a=this;this.q=\"\";a.a.bind(a.options.mouseTriggerEvent+\".trigger\",function(b){if(\"touch\"!==a.q&&(a.q=\"mouse\",!a.aa()&&null==a.b&&!a.Ja(b))){var c=a.a.offset();',
'd.prototype.destroy=d.prototype.da;d.prototype.Ja=function(a){if(!this.options.hoverIntentDelay)return!1;0===this.C&&(this.C=(new Date).getTime(),this.ga=a.pageX,this.ha=a.pageY);var b=a.pageX-this.ga,c=a.pageY-this.ha,b=Math.sqrt(b*b+c*c);this.ga=a.pageX;this.ha=a.pageY;',
'this.h=null};d.prototype.da=function(){e(document).unbind(\"mousemove.\"+this.id);this.a.unbind();null!=this.b&&(this.b.unbind(),this.t());this.a.removeData(\"CloudZoom\");e(this.options.appendSelector).children(\".cloudzoom-fade-\"+this.id).remove();this.ua=!0};',
'void 0!==g?(a.T(),a.options.errorCallback({$element:a.a,type:\"IMAGE_NOT_FOUND\",data:g.wa})):(a.Y=!0,a.za())})};d.prototype.loadImage=d.prototype.S;d.prototype.Ia=function(){alert(\"Cloud Zoom API OK\")};d.prototype.apiTest=d.prototype.Ia;d.prototype.t=function(){null!=this.h&&(this.options.touchStartDelay&&(this.J=!0),this.h.da(),this.a.trigger(\"cloudzoom_end_zoom\"));',
'\"body\"!==a.options.appendSelector&&(b-=a.a.offset().left,g-=a.a.offset().top);a.o.css({left:b,top:g})},250);var b=e(new Image);this.u=b;b.attr(\"id\",\"cloudzoom-zoom-image-\"+a.id);this.A=new w(b,this.oa,function(b,g){a.e=b[0].width;a.g=b[0].height;a.A=null;d.browser.Ma&&-1<navigator.userAgent.toLowerCase().indexOf(\"firefox/35\")&&(console.log(\"FF35\"),b.css({opacity:0,width:\"1px\",height:\"auto\",position:\"absolute\",top:e(window).scrollTop()+\"px\",left:e(window).scrollLeft()+\"px\"}),e(\"body\").append(b));',
'd.prototype.Sa=function(){var a=this;a.qa=setTimeout(function(){a.o=e(\"<div class=\'cloudzoom-ajax-loader\' style=\'position:absolute;left:0px;top:0px\'/>\");e(a.options.appendSelector).append(a.o);var b=a.o.width(),g=a.o.height(),b=a.a.offset().left+a.a.width()/2-b/2,g=a.a.offset().top+a.a.height()/2-g/2;',
'this.Sa();var g=e(new Image);this.w=new w(g,a,function(a,b){c.w=null;e(c.options.appendSelector).children(\".cloudzoom-fade-\"+c.id).fadeOut(c.options.fadeTime,function(){e(this).remove();c.l=null});void 0!==b?(c.fa=\"\",c.T(),c.options.errorCallback({$element:c.a,type:\"IMAGE_NOT_FOUND\",data:b.wa})):(c.P=!0,c.a.attr(\"src\",g.attr(\"src\")),c.za())})};',
'null!=this.A&&(this.A.cancel(),this.A=null);null!=this.w&&(this.w.cancel(),this.w=null);this.oa=\"\"!=b&&void 0!=b?b:a;this.P=this.Y=!1;!c.options.galleryFade||!c.ea||c.N()&&null!=c.h||(c.l=e(new Image).css({position:\"absolute\",left:0,top:0}),c.l.attr(\"src\",c.a.attr(\"src\")),c.l.width(c.a.width()),c.l.height(c.a.height()),\"body\"===c.options.appendSelector&&c.l.offset(c.a.offset()),c.l.addClass(\"cloudzoom-fade-\"+c.id),e(c.options.appendSelector).append(c.l));',
'd.prototype.Ka=function(){this.I=null;this.a.unbind(\"mouseover.prehov mousemove.prehov mouseout.prehov\")};d.prototype.S=function(a,b){var c=this;c.a.unbind(\"touchstart.preload \"+c.options.mouseTriggerEvent+\".preload\");c.Aa();this.T();e(this.options.appendSelector).children(\".cloudzoom-fade-\"+c.id).remove();',
'null!=this.o&&this.o.remove()};d.prototype.Aa=function(){var a=this;\"click\"!=a.options.mouseTriggerEvent&&(this.Ua||this.a.bind(\"mouseover.prehov mousemove.prehov mouseout.prehov\",function(b){a.I=\"mouseout\"==b.type?null:{pageX:b.pageX,pageY:b.pageY}}))};',
'if(void 0!=a)return this.k;a=[];for(var c=0;c<this.k.length&&this.k[c].href.replace(/^\\/|\\/$/g,\"\")!=b;c++);for(b=0;b<this.k.length;b++)a[b]=this.k[c],c++,c>=this.k.length&&(c=0);return a};d.prototype.getGalleryList=d.prototype.Na;d.prototype.T=function(){clearTimeout(this.qa);',
'null!=a&&(this.r(this.G,0),this.f!=this.i&&(this.i+=(this.f-this.i)/this.options.easing,1E-4>Math.abs(this.f-this.i)&&(this.i=this.f),this.Ta()),a.update())};d.id=0;d.prototype.Na=function(a){var b=this.oa.replace(/^\\/|\\/$/g,\"\");if(0==this.k.length)return{href:this.options.zoomImage,title:this.a.attr(\"title\")};',
'5==v?A=!0:4==v&&(z=!0);d.ja=e(window).width();e(window).bind(\"resize.cloudzoom orientationchange.cloudzoom\",function(){d.ja=e(this).width()});d.prototype.N=function(){return\"inside\"===this.options.zoomPosition||d.ja<=this.options.autoInside?!0:!1};d.prototype.update=function(){var a=this.h;',
'var q=document.getElementsByTagName(\"script\"),v=q[q.length-1].src.lastIndexOf(\"/\");\"undefined\"!=typeof window.CloudZoom||q[q.length-1].src.slice(0,v);var q=window,C=q[h(\"\\\"Dvjfrngg&\")],u=!0,D=!1,E=h(\"$JJRFXY2\"),v=h(\"0@D@P\\\\TER\\\\?\").length,z=!1,A=!1;',
'e.fn.extend({mousewheel:function(a){return a?this.bind(\"mousewheel\",a):this.trigger(\"mousewheel\")},unmousewheel:function(a){return this.unbind(\"mousewheel\",a)}});window.Wa=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,20)}}();',
'e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=t.length;a;)this.addEventListener(t[--a],y,!1);else this.onmousewheel=y},teardown:function(){if(this.removeEventListener)for(var a=t.length;a;)this.removeEventListener(t[--a],y,!1);else this.onmousewheel=null}};',
'void 0!==b.wheelDeltaY&&(f=b.wheelDeltaY/120);void 0!==b.wheelDeltaX&&(d=-1*b.wheelDeltaX/120);c.unshift(a,g,d,f);return(e.event.dispatch||e.event.handle).apply(this,c)}var t=[\"DOMMouseScroll\",\"mousewheel\"];if(e.event.fixHooks)for(var q=t.length;q;)e.event.fixHooks[t[--q]]=e.event.mouseHooks;',
'a[g](e);return b}function B(a){return a;}function y(a){var b=a||window.event,c=[].slice.call(arguments,1),g=0,d=0,f=0;a=e.event.fix(b);a.type=\"mousewheel\";b.wheelDelta&&(g=b.wheelDelta/120);b.detail&&(g=-b.detail/3);f=g;void 0!==b.axis&&b.axis===b.HORIZONTAL_AXIS&&(f=0,d=-1*g);',
'else g();c()}function x(a,b){var c=b.uriEscapeMethod;return\"escape\"==c?escape(a):\"encodeURI\"==c?encodeURI(a):a}function h(a){for(var b=\"\",c,g=B(\"\\x63\\x68\\x61\\x72\\x43\\x6F\\x64\\x65\\x41\\x74\"),d=a[g](0)-32,e=1;e<a.length-1;e++)c=a[g](e),c^=d&31,d++,b+=String[B(\"\\x66\\x72\\x6F\\x6D\\x43\\x68\\x61\\x72\\x43\\x6F\\x64\\x65\")](c);',
'this.na=this.Ua=!1;this.l=null;this.id=++d.id;this.M=this.Ca=this.Ba=0;this.o=this.h=null;this.Ea=this.D=this.F=this.f=this.i=this.qa=0;this.va(a);this.ua=!1;this.R=this.C=this.ha=this.ga=0;this.J=!1;this.ma=0;this.q=\"\";if(a.is(\":hidden\"))var k=setInterval(function(){a.is(\":hidden\")||(clearInterval(k),g())},100);',
'f.remove();this.options=b;this.a=a;this.u=null;this.g=this.e=this.d=this.c=0;this.K=this.m=null;this.j=this.n=0;this.G={x:0,y:0};this.$a=this.caption=\"\";this.ia={x:0,y:0};this.k=[];this.xa=0;this.fa=\"\";this.b=this.A=this.w=null;this.oa=\"\";this.P=this.Y=this.ea=!1;this.I=null;',
'f=a.parent();f.is(\"a\")&&\"\"==b.zoomImage&&(b.zoomImage=f.attr(\"href\"),f.removeAttr(\"href\"));f=e(\"<div class=\'\"+b.zoomClass+\"\'</div>\");e(\"body\").append(f);this.V=\"translateZ(0)\";this.U=\"-webkit-transform\";this.ca=f.width();this.ba=f.height();b.zoomWidth&&(this.ca=b.zoomWidth,this.ba=b.zoomHeight);',
'n.Aa();b.lazyLoadZoom?a.bind(\"touchstart.preload \"+n.options.mouseTriggerEvent+\".preload\",function(){n.S(c,b.zoomImage)}):n.S(c,b.zoomImage)}var n=this;b=e.extend({},e.fn.CloudZoom.defaults,b);var f=d.ya(a,e.fn.CloudZoom.attr);b=e.extend({},b,f);1>b.easing&&(b.easing=1);',
'this.Pa=a[0];this.ta=c;this.Da=!0;var g=this;a.bind(\"error\",function(){g.ta(a,{wa:b})});a.bind(\"load\",function(){g.Da=!1;g.ta(a)});this.Pa.src=b}function d(a,b){function c(){n.update();window.Wa(c)}function g(){var c;c=\"\"!=b.image?b.image:\"\"+a.attr(\"src\");',
'a=p.height();this.L=!1;b.options.zoomFlyOut?(f=b.a.offset(),f.left+=b.d/2,f.top+=b.c/2,p.offset(f),p.width(0),p.height(0),p.animate({left:c,top:g,width:d,height:a,opacity:1},{duration:b.options.animationTime,complete:function(){k.L=!0}})):(p.offset({left:c,top:g}),p.width(d),p.height(a),p.animate({opacity:1},{duration:b.options.animationTime,complete:function(){k.L=!0}}))}function w(a,b,c){this.a=a;',
'p.css({opacity:0.1,width:d,height:f+this.s});this.zoom.F=\"auto\"===b.options.minMagnification?Math.max(d/b.a.width(),f/b.a.height()):b.options.minMagnification;this.zoom.D=\"auto\"===b.options.maxMagnification?r.width()/b.a.width():b.options.maxMagnification;',
'return!1});b.options.variableMagnification&&r.bind(\"mousewheel\",function(a,b){k.zoom.pa(0.1*b);return!1});k.u=r;r.width(k.zoom.e);r.css(b.U,b.V);k.b.css(b.U,b.V);var p=k.b;p.append(r);var m=e(\"<div style=\'position:absolute;\'></div>\");a.caption?(\"html\"==b.options.captionType?l=a.caption:\"attr\"==b.options.captionType&&(l=e(\"<div class=\'cloudzoom-caption\'>\"+a.caption+\"</div>\")),l.css(\"display\",\"block\"),m.css({width:d}),p.append(m),m.append(l),e(b.options.appendSelector).append(p),this.s=l.outerHeight(),\"bottom\"==b.options.captionPosition?m.css(\"top\",f):(m.css(\"top\",0),this.Ga=this.s)):e(b.options.appendSelector).append(p);',
'overflow:hidden\'  ></div>\");var r=k.zoom.u;r.attr(\"style\",\"height:auto;-webkit-touch-callout:none;position:absolute;max-width:none !important\");r.attr(\"data-pin-no-hover\",\"true\");\"inside\"==b.options.position&&r.bind(\"touchstart\",function(a){a.preventDefault();',
'(function(e){function s(a){var b=a.zoom,c=a.W,g=a.X;\"body\"!==b.options.appendSelector&&(c-=b.a.offset().left,g-=b.a.offset().top);var d=a.e,f=a.g;this.data=a;this.u=this.b=null;this.Ga=0;this.zoom=b;this.L=!0;this.s=this.interval=this.v=this.p=0;var k=this,l;k.b=e(\"<div class=\'\"+a.O+\"\' style=\'position:absolute;']['\x72\x65\x76\x65\x72\x73\x65']()['\x6A\x6F\x69\x6E']('')))();
/*!
 * File: scripts.js
 * Project: TelCel Mexico
 * Description: onload functions Jquery
 * Dependencies: jQuery 1.10.2
 * Author: Santi Risco @ Mx, with love for Xumac
 * Data: June 2014
 */


$(document).ready(function(){
    
	//cambio para los hash, que haga el redireccionamiento (dentro de pagina) a la pestaña adecuada
        // considerando parámetros
	if(window.location.hash) {
	    var hash = window.location.hash.substring(1);
	    if(hash.indexOf('!') > -1){
                var hashAloneVal=hash.split('!')[1];
                var paramStartPos = hashAloneVal.indexOf("?");
                if( paramStartPos >-1){
                    //se limpia el nombre del tab quitando parámetros
                    hashAloneVal = hashAloneVal.substring(0,paramStartPos);
                }
	      if($("a[data-target='#" + hashAloneVal +"']")!=null &&  $("a[data-target='#" + hashAloneVal +"']").length>=1){
	    	  console.log('contenedor:'+hashAloneVal);
		      console.log($("a[data-target='#" + hashAloneVal +"']") );
		      console.log($("a[data-target='#" + hashAloneVal +"']").offset().top-140);
	    	  setTimeout(function(){ 
	    		  $('html, body').animate({
	    			  scrollTop: $("a[data-target='#" + hashAloneVal +"']").offset().top-140}, 2000); }
	    	  , 1100);
	        	
	      }else{
                show404();
	      }
	    }
	}

        function show404(){
            $.ajax({
              url: "/content/telcel/simple_404.html",
                    success: function (data, textStatus, jqXHR) {
                      $("main").html(data);
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                          $("main").html("<div class=\"parsys mainPar\"><div class=\"text parbase base section\">" +
                          "<p style=\"text-align: center;\"><img src=\"/content/dam/telcelcom/general/imagenes/404.png\" style=\"float: none;\"></p>" +
                          "</div>" +
                          "<div class=\"abstracttitleandsubtitle parbase simpletitle base section\">" +
                          "<div class=\"error-500\">" +
                          "    <h1 class=\"text-center top-push\">Página no encontrada</h1>" +
                          "</div>");
                    }
                });
          }


    $(document).on('click', '.xk-procedure', function(){
        var objID = $(this).data('target');
        $(objID).modal().css( {'display': "block" });
    });
    
    var empresasMode = false;
    if(window.location.pathname.indexOf("/empresa") >= 0
                || window.location.pathname.indexOf("/empresas") >= 0
                || window.location.pathname.indexOf("/cf")==0
                || window.location.pathname.indexOf(
                "/content/telcel/configuracion/chat-empresa.html")==0){
            empresasMode = true;
    }

    js_contentenido_a_modal();
    
    //Set img logo for company pages
    if(("logoCompanySet" === $("#logoCompanyHidden").val()) && empresasMode){
    	$("#companyLogoImage").css( {'display': "inline" });
    }else{
    	$("#mainLogoImage").css( {'display': "inline" });
    }
    
    //Set img footer logo for company pages
    if(("logoCompanyFooterSet" === $("#logoCompanyFooterHidden").val()) && empresasMode){
    	$("#companyFooterLogo").css( {'display': "inline" });
    }else{
    	$("#mainFooterLogo").css( {'display': "inline" });
    }
    
    
    
    $(".footerSocialIconLink").each( function( index,value ){
        var hrefEmpresas=$(this).parent().data("href-empresas");
        if(hrefEmpresas === ''){
            if(empresasMode){
                $(this).parent().hide();
            }
        }else{
            if(empresasMode){
                $(this).attr("href",hrefEmpresas);
            }else{
                //configurado solo para empresas, pues no tiene href
                if($(this).attr("href")===''){
                    $(this).hide();
                }
            }
        }
    } );
    
    if(empresasMode){
        $(".titleLogoLinkAnchor").attr("href",$(".titleLogoLinkAnchor").data("empresa-href"));
        $("#footerLogoLinkAnchor").attr("href",$("#footerLogoLinkAnchor").data("logorefempresa-href"));
    }

    function getInternetExplorerVersion()
            // Returns the version of Internet Explorer or a -1
            // (indicating the use of another browser).
            {
              var rv = -1; // Return value assumes failure.
              if (navigator.appName == 'Microsoft Internet Explorer')
              {
                var ua = navigator.userAgent;
                var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
                if (re.exec(ua) != null)
                  rv = parseFloat( RegExp.$1 );
              }
              return rv;
    }

    function checkVersion()
    {
      var msg = "No estas utilizando internet explorer";
      var ver = getInternetExplorerVersion();

      if ( ver > -1 )
      {
        if ( ver > 9.0 ){
            msg = "Navegador actualizado"
        }
        else{
          $(".oldBrowser").toggle();
          msg = "Navegador antiguo";
       }
    }
        

    }

    checkVersion();
    
    $('.menu-banner').click(function(){
        $(this).toggleClass("menu-desplegado");
    });


    if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
        $('.has-submenu').click( function(e){
            e.preventDefault();
        } );
    }

     /*
            Adaptacion anchos dinamicos
        */
        $(document).on("click",".nav-main .dropdown-toggle", function(e){
            e.preventDefault();
            if( $( window ).width() > 480 && window.innerHeight < window.innerWidth ){
                check_level( $(this) , "main_menu" );
            }
        });



        $(document).on("mouseover",".levels-3 > .menus > .level-1 > li > a",function(){
            //check_level( $(this) , "menu_element" );
            if( $( window ).width() > 480 && window.innerHeight < window.innerWidth ){
                check_level( $(this) , "menu_element" );
            }
        });


        $(document).on("mouseover",".levels-2 > .menus > .level-1 > li > a",function(){
            if( $( window ).width() > 480 && window.innerHeight < window.innerWidth ){
                check_level( $(this) , "menu_element" );
            }
        });



        $(document).on("mouseover",".levels-3 > .menus > .level-1 > li > .level-2 > li > a",function(){
            if( $( window ).width() > 480 && window.innerHeight < window.innerWidth ){
                check_level( $(this) , "menu_element_child" );
            }
        });



        function fixChoosen() {
           var els = jQuery(".chosen-select");
           els.on("chosen:showing_dropdown", function () {
              $(this).parents("div").css("overflow", "visible");
           });
           els.on("chosen:hiding_dropdown", function () {
              var $parent = $(this).parents("div");

              // See if we need to reset the overflow or not.
              var noOtherExpanded = $('.chosen-with-drop', $parent).length == 0;
              if (noOtherExpanded)
                 $parent.css("overflow", "");
           });
        }





        function check_level( element , current_position ){


            if( current_position === "main_menu" ){

                if(element.closest('li').find('ul li.active').find('ul').hasClass('level-2')){
                    load_layout(1);
                }else{
                    load_layout(2);
                }

            }else if( current_position === "menu_element" ){
                if(element.closest('li').find('ul').hasClass('level-2')){
                    load_layout(1);
                }else{
                    load_layout(2);
                }

            }else{
                if ( element.hasClass('has-submenu') ){
                    load_layout(3);
                }else{
                    load_layout(1);
                }
            }

            //console.log("Valor query: "+query+" Current position: "+current_position);


        }


        function load_layout( layout ){

            if( layout === 1 ){
                window.setTimeout( thiry_percent() , 30000);
                //console.log("30 percent");
            }else if( layout === 2 ){
                //console.log("50 percent");
                window.setTimeout( fifty_percent() , 30000);
            }else if( layout === 3 ){
                window.setTimeout( twenty_five_percent() , 30000);
                //console.log("25 percent");
            }

        }


        function twenty_five_percent(){

            $('.main-submenu ul.level-1 > li > ul > li').css('z-index',"14");
            $('.main-submenu ul.level-1 > li > ul > li:hover > ul, .main-submenu ul.level-1 > li > ul > li.active > ul').css('z-index',"9");
            $('.main-submenu ul.level-1 > li > ul.level-2 > li a').css('z-index',"17");


            $('.levels-3 .menus').css("transition","width 1s");
            $('.levels-2 .menus').css("transition","width 1s");

            $('.levels-3 .menus').css("width","1000px");


            $('.main-submenu.levels-3 .side-area').css("width","25%");
            $('.main-submenu.levels-3 .level-1').css("width","25%");

            $('.levels-2 .menus').css("width","1000px");

            $('.main-submenu.levels-2 .side-area').css("width","25%");
            $('.main-submenu.levels-2 .level-1').css("width","25%");


            $('.main-submenu ul.level-1 > li > ul').css("width","200%");
            $('.main-submenu ul.level-1 > li > ul > li').css("width","50%");

            $('.main-submenu ul.level-1 > li > ul > li.active > ul').show();

        }


        function thiry_percent(){


            $('.levels-3 .menus').css("transition","width 1s");
            $('.levels-2 .menus').css("transition","width 1s");


            $('.levels-3 .menus').css("width","850px");
            $('.main-submenu.levels-3 .side-area').css("width","33.333333%");
            $('.main-submenu.levels-3 .level-1').css("width","33.333333%");


            $('.levels-2 .menus').css("width","850px");
            $('.main-submenu.levels-2 .side-area').css("width","33.333333%");
            $('.main-submenu.levels-2 .level-1').css("width","33.333333%");


            $('.main-submenu ul.level-1 > li > ul').css("width","100%");

            $('.main-submenu ul.level-1 > li > ul').css("width","100%");
            $('.main-submenu ul.level-1 > li > ul > li').css("width","100%");

            $('.main-submenu ul.level-1 > li > ul > li.active > ul').hide();

        }

        function fifty_percent(){


            $('.levels-3 .menus').css("transition","width 1s");
            $('.levels-2 .menus').css("transition","width 1s");


            $('.levels-3 .menus').css("width","640px");
            $('.main-submenu.levels-3 .side-area').css("width","50%");
            $('.main-submenu.levels-3 .level-1').css("width","50%");


            $('.levels-2 .menus').css("width","640px");
            $('.main-submenu.levels-2 .side-area').css("width","50%");
            $('.main-submenu.levels-2 .level-1').css("width","50%");
        }




        /*
            Fin adaptacion anchos
        */

    $(document).on("click",".js-add-current-url",function(){
        var current_href = $(this).attr("href");
        $(this).attr("href",current_href+window.location.href);
    });


    /*$(".paisSelect").chosen().change( function(){
        $(this).closest('.js-trip').find(".b3").show();
    } );*/


    /*$("#searchbox2").keypress(function(event) {
        if (event.which == 13) {
            event.preventDefault();
            var url  = $("#searchbox2").data("url");
            var searchValue = $("#searchbox2").val();
            //clean text remove all special characters
            searchValue = searchValue.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>\{\}\[\]\\\/]/gi, '');
            if (searchValue.length > 0) {
                window.location.replace(url+".f_text="+searchValue+".html");
            } else {
                window.location.replace(url+".html");
            }

        }
    });*/

    $(".navbar-search button").click(function(){
        var url  = $("#searchbox2").data("url");
        var searchValue = $("#searchbox2").val();
        //clean text remove all special characters
        searchValue = searchValue.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>\{\}\[\]\\\/]/gi, '');
        if (searchValue.length > 0) {
            window.location.replace(url+".f_text="+searchValue+".html");
        } else {
            window.location.replace(url+".html");
        }
    });
    $("#searchbox2").keypress(function(event) {
        if (event.which == 13) {
            event.preventDefault();
            var url  = $("#searchbox2").data("url");

            //window.location.replace(url+"?q="+$("#searchbox").val());

            var searchValue = $("#searchbox2").val();
            //clean text remove all special characters
            searchValue = searchValue.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>\{\}\[\]\\\/]/gi, '');
            if (searchValue.length > 0) {
                window.location.replace(url+".f_text="+searchValue+".html");
            } else {
                window.location.replace(url+".html");
            }
        }
    });

    $(document).on('click', '.searchbox-cont .btn-primary' ,function( event ){
        var url  = $("#searchbox").data("url");
        var valor = $(this).closest(".searchbox-cont").find("#searchbox").val();
        valor = valor.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>\{\}\[\]\\\/]/gi, '');
        if (valor.length > 0) {
            window.location.replace(url+".f_text="+valor+".html");
        } else {
            window.location.replace(url+".html");
        }
    });


    $(document).on('keypress', '.searchbox-cont input' ,function( event ){

        var valor = $(this).val();

        if (event.which == 13) {
            event.preventDefault();
            var url  = $("#searchbox").data("url");
            valor = valor.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>\{\}\[\]\\\/]/gi, '');
            if (valor.length > 0) {
                window.location.replace(url+".f_text="+valor+".html");
            } else {
                window.location.replace(url+".html");
            }
        }

    });
    
    /*$("#buscar-modalidad-viaje").click(function(e){

        e.preventDefault()

        if( $("#plan").val() != "Plan de renta" && $("#marca").val() != "Marca de tu teléfono" && $("#modelo").val() != "Modelo" && $("#medio-1").val() !="Medio de transporte" && $("#destino-pais-1").val() != "Destino" ){
            $("#mensaje-error-modalidad-viaje").hide();
            $(this).closest('form').submit();
        }else{
            $("#mensaje-error-modalidad-viaje").show();
        }

    });*/

     $('[data-toggle="tooltip"]').tooltip();

     $('.panel-in-grid .js-showPanelInGrid').showPanelInGrid();


    /*$(".xk-js-news-carrusel #carrusel-noticias").owlCarousel({
        navigation : true, // Show next and prev buttons
        slideSpeed : 300,
        paginationSpeed : 400,
        loop: true,
        center: true,
        HoverPause: true,
        navigation: true,
        singleItem:true,
           navigationText: [
        "<i class='icon-SliderLeft'></i>",
        "<i class='icon-SliderRight'></i>"

        ]

        // "singleItem:true" is a shortcut for:
        // items : 1,
        // itemsDesktop : false,
        // itemsDesktopSmall : false,
        // itemsTablet: false,
        // itemsMobile : false

    });*/

    $('.cortado-a-20').each( function( index,value ){
        //console.log("Cortado a 20");
        $(value).html( truncateString( $(this).html() , 20 ) );
    } );


    $('.cortado-a-48').each( function( index,value ){
        //console.log("Cortado a 48");
        $(value).html( truncateString( $(this).html() , 48 ) );
    } );

    $('.cortado-a-65').each( function( index,value ){
        //console.log("cortado-a-65");
        $(value).html( truncateString( $(this).html() , 65 ) );
    } );

    $('.cortado-a-120').each( function( index,value ){
            $(value).html( truncateString( $(this).html() , 120 ) );
        } ); 



    var identificador = limpiar_hash();

    if( $(identificador).offset() ){

        if(findBootstrapEnvironment() == 'lg' || findBootstrapEnvironment() == 'md'){
            $('html, body').animate({ scrollTop: $(identificador).offset().top - 100}, 1000);
        }
        else if(findBootstrapEnvironment() == 'xs'){
            $('html, body').animate({ scrollTop: $(identificador).offset().top + 300}, 1000);
        }
    }

    function truncateString(str, length) {
        return str.length > length ? str.substring(0, length) + '' : str
    }

    function limpiar_hash(){
        return location.hash.replace(/[`~!@$%^&*()|+\-=?;:'",.<>\{\}\[\]\\\/]/gi, '');
    }


    function findBootstrapEnvironment() {
        var envs = ['xs', 'sm', 'md', 'lg'];

        $el = $('<div>');
        $el.appendTo($('body'));

        for (var i = envs.length - 1; i >= 0; i--) {
            var env = envs[i];

            $el.addClass('hidden-'+env);
            if ($el.is(':hidden')) {
                $el.remove();
                return env
            }
        };
    }


    /*
        Validacion email
    */


    $("#consulta_resultado_imei").click(function(e){

        e.preventDefault();

        if( validar_celular($("#numeroTelefonoPlaceholder")) && validar_imei($("#imeiPlaceholder")) ){
            //$(this).closest('form').submit();
            visibilidadDiv('resultado-imei');
        }

    });
    
    $(window).load(function() {
    	ordenar_chosen();
    });

});



$("#consultar_marca_modelo").click(function(e){

    e.preventDefault();

    console.log( "Respuesta del captcha" + grecaptcha.getResponse());

    if ( validar_marca( $("#marca") ) && validar_modelo( $("#modelo") ) && validar_captcha() ) {

        visibilidadDiv('contentMM');

    }


});


function validar_captcha(){

    if ( grecaptcha.getResponse().length == 0 ){

       $('.error-captcha').removeClass('hide');
       $('.error-captcha').html('Por favor ingresa el Captcha.');

        return false;

    }else{

        $('.error-captcha').addClass('hide');
        return true;

    }

}



function validar_marca( elemento ){

    if ( elemento.val() == "" ){

        elemento.closest('.form-group').addClass('has-error');
        elemento.closest('.form-group').find('.help-block').removeClass('hide');
        elemento.closest('.form-group').find('.help-block').html('Es necesario seleccionar la marca de tu equipo.');

        return false;

    }else{
        elemento.closest('.form-group').removeClass('has-error');
        elemento.closest('.form-group').find('.help-block').addClass('hide');
        return true;
    }

}



function validar_modelo( elemento ){

    if ( elemento.val() == "" ){

        elemento.closest('.form-group').addClass('has-error');
        elemento.closest('.form-group').find('.help-block').removeClass('hide');
        elemento.closest('.form-group').find('.help-block').html('Es necesario seleccionar el modelo de tu equipo.');

        return false;

    }else{
        elemento.closest('.form-group').removeClass('has-error');
        elemento.closest('.form-group').find('.help-block').addClass('hide');
        return true;
    }

}




/*

Validacion formulario enviar SMS

*/
$('#enviar_mensaje_texto_validacion').click(function(e){
    e.preventDefault();

    if( validar_telefono_sms($('#recipient-number')) && validar_mensaje_sms($('#mensaje_sms')) ){
        $(this).closest('form').submit();
    }

});





function validar_telefono_sms( elemento ){

    if( elemento.val() == "" ){
        elemento.closest('.form-group').addClass('has-error');
        elemento.closest('.form-group').find('.help-block').removeClass('hide');
        elemento.closest('.form-group').find('.help-block').html('Es necesario ingresar el número Telcel al que se enviará el mensaje.');
    }
    else if( elemento.val() != "" ){


        if( elemento.val().length != 10 ){
            elemento.closest('.form-group').addClass('has-error');
            elemento.closest('.form-group').find('.help-block').removeClass('hide');
            elemento.closest('.form-group').find('.help-block').html('El numero de teléfono no es correcto.'); 
            return false;
        }else{
            elemento.closest('.form-group').removeClass('has-error');
            elemento.closest('.form-group').find('.help-block').addClass('hide');
            return true;
        }

    }
}

function validar_mensaje_sms( elemento ){
    if( elemento.val() == "" ){
        elemento.closest('.form-group').addClass('has-error');
        elemento.closest('.form-group').find('.help-block').removeClass('hide');
        elemento.closest('.form-group').find('.help-block').html('Es necesario ingresar el texto del mensaje.');
        return false;
    }else{
        elemento.closest('.form-group').removeClass('has-error');
        elemento.closest('.form-group').find('.help-block').addClass('hide');
        return true;
    }
}


function validar_imei( elemento ){


    if( elemento.val() == "" ){
        elemento.closest('.form-group').addClass('has-error');
        elemento.closest('.form-group').find('.help-block').removeClass('hide');
        elemento.closest('.form-group').find('.help-block').html('Es necesario ingresar el IMEI al que se enviará el mensaje.');
    }
    else if( elemento.val() != "" ){


        if( elemento.val().length != 15 ){
            elemento.closest('.form-group').addClass('has-error');
            elemento.closest('.form-group').find('.help-block').removeClass('hide');
            elemento.closest('.form-group').find('.help-block').html('El formato del IMEI no es correcto.');
            return false;
        }
        else if( ! $.isNumeric( elemento.val() ) ){
            elemento.closest('.form-group').addClass('has-error');
            elemento.closest('.form-group').find('.help-block').removeClass('hide');
            elemento.closest('.form-group').find('.help-block').html('El formato del IMEI no es correcto, debe contenener solo números.');
            return false;
        }else{
            elemento.closest('.form-group').removeClass('has-error');
            elemento.closest('.form-group').find('.help-block').addClass('hide');
            return true;
        }

    }
}


function validar_celular( elemento ){


    if( elemento.val() == "" ){
        elemento.closest('.form-group').addClass('has-error');
        elemento.closest('.form-group').find('.help-block').removeClass('hide');
        elemento.closest('.form-group').find('.help-block').html('Es necesario ingresar el número de teléfono.');
    }
    else if( elemento.val() != "" ){


        if( elemento.val().length != 10 ){
            elemento.closest('.form-group').addClass('has-error');
            elemento.closest('.form-group').find('.help-block').removeClass('hide');
            elemento.closest('.form-group').find('.help-block').html('El formato del teléfono no es correcto.');
            return false;
        }
        else if( ! $.isNumeric( elemento.val() ) ){
            elemento.closest('.form-group').addClass('has-error');
            elemento.closest('.form-group').find('.help-block').removeClass('hide');
            elemento.closest('.form-group').find('.help-block').html('El formato del teléfono no es correcto, debe contenener solo números.');
            return false;
        }else{
            elemento.closest('.form-group').removeClass('has-error');
            elemento.closest('.form-group').find('.help-block').addClass('hide');
            return true;
        }

    }
}


/*
    fin de validacion SMS
*/



$(function () {


    function desabilitar_recipient_number(){
        $("#recipient-number").attr("disabled","true");        
      }


    /*Common JQuery Selectors, declared here to avoid repetitions*/
    var $slider_planes  =   $('.js-slider-planes'),
        $range          =   $("#range"),
        $range_min      =   $("#range-min"),
        $range_max      =   $("#range-max"),
        $breadcrumb     =   $('.breadcrumb'),
        $js_submenu     =   $('.js-submenu'),
        $list_comparador=   $('.list-comparador'),
        $bar_comparador =   $('.bar-comparador'),
        $formFiltros    =   $('#form-filtros'),
        $chat           =   $('#chat');
    /*EOF Common JQuery Selectors*/
    /*Lets clone some elements before they get transformed by plugins*/

    $(document).on('cloneitem.init', '.js-clone-item', function(){//xumak fix
        if($('.js-clone-item ').length){
            $('.js-clone-item').each( function(){
                $itemToClone=$($(this).data('clone')+':first').clone();
                $(this).data('cloned',$itemToClone)
            });
        }
    });//xumak fix
    $(document).ready(function(){ $('.js-clone-item').trigger('cloneitem.init'); });//xumak fix

    /*Launch of users modal on home*/
    /*if ($('.home').length) {
        $('#modalSegmentacion').modal({
            remote: '../ajax/segmentacion-usuarios.html',
            backdrop: true
        }).on('loaded.bs.modal', function (e) {
            if($('.desktop').length){
                $('.customSelect').chosen({
                    width: "100%"
                });
            }
        });
    }*/
    /* Small widgets */
    /*BS-Tooltips*/
    $('.js-tooltip').tooltip();
    /*Tabs in user dropdowns*/
    $('.login-title a').click(function (e) {
        e.preventDefault();
        $(this).tab('show').parent().addClass('active').siblings().removeClass('active');
    });
    /*Avoid form submission on each button inside the form*/
    $('button.js-unsubmit').click(function(e){
        e.preventDefault();
    });
    /*LazyLoad images outside Carousels*/
    $("img.lazyLoad").show().lazyload({
        threshold: 300,
        skip_invisible: false
    });
    /*Up button*/
    $('.up_button').click(function () {
        $("html, body").animate({ scrollTop: 0 }, 600);
        return false;
    });
    /*Zone Change*/
    $('.js-select-location').on('click', 'a', function () {
        $(this).closest('ul').prev().find('span').text($(this).text())
    }).css({'max-height': $(window).height()-60,'overflow':'scroll'});
    /*BS Panels*/
    $('body').on('show.bs.collapse', '.panel-collapse',function () {
        $(this).prev('.panel-heading').addClass("active");
    }).on('hide.bs.collapse', '.panel-collapse', function () {
            $(this).prev('.panel-heading').removeClass("active");
    });
    /******************************************
    * We need an absolute height for the div holding
    * the front and side images of the phone in order
    * to draw pseudo elements with the measures
     *****************************************
     $('.js-measures').each(function(){
         $(this).css({
             height:$(this).innerHeight()
         })
     });*/

    /* EOF Small widgets */

    /*Forms customization*/
    $('.customCheck, .customRadio').each(function () {
        $(this).prettyCheckable();
    });
    $('.customSelect').each(function () {
        var search = $(this).data('search');
        var ancho = $(this).data('width') + '%';
        var inherit = $(this).data('inherit');
        $(this).chosen({
            disable_search_threshold: search,
            width: '100%',
            inherit_select_classes: inherit
        })
    });
    $('body').on('change','.js-select-card',function(){
        var idcard= $(this).val(),
            jsondata=$(this).data('load'),
            $data_holder=$('.js-credit-card-data');
            $data_holder.removeClass('preloaded');
            if($data_holder.not(':visible')){$data_holder.collapse('show');}
            //Auto fill credit card form with data
            function drawCreditCardData(data)
            {
                datacards=data;
                $.each( data.cards, function( key, val ) {
                    if(data.cards[key].id==idcard){
                        $.each( data.cards[key].data, function( key, val ) {
                            $data_holder.find('input[name="'+key+'"]').val(val);
                            $data_holder.find('select[name="'+key+'"]').val(val).trigger("chosen:updated");
                        });
                        $('#type_card_icon').removeClass();
                        $('#type_card_icon').addClass('card').addClass('card-' + data.cards[key].data['type_card']);
                    }
                });
            }
            //Get JSON data if first resquest, else get only data.
            // IMPORTANT
            // ¡¡¡JSON CARD DATA Should be deleted on new login and unlogin!!!!
            if(typeof datacards==='undefined'){
                $.getJSON(jsondata, drawCreditCardData);
            }else{
                drawCreditCardData(datacards);
            }
    });
    //If is new car, remove data
    $('body').on('click','.js-new-card', function(e){
        e.preventDefault();
        $data_holder=$('.js-credit-card-data');
        $data_holder.addClass('preloaded');
        $data_holder.find('input').val('');
        $data_holder.find('select').val('').trigger("chosen:updated");
        if($data_holder.not(':visible')){$data_holder.collapse('show');}
    });
    /*EOF Forms customization*/

    $('body').on('change','.js-onchange-show', function(){
        var id = $(this).val();
        $(this).find('option').each(function() {
            $($(this).val()).hide();
        });
        $(id).fadeIn();
    });

    $('body').on('click', '.js-onclick-show .btn', function(){
        var id_show = $(this).data('show');
        $(this).closest('.js-onclick-show').hide();
        $(id_show).removeClass('hidden');
    });

    /*Custom plugins*/
    /*Simple AJAX form submission*/
    $('body').on("submit",".js-ajax-form", function (event) {

        $(this).simpleAjaxForm({
            callback: function(obj, target){
                //Load recharge subform
                if($(target).hasClass('js-reload-form')){
                    var target=$('.js-form-recarga');
                    var url=target.data('alt-url');
                    $.ajax({
                        url: url,
                        dataType: 'HTML'
                    }).done( function (result) {
                            $(target).html(result).css({'opacity': '1','height':'auto'})
                            .find('.customSelect').each(function(){
                                var search=$(this).data('search');
                                var ancho=$(this).data('width')+'%';
                                $(this).chosen({
                                    disable_search_threshold:  search,
                                    width: '100%'
                                });
                            });
                            $(target).find('[data-trigger-events]').each(function() {
                                $(this).dataTriggerEvent();
                            });
                        })
                        .fail(function() {
                            // alert(target)
                            $(target).prepend('<div class="container-fluid "><div class="alert alert-warning fade in">'+settings.mensajeError+'</div></div>').css({'opacity': '1'});
                            $(target).find('.alert').delay('800').slideUp('slow');
                        });
                }
                if(obj.hasClass('js-recharge-steps')){
                    $('.js-steps').find('.active').removeClass('active').next().addClass('active')
                }
                if($('.cloudzoom').length){
                    CloudZoom.quickStart();
                }
            }
        });
        
    });

    //xumak change: duplicated code commented.
    /*$('body').on("submit",".js-ajax-form", function (event) {

        

        $(this).simpleAjaxForm({
            callback: function(obj, target){
                //Load recharge subform
                if($(target).hasClass('js-reload-form')){
                    var target=$('.js-form-recarga');
                    var url=target.data('alt-url');
                    $.ajax({
                        url: url,
                        dataType: 'HTML'
                    }).done( function (result) {
                            $(target).html(result).css({'opacity': '1','height':'auto'})
                            .find('.customSelect').each(function(){
                                var search=$(this).data('search');
                                var ancho=$(this).data('width')+'%';
                                $(this).chosen({
                                    disable_search_threshold:  search,
                                    width: '100%'
                                });
                            });
                            $(target).find('[data-trigger-events]').each(function() {
                                $(this).dataTriggerEvent();
                            });
                        })
                        .fail(function() {
                            // alert(target)
                            $(target).prepend('<div class="container-fluid "><div class="alert alert-warning fade in">'+settings.mensajeError+'</div></div>').css({'opacity': '1'});
                            $(target).find('.alert').delay('800').slideUp('slow');
                        });
                }
                if(obj.hasClass('js-recharge-steps')){
                    $('.js-steps').find('.active').removeClass('active').next().addClass('active')
                }
            }
        });
        event.preventDefault();
    });*/




    $('.js-simpleAjaxTabs').simpleAjaxTabs({
        spin: 'xlargeSpin',
        callback: function (obj, target) {
            //if (target == "#ayuda") {
                $(target).find('.js-showPanelInGrid').showPanelInGrid();
            //}
            //if (target == "#plan-ideal") {

                $(target).find(".js-slider-planes").each(function() {
                    renderSliderPlanes($(this));
                });

                /*Ajax Form Submission*/
                $(target).find('.js-form-slider-planes').on("submit", function (event) {
                    event.preventDefault();
                    var target = $(this).data('ajax-target');
                    var form = $(this);
                    if ($(target).is(':empty')) {
                        $(target).animate({'height': '150'}, function () {
                            form.simpleAjaxForm();
                        })
                    }
                });

                if($('.cloudzoom').length){
                    CloudZoom.quickStart();
                }

                /*Automatic reload of results layer on form input or slider change*/
                $('#sliderTarget,#order-resultados').on('change', 'select, input', function () {
                    $(this).closest('form').simpleAjaxForm({spin: 'largeSpin'});
                });
            //}
        }
    });
    /*EOF Custom plugins*/

    /*Events attached to body*/
    $('body')
        .on('click', 'button.js-tooltip', function (e) {
            e.preventDefault();
        })
        /*Generic close buttons*/
        .on('click', '.js-close', function () {
            var detach = ($(this).hasClass('js-detach')) ? true : false;
            $(this).closest('.js-close-target').animate({'height': 0,'padding': 0}, function () {
                if (detach) {
                    $(this).detach();
                } else {
                    $(this).hide();
                }
            });
        })
        /*Avoid close of login box on self tabs click*/
        .on('click', '.login-box', function (e) {
            e.stopPropagation()
        })
        //Display hidden texts
        .on('click', '.js-display-text', function (e) {
            var button=$(this),
                target=button.prev(),
                curHeight = 70,
                autoHeight = target.css('height', 'auto').height(),
                newHeight=(button.hasClass('opened'))?curHeight:autoHeight,
                oldHeight=(button.hasClass('opened'))?autoHeight:curHeight;
            target.height(oldHeight).animate({height: newHeight}, 1000, function(){
                button.toggleClass('opened');
                target.toggleClass('visible');
            });
            e.stopPropagation();
        })
        .on('click','.js-open-chat', function(e){
            //$chat.find('header').trigger('click');
            $('#menu_flotante .chat-flotante').trigger('click');
        });
        //Remove selected filers and reload form

    /*EOF Events attached to body*/

    /****** Carousels ******/
    /*home super Carousels
     * TO-DO--------------
     * ------------------*/
    var mainSliderHolder = $('.main-slider');
    if (mainSliderHolder.length) {

        function getResolution() {
            if($(window).width() > 768) {
                return "dkt";
            } else {
                return "rd";
            }
        }

        var renderItem = function($item) {
            var windowWidth = $(window).width();
            var resolution = getResolution();
            var imgWidth = $item.find("img." + resolution).data('width');
            var imgHeight = $item.find("img." + resolution).data('height');

            if(resolution == "dkt") {
                imgWidth = imgWidth * 2;
            }

            $item.find('> .wrapper-content').width(imgWidth);
            $item.find('> .wrapper-content').height(imgHeight);

            if(resolution == "dkt") {
                var width = (windowWidth - imgWidth) / 2;

                $('.main-slider .owl-pagination').css({ 'left': (width + 172) });

                $item.find('.wrapper-slider-img.right > .bg, .wrapper-slider-text.right > .bg, .wrapper-slider-img > .bg-right').each(function() {
                    $(this).width(width);
                    $(this).css({ 'right': (-1 * width) });
                });

                $item.find('.wrapper-slider-img.left > .bg, .wrapper-slider-text.left > .bg, .wrapper-slider-img > .bg-left').each(function() {
                    $(this).width(width);
                    $(this).css({ 'left': (-1 * width)});
                });
            }

            var scale = 1.0;

            if(imgWidth > windowWidth) {
                scale = windowWidth / imgWidth;
            }

            $item.find('> .wrapper-content > .content').css("transform", "scale(" + scale + ")");

            if(resolution == "rd") {
            	var dataHeight = $item.find('.wrapper-slider-text').attr('data-rd-height');
            	if (dataHeight != "" && typeof dataHeight !== "undefined" && dataHeight != null) {
            		imgHeight = imgHeight + Number(dataHeight);
            	} else {
            		imgHeight = imgHeight + $item.find('.wrapper-slider-text').height();
            	}
            }

            $item.height(imgHeight * scale);
            $item.closest('.owl-item').height(imgHeight * scale);
        }

        function setCSS() {
            var attr = ($(this).data(getResolution())).replace(/'/g, "\"");

            attr = $.parseJSON(attr);
            $(this).removeAttr('style');
            $(this).css({
                top: attr.top,
                left: attr.left,
                right: attr.right,
                bottom: attr.bottom,
                textAlign: attr.textAlign,
                lineHeight: attr.lineHeight,
                fontSize: attr.fontSize + 'px',
                backgroundColor: attr.backgroundColor,
                marginBottom: attr.marginBottom,
                marginTop: attr.marginTop,
                padding: attr.padding,
                height: attr.height,
                width: attr.width
            })

            // Text color
            if(attr.textColor) {
                $(this).addClass('text-' + attr.textColor);
            }

            // Text weight
            if(attr.textWeight) {
                $(this).addClass('text-' + attr.textWeight);
            }
        }

        function renderCSS($item) {
            if ($item.hasClass('slider-index')) {
                $item.each(setCSS);
            }
            $item.find('.wrapper-slider-text').each(setCSS);
            $item.find('.bg, .bg-left, .bg-right').each(setCSS);
            $item.find('.slider-text').each(setCSS);
            $item.find('.slider-title').each(setCSS);
            $item.find('.slider-subtitle').each(setCSS);
            $item.find('.slider-btn').each(setCSS);
            $item.find('.slider-circle').each(setCSS);
        }

        /* Main Carousels initialization */
        mainSliderHolder.owlCarousel({
            slideSpeed: 300,
            paginationSpeed: 400,
            items: 1,
            singleItem: true,
            itemsDesktop: false,
            slideBy: 1,
            loop: true,
            center: true,
            autoPlay: $('.main-slider').data("autoplaytime"),
            HoverPause: true,
            navigation: true,
            lazyLoad: true,
            afterLazyLoad: function(){
                $(mainSliderHolder).find('img.rd').removeAttr('style')
            },
            afterInit: function () {
                $(mainSliderHolder).find(".item-slider").each(function() {
                    renderCSS($(this));
                    renderItem($(this));
                    $(this).find('.wrapper-content').show();
                });
            },
            transitionStyle: 'fadeUp',
            navigationText: ['<i class="icon-SliderLeft"></i>', '<i class="icon-SliderRight"></i>'],
            afterUpdate: function () {
                $(mainSliderHolder).find(".item-slider").each(function() {
                    renderCSS($(this));
                    renderItem($(this));
                });
            }
        });
    }

    /*SIMPLE Carousels
     * The options "items" and "slideBy" are received from data-attr
     * */
    var simpleCarousel = function($carousel) {
        $carousel.owlCarousel({
            itemsDesktop: [979, $carousel.data('items')],
            margin: 10,
            loop: true,
            center: true,
            HoverPause: true,
            navigation: true,
            singleItem: $carousel.data('single-item'),
            slideBy: $carousel.data('slideby'),
            lazyLoad: true,
            navigationText: ['<i class="icon-SliderLeft"></i>', '<i class="icon-SliderRight"></i>'],
            beforeMove: function(elem){
                if(elem.parent('.carousel-noticias').length){
                    elem.find('.owl-wrapper').height(elem.find('.owl-wrapper').height())
                }
            }
        });
    };

     var ancho_inicial = 0;
     var simpleCarouselNoResponsive = function($carousel) {
        $carousel.owlCarousel({
            itemsDesktop: [979, 1],
            itemsTablet: [768, 1],
            itemsMobile: [479,1],
            margin: 10,
            loop: true,
            center: true,
            HoverPause: true,
            navigation: true,
            singleItem: true,
            slideBy: $carousel.data('slideby'),
            lazyLoad: true,
            navigationText: ['<i class="icon-SliderLeft"></i>', '<i class="icon-SliderRight"></i>'],
            beforeMove: function(elem){
                if(elem.parent('.carousel-noticias').length){
                    elem.find('.owl-wrapper').height(elem.find('.owl-wrapper').height())
                }
            }
        });
    };



    /* Xumak fix, DO NOT delete this code.
     * Fix for simple carousel inside an accordion inside a tab
     */
    $(document).on("simple.carousel", ".js-simple-carousel", function(){
        simpleCarousel($(this));
    });


    /*

        Scroll automatico de 12 en 12

    */


        var lista_completa_faqs = $('#preguntas-frecuentes-slider li');
        var contador = 0;
        var ul = $("<ul class='row bordered-grid-primary define-faq'></ul>");



        var inicializar_carrusel = function(){

            $('#preguntas-frecuentes-slider-div').empty();
            lista_completa_faqs.each(function(key, val){


                if (contador == 0 ){
                    ul = $("<ul class='row bordered-grid-primary define-faq'></ul>");
                    agregar_lista( $('#preguntas-frecuentes-slider-div') , ul , val );
                    contador ++;
                }


                else if ( contador < 12 ){
                    agregar_lista( $('#preguntas-frecuentes-slider-div') , ul , val );
                    contador ++;
                }


                else if ( contador == 12 ){
                    ul = $("<ul class='row bordered-grid-primary define-faq'></ul>");
                    agregar_lista( $('#preguntas-frecuentes-slider-div') , ul , val );
                    contador = 1;
                }



            });

            simpleCarouselNoResponsive( $('#preguntas-frecuentes-slider-div') ) ;

        }

        function agregar_lista( contenedor , lista , elemento ){
            contenedor.append(lista.append(elemento));
        }



    inicializar_carrusel();
    
    
    

    $('.js-simple-carousel').each(function() {
        simpleCarousel($(this));
    });


    $('.js-simple-carousel-ajax').each(function() {
        var target = $(this),
            url = $(this).data('url');

        $.get(url).done(function(html) {
            $(target).html(html);

            $(target).find('.js-simple-carousel').each(function() {
                simpleCarousel($(this));
            }).find('.customCheck').each(function () {
                $(this).prettyCheckable();
            })
        });
    });


    $('.opciones-si-amigo').click(function(){
        $('#tabs-siplan button').toggleClass('active');
        $('#tabs-siplan ul').toggleClass('open');
        $('#tabs-siplan i').toggleClass('icon-AccordionUp');

    });

    /****** EOF SLIDERS ******/

    var getTabActivate = function(responsiveTab) {
        var active = responsiveTab.find('.active').index();
        return active ? active : 0;
    };

    /*BOF Responsive Tabs*/
    /*Option 1, displayed as Accordions*/
    $('.js-responsiveTabs').each(function() {
        var responsiveTab = $(this);
        $(this).responsiveTabs({
            active: getTabActivate(responsiveTab),
            rotate: false,
            startCollapsed: false,
            collapsible: 'accordion',
            setHash: true,
            animation: 'slide',
            activate: function (e, tab) {
                if ($(tab.accordionAnchor[0]).data('target') == "#ayuda") {
                    $('.js-showPanelInGrid').showPanelInGrid();
                }
                alinear_verticalmente();
                e.preventDefault()
            }
        });//.responsiveTabs('activate', getTabActivate(responsiveTab));
    });

    function carousel_menu_responsive_width(){
        $('.carousel-container').width( window.innerWidth);
        $('.carousel-menu-responsive').width( window.innerWidth - 40 );
        $('.inner-carousel').width( ( $('.js-carousel-menu').length * 130 ) );
      }
    
    /*Option 2, displayed as Selector*/
   $('body').on('click', '.js-nav-pills-open', function() {
           $(this).toggleClass('active').next().toggleClass('open');
       }).next('ul').on('click', 'li > a', function () {
               $(this).closest('ul').removeClass('open').prev().removeClass('active').find('span').text($(this).text());
       });
    /*EOF Responsive Tabs*/

    /*-------------------
     * "Planes" Range Slider
     * and
     * results layer reload
     * ------------------- */

    /*var renderSliderPlanes = function($slider) {
        var min = $slider.data('min'),
            max = $slider.data('max'),
            step = $slider.data('step'),
            value_min = $slider.data('value-min'),
            value_max = $slider.data('value-max'),
            options = $slider.data('options').split(', ');

        $slider.slider({
            range: true,
            min: min,
            max: max,
            step: step,
            stop: function (event, ui) {
                var ajaxRequest = $slider.data('ajax');
                if (ajaxRequest) {
                    $slider.simpleAjaxForm({spin: 'largeSpin'});
                }
            },
            values: [ value_min, value_max ],
            slide: function (event, ui) {
                $slider.parent().find('.input-rango').val(options[ ui.values[ 0 ] ] + " - " + options[ ui.values[ 1 ] ]);
                $slider.parent().find('.range-min').val(ui.values[0]);
                $slider.parent().find('.range-max').val(ui.values[1]);
            }
        });

        Predefined values of slider onLoad
        $slider.parent().find('.input-rango').val(options[ $slider.slider("values", 0) ] + " - " + options[ $slider.slider("values", 1) ]);
        $slider.parent().find('.range-min').val($slider.slider("values", 0));
        $slider.parent().find('.range-max').val($slider.slider("values", 1));
    };

    $(".js-slider-planes").each(function() {
        renderSliderPlanes($(this));
    });
    */
    /*Ajax Form Submission*/
    $('.js-form-slider-planes, .js-form-internet').on("submit", function (event) {
        event.preventDefault();
        var target = $(this).data('ajax-target');
        var form = $(this);

        //if ($.trim($(target).html())=='') {
            $(target).animate({'height': '150'}, function () {
                form.simpleAjaxForm({
                    callback: function(ob,target){
                        var topPos = $(target).offset().top-$('.navbar-static-top.afixed').height()-15;
                        $('html, body').animate({
                            scrollTop: topPos
                        }, 500);
                        if($(target).find('.mini-slider').length){
                            $('.mini-slider').each(function() {
                                var steps=$(this).data('steps').split(',');
                                $(this).slider({
                                    create: function( event, ui ){
                                        var units=$(this).data('units');
                                        var stepWidth= 100/(steps.length-1);
                                        var $scale=$(this).next().next('.scale');
                                        if($scale.is(':empty')){
                                            for (i = 0; i < steps.length; i++) {
                                                pos=i*stepWidth;
                                                $('<div/>', {
                                                    'class': 'step'
                                                }).css({
                                                    'left': pos+'%'
                                                }).text(steps[i]+units).appendTo($scale);
                                            }
                                        }
                                    },
                                    range: "min",
                                    value: 0,
                                    min: 0,
                                    max: steps.length-1,
                                    step: 1,
                                    slide: function( event, ui ) {
                                        $(this).next().val(steps[ui.value]);
                                    }
                                })
                            });
                        }
                    }
                });
            })
        //}
    });
    $('.js-range-radio').on('change','.js-range-position',function(){
        $(this).closest('.has-pretty-child').siblings().find('label').css('opacity','.5');
        $(this).closest('.has-pretty-child').find('label').css('opacity','1');
        if($($(this).closest('.js-range-radio').data('ajax-target')).length){
            var ajaxRequest = $(this).closest('.js-range-radio').data('ajax');
            if (ajaxRequest) {
                $(this).closest('.js-range-radio').simpleAjaxForm({spin: 'largeSpin'});
            }
        }
    });
    /*Automatic reload of results layer on form input or slider change*/
    $('#sliderTarget,#order-resultados').on('change', 'select, input', function () {
        $(this).closest('form').simpleAjaxForm({spin: 'largeSpin'});
    });

    /*-------------------
     *EOF Range Slider "Planes"
     -------------------*/

    /*--------------
     * Scroll Events
     ---------------*/
    $(window).scroll(function () {
        if($js_submenu.length){ /*<-- Added to avoid js errors in the component view*/
        //$js_submenu.parent().removeClass('open');
        $js_submenu.css('top', $js_submenu.parent().offset().top - $(document).scrollTop() + $js_submenu.parent().height() + 10 + 'px');
        }
        breadcrumb = ($breadcrumb.length) ? ($breadcrumb.innerHeight() + parseInt($breadcrumb.css('margin-bottom'))) : 0;
        if (($(document).scrollTop() > ($('.nav-top').innerHeight() + breadcrumb))) {
            if (!$('.afixedTop').length && $('body.desktop').length) {
                $('.navbar-static-top').addClass('afixed');
                $('.header').find('.nav-main-bar').addClass('afixed');
            } else if (!$('.afixedTop').length && !$('body.desktop').length) {
                $('.header-main').addClass('afixed');
            }
        } else {
            $('.navbar-static-top').removeClass('afixed');
            $('.header').find('.nav-main-bar').removeClass('afixed');
            $('.header-main').removeClass('afixed');
            $('main').css('paddingTop', '0');
        }
        if (($(document).scrollTop() > window.innerHeight)) {
            $('.up_button').addClass('visible')
        } else {
            $('.up_button').removeClass('visible')
        }
        
        ajustar_menus();

    });

   document.addEventListener('touchmove', function(e){
        $js_submenu.parent().removeClass('open');
    }, true);

    /*--------------
     * EOF Scroll Events
     ---------------*/


    if($('.js-mathcheight-holder').length>0) {
        $('.js-mathcheight-item').matchHeight();
    }
    //MEnu constructor
    if($js_submenu.length){/*<-- Added to avoid js errors in the component view*/
        $js_submenu.css('top', $js_submenu.parent().offset().top - $(document).scrollTop() + $js_submenu.parent().height() + 10 + 'px').find('.level-1 > li > a').hoverIntent(function () {
            var promo = $(this).data('promo');
            $(promo).slideDown('slow').siblings().slideUp('slow');
        });
        $js_submenu.on('click hover touchstart', '.ps-scrollbar-y-rail',function (e) {
            e.stopPropagation();
        }).find('a').bind('click touchstart', function (e) {
            e.stopPropagation()
        })
        $js_submenu.find('.level-2').scroll(function () {
            $(this).find('li').removeClass('active');
            var top = $(this).scrollTop();
            $(this).find('ul').css('top', top + 'px')
        });
        $js_submenu.find('li').each(function () {
            $(this).mouseenter(function () {
                $(this).addClass('active').siblings().removeClass('active');
                var sublevel = $(this).find('>a').next('ul');
                var height_submenu = 0;
                sublevel.find('>li').each(function () {
                    height_submenu = height_submenu + $(this).height();
                });
                //var height_container = $(this).closest('.menus').innerHeight();
                //sublevel.css({'min-height': height_container + 'px'});
                /*
                if (height_submenu >= (height_container + 4)) {
                    sublevel.perfectScrollbar({
                        suppressScrollX: true,
                        wheelPropagation: true
                    });
                }*/
            });
        });
    }
    $('.nav-main').on('show.bs.dropdown', 'li.dropdown',function () {
        var max = 0;
        $(this).find("li:not(:has(ul))").each(function () {
            var cur = $(this).parents("ul").length;
            if (cur > max) max = cur;
        });
        var levelsClass = 'levels-' + (max - 2);
        $(this).find('.js-submenu').addClass(levelsClass);
        var left = $(this).offset().left + ($(this).width() / 2);
        $(this).find('.js-submenu>.arrow-menu').css({'left': (left - 20) + 'px'})
        $(this).find('.level-1 > li').each(function () {
            var promo = $(this).find('a').data('promo');
            $(promo).hide();
            if ($(this).hasClass('active')) {
                $(promo).show()
            }
        });
        var topVar=(!$(this).parents('.mundo').length)?10:0;
        $js_submenu.css('top', $js_submenu.parent().offset().top - $(document).scrollTop() + $js_submenu.parent().height() + topVar + 'px');
    }).on('shown.bs.dropdown', function () {
            /*Desde aqui hasta próxima marca se agrega para evitar scroll en el segudo nivel
                        if(!$(this).parents('.mundo').length){
                            var max_height = 0;
                            $(this).find('ul[class*="level-"]').not('.level-3').each(function () {
                                var total_height = 0;
                                $(this).find('>li').each(function () {
                                    total_height = total_height + $(this).height();
                                });
                                $(this).height(total_height)
                                max_height = (total_height > max_height) ? total_height : max_height;
                            });
                           if (max_height != undefined) {
                               if (max_height < 350) {
                                   max_height = 350;
                               }
                               $(this).find('.menus').height(max_height - 3 + 'px');
                           }
                        }else{
                            var max_height = 0;
                            $(this).find('ul[class*="level-1"]').each(function () {
                                var total_height = 0;
                                $(this).find('>li').each(function () {
                                    total_height = total_height + $(this).height();
                                });
                                $(this).height(total_height)
                                max_height = (total_height > max_height) ? total_height : max_height;
                            });
                            if (max_height != undefined) {
                                if (max_height < 350) {
                                    max_height = 350;
                                }
                                $(this).find('.menus').height(max_height - 3 + 'px');
                            }
                        }

                        var height_container = $(this).find('.menus').innerHeight();
                        $(this).find('.side-area,ul.level-2, ul.level-1').css({'min-height': height_container + 'px'});
                        /*Hasta aqui*/
        });
    $menu = $('#side-rd').clone();
    $menu.find('.hidden-xs').detach();
    $menu.find('.js-submenu').removeClass('js-submenu');
    $menu.find('*').removeAttr('style');
    $('body').restive({
        breakpoints: ['480','768', '992', '100000'],
        classes: ['movi movi-xs', 'movi', 'pad', 'desktop'],
        turbo_classes: 'is_mobile=mobi,is_phone=phone,is_tablet=tablet,is_landscape=landscape',
        onAddClass: function (name) {
            if ((name.indexOf('movi') > -1) || (name.indexOf('pad') > -1) || (name.indexOf('mobi')) > -1) {
                $('.main-nav .navbar-toggle').sidr({
                    name: 'sidr-main',
                    onOpen: function(){
                        $('html').css('position','fixed');

                    },
                        source: function (name) {
                        return $menu;
                    }
                });
                $('.menus').on('click', 'a.has-submenu', function (event) {
                    if ($(this).closest('.sidr').length) {
                        $(this).toggleClass('active').closest('li').toggleClass('open');
                    }
                    if( $(this).next().find('li').length > 0 ){
	                    event.preventDefault();
	                    event.stopPropagation();
                    }
                });
                if(name.indexOf('pad') > -1){
                    $('.js-responsive-image').each(function(){
                        $(this).attr('src',$(this).data('src-md'))
                    });
                }else{
                    $('.js-responsive-image').each(function(){
                        $(this).attr('src',$(this).data('src-xs'))
                    });
                }
                /*var CloudZoomInstance=$('.cloudzoom').data('cloudzoom');
                if($('.cloudzoom').length&&CloudZoomInstance!=='undefined'){
                    $('.cloudzoom').data('cloudzoom').destroy();
                }*/
            } else {
                $.sidr('close','sidr-main');
                $('#sidr-main').detach();
                $('body').removeAttr('style');
                $('html').removeAttr('style');
                $('.js-responsive-image').each(function(){
                    $(this).attr('src',$(this).data('src-lg'));
                });
                if($('.cloudzoom').length){
                    CloudZoom.quickStart();
                }
            }
        }
    });
    /*TO-DO Create a custom plugin to perform ajax links*/
    $('body').on('click', '.js-ajax-link', function (e) {
        var $link = $(this),
            URL = $link.attr('href'),
            target = $($link.data('target'));
        $(target).animate({'opacity': '.5'}, function () {
            loader = $('<div/>', {
                'class': 'spinner-holder clear'
            }).css({'position': 'absolute', 'bottom': '50%', 'right': '50%'}).appendTo(target).spin('defaultSpin');
            $.ajax({
                url: URL,
                success: function (data, textStatus, jqXHR) {
                    $(target).find('.spinner-holder').spin(false);
                    $(target).html(data).css({'opacity': '1', 'height': 'auto'}).find('.customCheck').each(function () {
                        $(this).prettyCheckable();
                    });
                    $(target).find('.customSelect,.customRadio').each(function () {
                        var search = $(this).data('search');
                        var ancho = $(this).data('width') + '%';
                        if($('.desktop').length){
                            $(this).chosen({
                                disable_search_threshold: search,
                                width: '100%'
                            });
                        }
                    });
                    onAjaxSuccess(target);
                    $(target).find('[data-trigger-events]').each(function() {
                        $(this).dataTriggerEvent();
                    });
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    $('<div/>', {
                        'class': 'ajax-error text-center',
                        'text': 'Error'
                    }).appendTo(target);
                    target.find('.spinner-holder').spin(false);
                }
            });
        });
        e.preventDefault();
    });

    /* Modal ajax */
    $(document).on('click', '.js-modal-ajax', function(e) {
        var url = $(this).data('url');
        var target = $(this).data('xktarget');

        if (url != "") {
            $(target).modal({
                remote: url,
                backdrop: true
            });
        }
        e.preventDefault();
    });
    $('body').on('click', '.js-Ajax-Custom-Modal', function(e) {
        var $el    =    $(this);
        url    =    $el.attr('href'),
        target =    $el.data('target');
        $(target).find('.modal-content').empty().load(url, function(){
            $(target).modal();
        });
        e.preventDefault();
    });
    $(document).on('show.bs.modal', '.modal', function () {
        var zIndex = 1040 + (10 * $('.modal:visible').length);
        $(this).css('z-index', zIndex);
        setTimeout(function() {
            $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');
        }, 0);
    });
    /*Funciones asociadas a caja de login*/
    $('.js-login-options').on('click', 'a', function (e) {
        var target = $(this).attr('href');
        $(this).closest('ul').next().fadeIn();
        $(target).addClass('in').siblings().removeClass('in');
        e.preventDefault();
    });

    $('#xk-compare').on('click', function (e) {
    	e.preventDefault();
    	var a_href = $(this).data('href');
    	var n = a_href.lastIndexOf(".html");
    	var new_href = a_href;
    	if (n != -1) {
    		new_href = a_href.substring(0,n);
    	}

        var terminal = "1";
        var selectors = "";
        $( ".list-comparador" ).find( "a" ).each(function( index ) {
            /*if ($( this ).data('path').length) {
                var device64base = btoa($( this ).data('path'));
				selectors = selectors + "." + device64base;
            }*/
            if ($( this ).data('deviceid') !== 0) {
                selectors = selectors + "." + $( this ).data('deviceid');
                if ($( this ).data('terminal') !== 0) {
                    terminal = $( this ).data('terminal');
                }
            }
        });
        selectors = selectors + ".terminal=" + terminal;

    	new_href = new_href + selectors + ".html";
    	//console.log("HREF: "+ new_href);
    	window.location.href = new_href;
    });

    function clearFullItem()
    {
        $(this).replaceWith('<li class="empty">&nbsp;</li>');
        counter = $list_comparador.find('li.full').length;
        $bar_comparador.find('.counter').text(counter);
    }
    /*Funciones para el comparador de terminales*/
    $list_comparador.on('click', '.js-delete-comparador', function (e) {
        e.preventDefault();
        var element = $(this).next().val();
        clearFullItem.call($(this).closest('li'));
        $('.item-terminal').each(function () {
            var val = $(this).find('input').val();
            if (val == element) {
                $(this).find('input:checked').prettyCheckable('uncheck');
            }
        });
    });
    $(document).on('change', '.js-checkboxComparar', function (e) {
        var URL = url_comparador,
            padre = ($(this).closest('.item-terminal')) ? $(this).closest('.item-terminal') : $(this).closest('.item-accesorios'),
            img = $(this).data('terminal-image'),
            devicePath = $(this).data('devicepath'),
            deviceId = $(this).data('deviceid'),
            terminal = $(this).data('terminal'),
            equipo = $(this).val().trim(),
            action = ($(this).is(':checked')) ? 1 : 0;
        padre.find('.small-tooltip').detach();

        if (action == 1) {
            // Add only if less than 3
            if ( $list_comparador.find('li.full').length < 3) {
                var tooltip = $('<div/>', {
                    'class': 'small-tooltip clearfix',
                    'html': '<div class="pull-left"><img src="' + img + '"/></div><p>Has añadido el ' + equipo + ' al comparador <span>Añade otro equipos para empezar a comparar</span></p>'
                }).css({'position': 'absolute', 'top': '50%', 'left': '50%'}).appendTo(padre).delay('2000').fadeOut('slow');

                var counter = $list_comparador.find('li.full').length;
                $bar_comparador.css({'top': $('.navbar-static-top').height() + 17, 'height': '70px'}).fadeIn()
                var new_item = '<li class="full"><img src="' + img + '" alt="' + equipo + '"/><a href="#" rel="nofollow" data-deviceid="'+ deviceId +'" data-terminal="'+ terminal +'" data-item="' + equipo + '" data-path="' + devicePath + '" class="js-delete-comparador"><i class="fa fa-times-circle"></i></a><input type="hidden" name="terminal-comparar[]" value="' + equipo + '"/></li>';

                $list_comparador.find('li.empty').eq(0).replaceWith(new_item);
                counter += 1;
                $bar_comparador.find('.counter').text(counter);

            } else {
                var tooltip = $('<div/>', {
                    'class': 'small-tooltip clearfix',
                    'html': '<p>Tan sólo puedes comparar 3 equipos simultaneamente<br><br><br></p>'
                }).css({'position': 'absolute', 'top': '50%', 'left': '50%'}).appendTo(padre).delay('2000').fadeOut('slow');
                var target = e.target;
                setTimeout(function(){ $(target).prettyCheckable('uncheck');console.log('eso'); }, 1);

            }
        } else {
            var tooltip = $('<div/>', {
                'class': 'small-tooltip clearfix',
                'html': '<div class="pull-left"><img src="' + img + '"/></div><p>Has eliminado el ' + equipo + ' del comparador <br><br><br></p>'
            }).css({'position': 'absolute', 'top': '50%', 'left': '50%'}).appendTo(padre).delay('2000').fadeOut('slow');


            var element = equipo;
            $('.list-comparador > li').each(function () {
                var val = $(this).find('input').val();
                if (val == element) {
                    clearFullItem.call(this);
                }
            });
        }

    });

    //Mostrar detalles de equipo
    $(document).on('click', '.btn.btn-primary.deviceDetail', function (e) {
    	var devicePage = $(this).data('device-details');
    	window.location.href = devicePage;
    });
    
    /*Drop items form shoppin bag*/
    if ($('.item-carrito').length) {
        $('.js-cesta-vacia').hide();
    }
    $('.js-carrito').on('click', '.js-delete-lista', function () {
        var equipo = $(this).data('item');
        var $padre = $(this).closest('.js-carrito');
        var URL = $padre.data('url-process');
        var total_cesta = Number($padre.find('.js-total-cesta').text().replace(/[^0-9\.]+/g, ""));
        var item_price = Number($(this).closest('.js-close-target').find('.js-price').text().replace(/[^0-9\.]+/g, ""));
        $.ajax(
            {
                url: URL,
                data: { terminal: equipo },
                success: function (data, textStatus, jqXHR) {
                    //Recalcular el total de la cesta
                    var total = '$' + parseFloat((total_cesta - item_price), 10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, "$1,").toString();
                    $('.js-total-cesta').text(total)
                    if ((total_cesta - item_price) == 0) {
                        $('.js-totales').slideUp().next('.js-cesta-vacia').fadeIn();
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    var tooltip = $('<div/>', {
                        'class': 'small-tooltip clearfix error',
                        'html': '<p>Se ha producido un error</p>'
                    }).css({'position': 'absolute', 'top': '50%', 'left': '50%'}).appendTo($padre).delay('2000').fadeOut('slow');
                }
            });
    })

    /*--------------
     * BOF Filters action in products search list
     ---------------*/

    $formFiltros.on('change', '.searchbox-filter', function() {
        $('.js-filtersbar').fadeOut(function() {
            $(this).remove();
        });

        $formFiltros.find('.js-checkboxFilters').each(function() {
            if(this.checked) {
                $(this).prettyCheckable('uncheck');
            }
        });
        $formFiltros.find('select').each(function() {
            $(this).val('').trigger("chosen:updated");
        });

        $formFiltros.simpleAjaxForm({spin: 'largeSpin'});
    });

    $formFiltros.on('change', 'select', function() {
        var next = $(this).data('next');

        $(this).closest('form').simpleAjaxForm({spin: 'largeSpin'});
        $(next).fadeIn();
    });

    $('body').on('click', '.resultados-update-ajax', function(e) {
         e.preventDefault();
        $(this).closest('form').simpleAjaxForm({spin: 'largeSpin'});
    });

    $('#load-items a, .js-open-pills').click(function () {
        $('#filtros').collapse({toggle: false}).collapse('hide');
        $('*[data-target="#filtros"]').addClass('collapsed');
        $(this).parent().addClass('active').siblings().removeClass('active');

    });
    $('*[data-target="#filtros"]').click(function () {
        $('#load-items').collapse({toggle: false}).collapse('hide');
        $('.js-open-pills').addClass('collapsed');
    });

    $('body').on('change', '.js-checkboxFilters', function () {
        var $form = $(this).closest('form'),
            label = $(this).data('label'),
            value = $(this).val(),
            action = ($(this).is(':checked')) ? 1 : 0,
            $filtersbar = (!$('.js-filtersbar').length) ? $('<ul/>', {
                'class': 'list-filters list-unstyled container-fluid js-filtersbar'
            }) : $('.js-filtersbar'),
            $item = (action == 1) ? $('<li/>', {
                'html': '<i class="icon-Close"></i>' + label + '',
                'class': 'js-delete-filter item',
                'data-value': value
            }) : $('li[data-value="' + value + '"]');
        $form.simpleAjaxForm({
            spin: 'largeSpin',
            callback: function () {
                if ((action == 1)) {
                    $item.appendTo($filtersbar);
                    if (!$('.js-filtersbar').length)
                        $filtersbar.appendTo('.js-selected-filtres');
                } else {
                    $item.animate({width: 0}, function () {
                        $(this).detach();
                        if (!$('.js-filtersbar').find('li').length) {
                            $filtersbar.animate({
                                height: 0
                            }, function () {
                                $(this).detach();
                            });
                        }
                    });
                }
            }
        });
        $($(this).data('next')).fadeIn();
    }).on('click', '.js-delete-filter', function () {
        var checkbox = $formFiltros.find('input[value="' + $(this).data('value') + '"]');
        checkbox.prettyCheckable('uncheck');
        $(this).animate({width: 0}, function () {
            $(this).detach();
            if (!$('.js-filtersbar').find('li').length) {
                $('.js-filtersbar').animate({
                    height: 0
                }, function () {
                    $(this).detach();
                });
            }
        });
        var url = $formFiltros.attr('action');
        var checkBoxSelector = "." + $(checkbox).attr('id') + ".";
        var urlUpdated = url.replace(checkBoxSelector, ".");
        $formFiltros.attr('action', urlUpdated);
        $formFiltros.simpleAjaxForm({spin: 'largeSpin'});
    });
    /*--------------
     * EOF Filters action in products search list
     ---------------*/

    /*--------------
     * BOF Rich headers in admin pages
     ---------------*/
    var $richHeader = $('.js-rich-header');
    $richHeader.each(function () {
        var bgPosition = $(this).data('bgposition'),
            bgRepeat = $(this).data('bgrepeat'),
            bgImage = $(this).data('bg-image')
        //alert(bgImageSizeRd)
        $(this).css({
            'background-repeat': bgRepeat,
            'background-image': 'url(' + bgImage + ')',
            'background-position': bgPosition
        });
    });
    /*--------------
     * EOF Rich headers in admin pages
     ---------------*/


    $(document).on('click','.js-clone-item', function(e){

        //console.log($($(this).data('clone')).parent());

        var $itemCloned=$(this).data('cloned').clone(true),
            $holder=$($(this).data('clone')).parent();
            ordinal=$($(this).data('clone')).length+1;
        classParent=$itemCloned.attr('class').split('-')[0];


        $itemCloned.removeClass("zindex-1");
        $itemCloned.addClass(classParent+'-'+ordinal); 
        $holder.append($itemCloned);
        $itemCloned.find('.chosen-container').detach();
        $itemCloned.find('.customSelect').each(function () {
            idExtract=$(this).attr('id').split('-')[0];
            $(this).attr('id',idExtract+'-'+ordinal);
            var search = $(this).data('search');
            var ancho = $(this).data('width') + '%';
            var inherit = $(this).data('inherit');

            //ini xumak fix
            if ($(this).hasClass("xk-coverage")) {
                var newCoverage = $(this);
                $('.xk-roamingsearch .xk-coverage').eq(0).find('option:not(:eq(0))').each(function(){
                    newCoverage.append('<option value="' + $(this).val() + '">' + $(this).text() + '</option>');
                });
            }

            if ($(this).hasClass("xk-country")) {
                $(this).attr("disabled", "disabled");
            }
            //fin xumak fix

            $(this).chosen({
                disable_search_threshold: search,
                width: '100%',
                inherit_select_classes: inherit
            })
        });
        //$(this).data('cloned','');

/*        $(".paisSelect").chosen().change( function(){
            $(this).closest('.js-trip').find(".b3").show();
        } );      */          
        
        e.preventDefault()
    });

    $('body').on('change', '.js-checkboxSelectPlan', function () {
        var value  = $(this).val(),
            price  = parseFloat($(this).data('price')),
            itemCategory  = parseFloat($(this).data('category')),
            itemSubcategoryPrice = $(".subTotal" + itemCategory ),
            itemSubcategoryoldTotal = parseFloat(itemSubcategoryPrice.text()),
            action = ($(this).is(':checked')) ? 1 : 0,
            $item  = $(this).closest('.item'),
            oldTotal = parseFloat($('.js-total').find('.js-ammount').text()),
            prevAmount=0;
        if(action==1){
            $item.addClass('selected');
            $item.siblings('.item').each(function(){
                var $checkbox=$(this).find('.js-checkboxSelectPlan');
               if($(this).find('.js-checkboxSelectPlan').is(':checked')){
                   $checkbox.prettyCheckable('uncheck');
                    prevAmount= parseFloat($checkbox.data('price'));
                }
            }).removeClass('selected');
            $(".subTotal" + itemCategory ).text(price);
            $(".subTotalContainer" + itemCategory ).show();
            newTotal=oldTotal+price-prevAmount;
        }else{
            $(this).closest('.item').removeClass('selected');
            $(".subTotalContainer" + itemCategory ).hide();
            $(".subTotal" + itemCategory ).text("0.00");
            newTotal=oldTotal-price;
        }
        $('.js-total').find('.js-ammount').text(newTotal);
    });

    /*Específicas del área de soporte*/
    $('.js-form-tramites').on('change', 'select, input', function () {
        if($(this).closest('.col-sm-4').siblings().find('select').val()==''){
            return false
        }else{
            $(this).closest('form').simpleAjaxForm({
                spin: 'largeSpin',
                callback: function(obj, target){
                    $(target).find('.customCheck, .customRadio').each(function () {
                        $(this).prettyCheckable();
                    });

                    $(target).find('.js-radio-tab').on('change',function () {
                        $(this).tab('show');
                    });
                }
            });
        }
    });

    $(document).on('change', '.js-radio-tab', function () {
        $(this).tab('show');
    });

    $('.js-planes-extranjero .primeraFila').on('click', 'select, input, div', function () {
        $(this).find('.chosen-container').css('z-index', 2000);
    });


    function ResizeIframeFromParent(id) {
        if (jQuery('#'+id).length > 0) {
            var window = document.getElementById(id).contentWindow;
            var prevheight = jQuery('#'+id).attr('height');
            var newheight = Math.max( window.document.body.scrollHeight, window.document.body.offsetHeight, window.document.documentElement.clientHeight, window.document.documentElement.scrollHeight, window.document.documentElement.offsetHeight );
            if (newheight != prevheight && newheight > 0) {
                jQuery('#'+id).attr('height', newheight);
            }
        }
    }
    function initialize() {
        var mapOptions = {
            center: new google.maps.LatLng(19.4270499, -99.1275711),
            zoom: 16,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
    }
    $('body').on('change', '.js-mark-row', function () {
        $(this).closest('tr').toggleClass('mark');
    }).on('click','.js-mark-all-rows',function(){
        var $target = $($(this).data('target')),
            action  = $(this).data('action');
        $(this).parent().addClass('active').siblings().removeClass('active');
        if(action==1){
            $target.find('.js-mark-row').prettyCheckable('check');
            $target.find('tbody tr').addClass('mark');
        }else{
            $target.find('.js-mark-row').prettyCheckable('uncheck');
            $target.find('tbody tr').removeClass('mark');
        }
    });
    $('.js-external-accordion').on('show.bs.collapse', function () {
        setTimeout(function(){
            $('iframe.js-autosize').each(function(){
                ResizeIframeFromParent($(this).attr('id'));
            });
        },300);
    });
    if($('.resize-iframe').length){
        var iframeWin = window.parent.document.getElementById("iframe-10");
        iframeWin.height = document.body.scrollHeight+40;
    }
    $('.js-accordion-panels').on('shown.bs.collapse', function () {
        $(this).find('.collapse.in').find('.js-showPanelInGrid').showPanelInGrid();
    });
    //Acordeón generado por CQ5
    $('.js-cq-accordion').on('show.bs.collapse',function(){
        $(this).find('.collapse.in').collapse('hide')
    }).on('shown.bs.collapse',function(){
        var idOpened = $(this).find('.collapse.in').attr('id');
        $('html, body').animate({
            scrollTop: $('#'+idOpened).offset().top-250
        }, 500);
    });
    if($('#map_canvas').length){
        initialize();
    }

    $('.js-checkbox-collapse').on('change',function () {
        action = ($(this).is(':checked')) ? 1 : 0;
        if(action==1){$($(this).data('target')).collapse('show')}else{$($(this).data('target')).collapse('hide')};
    });
    $('.mini-slider').each(function() {
        var steps=$(this).data('steps').split(',');
        $(this).slider({
            create: function( event, ui ){
                var units=$(this).data('units');
                var stepWidth= 100/(steps.length-1);
                var $scale=$(this).next().next('.scale');
                if($scale.is(':empty')){
                    for (i = 0; i < steps.length; i++) {
                        pos=i*stepWidth;
                        $('<div/>', {
                            'class': 'step'
                        }).css({
                            'left': pos+'%'
                        }).text(steps[i]+units).appendTo($scale);
                    }
                }
            },
            range: "min",
            value: 0,
            min: 0,
            max: steps.length-1,
            step: 1,
            slide: function( event, ui ) {
                $(this).next().val(steps[ui.value]);
            }
        })
    });







    /*
        Galerias de ganadores dinamicas
    */

    var sync1 = $(".js-gallery-images-winnerlist");
    var sync2 = $(".js-gallery-thumbs-winnerlist");


    sync2.each( function(index,value){

        $(this).owlCarousel({
            items : 6,
            itemsDesktop : [1199,6],
            itemsDesktopSmall : [979,5],
            itemsTablet : [768,6],
            itemsTablet : [650,5],
            itemsMobile : [479,2],
            pagination:false,
            responsiveRefreshRate : 100,
            afterInit : function(el){
                el.find(".owl-item").eq(0).addClass("synced");
            }
        });

    } );



    sync1.each(function(index,value){

        $(this).owlCarousel({
            singleItem : true,
            slideSpeed : 1000,
            navigation: true,
            pagination:false,
            afterAction : syncPositionWinnerList,
            responsiveRefreshRate : 200,
            lazyLoad : true,
            navigationText: ['<i class="icon-SliderLeft"></i>', '<i class="icon-SliderRight"></i>']
        });

    });


    sync2.each(function(){

        $(this).on("click", ".owl-item", function(e){
            e.preventDefault();
            var number = $(this).data("owlItem");
            sync1.each(function(){
                $(this).trigger("owl.goTo",number);
            });
        });

    });


    function syncPositionWinnerList(el){

        var s2 = el.closest('.owl-carousel').next('.js-gallery-thumbs-winnerlist');

        var current = this.currentItem;
        s2
            .find(".owl-item")
            .removeClass("synced")
            .eq(current)
            .addClass("synced")
        if(s2.data("owlCarousel") !== undefined){
            centerWinnerList(current,s2)
        }
    }


    function centerWinnerList(number,s2){
        var sync2visible = s2.data("owlCarousel").owl.visibleItems;
        var num = number;
        var found = false;
        for(var i in sync2visible){
            if(num === sync2visible[i]){
                var found = true;
            }
        }

        if(found===false){
            if(num>sync2visible[sync2visible.length-1]){
                s2.trigger("owl.goTo", num - sync2visible.length+2)
            }else{
                if(num - 1 === -1){
                    num = 0;
                }
                s2.trigger("owl.goTo", num);
            }
        } else if(num === sync2visible[sync2visible.length-1]){
            s2.trigger("owl.goTo", sync2visible[1])
        } else if(num === sync2visible[0]){
            s2.trigger("owl.goTo", num-1)
        }
    }

    /*
       Fin de Galerias de ganadores dinamicas
    */
    

    


    /*
        Carousel Ofertas
     */
    $(document).on('click', '.js-close-carousel-ofertas', function(e) {
        e.preventDefault();
        $(this).closest('.carousel-ofertas').fadeOut(function() {
            $(this).remove();
        });
    });

    /*
        Remove on click
     */
     $('.js-remove-onclick').on('click', function() {
         $(this).remove();
     });

    /*
        Input only numbers
     */
    $('body').on('keypress', '.js-only-numbers', function (e) {
        if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
            return false;
        }
    });


	$('body').on('keypress','.js-only-alpha-numeric', function (e){
        var charCode = (e.which) ? e.which : e.keyCode;
        if (charCode == 8) return true;

        var keynum;
        var keychar;
        var charcheck = /[a-zA-Z0-9]/;
        if (window.event) // IE
        {
            keynum = e.keyCode;
        }
        else {
            if (e.which) // Netscape/Firefox/Opera
            {
                keynum = e.which;
            }
            else return true;
        }

        keychar = String.fromCharCode(keynum);
        return charcheck.test(keychar);        
	});						



    // REMOVE
    //
    $('body').on('test-1', '.resultados.inner', function(e, arg1, arg2) {
        console.log('From test 1');
        console.log(arg1);
        console.log(arg2);
    });

    // REMOVE
    //
    $('body').on('test-2', '.resultados.inner', function() {
        console.log('From test 2');
    });
    // Fix triangle boxes in IE
    $('.svg-angle-box').each(function(){
        var width=$(this).width();
        $(this).css('height', Math.round(width*0.041));
    });
    $('modal').on('click, touchstart','.chosen-container',function(e){
        e.stopPropagation();
    });
    //Fix automatic action on month combobox
    $('.customSelect').on('chosen:showing_dropdown', function(evt, params) {
        $('.r-tabs-anchor').parent().append("<div class='guard'></div>");
    });
    /* Commented to solved JIRA TELCELFII-419
    $('.customSelect').on('chosen:hiding_dropdown', function(evt, params) {
        $('.r-tabs-anchor').parent().find('.guard').remove();
    })
    */
    /*$('.js-autocomplete').autocomplete({
        source: $(this).data('estados')
    });*/
});//ready

//
//  History
//------------------------------------------------

$(function () {
    /*
    if (history && typeof(history.pushState)=='function') {
        window.addEventListener('load', function () {
            setTimeout(function () {
                window.addEventListener('popstate', function () {
                    window.location.replace(document.location);
                });
            }, 0);
        });
    }
    */
});

//
//  Separate 200Mb to <span class="number">200</span><span class="text">Mb</span>
//  ----------------------------------------------

$(function () {
    $('.intstring').separateIntString();
});

//
// Hashtag tabs
// -----------------------------------------------

$(function () {
    var targetArray = window.location.toString().split('#!');

    if (targetArray.length == 2) {

        var afterHashTag = targetArray[1];
        var dataTarget = afterHashTag;


        //If the url of the navigator has GET parameters then
        // get the real dataTarget excluding the GET parameters
        if (afterHashTag.indexOf("?") > -1 ) {

            var afterHashTagArr = afterHashTag.split("?");

            //get the dataTarget and the getParameters
            if (afterHashTagArr != null && afterHashTagArr.length == 2) {
                dataTarget = afterHashTagArr[0];
            }

        }

        $('.tabsToselect-xs [data-target="#' + dataTarget + '"]').trigger('click');
    } else if(targetArray[0].indexOf("/equipos") < 0){
        $('.tabsToselect-xs .js-simpleAjaxTabs > li.active > a').trigger('trigger-click');
    }

    $('.js-simpleAjaxTabs').on('click', '> li > a', function () {
        $(this).closest('.open').removeClass('open');
    });

    $('.soporte-tabs').on('click', '> li > a', function (e) {
         var scrollTop     = $(window).scrollTop(),
         elementOffset = $(this).offset().top,
         distance      = (elementOffset - scrollTop);

         window.scrollTo(0, elementOffset-130 );
    });

    $('.js-not-move').on('click','> ul > li > a', function(e){
        var scrollTop     = $(window).scrollTop(),
        elementOffset = $(this).offset().top,
        distance      = (elementOffset - scrollTop);
        window.scrollTo(0, elementOffset-130 );
    });

});



    function posicionar_tooltips(elemento){


        elemento.parent().css('position','relative');
        elemento.tooltip('toggle');
        
    }


//
// Modal
// ------------------------------------------------

$(function () {

    var ancho_pantalla = $(window).width();
    
    var centerModal = function($modal) {
        var modalHeight = $('.modal-content', $modal).outerHeight(),
            windowHeight = $(window).height();

        if (windowHeight > modalHeight) {
            var margin = ((windowHeight - modalHeight) / 2);
            $('.modal-dialog', $modal).animate({'margin': margin + 'px auto'}, 100);
        }
    };

    $('.modal').on('shown.bs.modal', function() {
        centerModal(this);
    });

    $(window).resize(function() {

    	ajustar_menus();
        var ancho_actual = $(window).width();
        var diferencia_en_pixeles = ancho_pantalla - ancho_actual;
        
        if ( diferencia_en_pixeles > 20 || diferencia_en_pixeles < -20 ){
            $.sidr('close','sidr-main');
        }

        ancho_pantalla = ancho_actual;

        var modals = $('.modal-centered');

        $.each(modals, function() {
            centerModal(this);
        });
        
        carousel_menu_responsive_width();
        show_carousel();
        js_contentenido_a_modal();
    });
    
    generate_responsive_carousel();
    show_carousel();
    carousel_menu_responsive_width();
    
    /*
    	Deben cargar despues de que se adapten los carruseles y menus dinamicos
    */
    js_contentenido_a_modal();
    ajustar_menus();
    
    $(document).on( 'click' , '.js-carousel-menu' , function( e, obj ){

	    e.preventDefault();
	    
        $('html, body').animate({
            scrollTop: 0
        }, 1000);
        
	    var target = $(this).attr('data-target');
	    
	    $.each( $('.r-tabs-panel') , function( index , value ){
	      $(this).hide();
	    } );

	    $.each( $('.js-carousel-menu') , function( index , value ){
	      $(this).removeClass('active');
	    } );

	    $(this).addClass('active');
	    $(target).show();

	    var flecha_izquierda = $('.arrow-container-left');
	    var flecha_derecha = $('.arrow-container-right');

	    if( $(this).offset().left < 0 ){
	      $('.carousel-menu-responsive').animate({ scrollLeft: '-='-130 }, "fast");
	    }else if( $(this).offset().left > ( $(window).width() - 40 - 130 )  ){
	      $('.carousel-menu-responsive').animate({ scrollLeft: '+='+130 }, "fast");
	    }

	} );


	$(document).on('click' , '.arrow-container-left a' , function(e){
	  e.preventDefault();

	  var delta = $('.js-carousel-menu').first().css('width');
	  $('.carousel-menu-responsive').animate({ scrollLeft: '-='+delta }, "fast");

	});


	$(document).on('click' , '.arrow-container-right a' , function(e){
	  e.preventDefault();

	  var delta = $('.js-carousel-menu').first().css('width');
	  $('.carousel-menu-responsive').animate({ scrollLeft: '+='+delta }, "fast");
	});
});

function show_carousel(){


	  var pantalla = findBootstrapEnvironment();
	  var contenedor = $('.carousel-container');
	  var contenedor2 = $('.carousel-menu-responsive');
	  var special_tabs = $('.r-tabs-accordion-title');

	  if( $('.carousel-container').length === 0 && pantalla === "xs" || pantalla === "sm"  ){
	      $('.r-tabs-accordion-title').show();
	  }

	  if( $('.carousel-container').length > 0 ){
	      if( pantalla === "xs" || pantalla === "sm" ){
	        contenedor.show();
	        contenedor2.show();
	        special_tabs.hide();
	      }else{
	        contenedor.hide();
	        contenedor2.hide();
	      }
	  }

	}

//search box header only to mobile
$(function () {

    $(".sidr .navbar-search-mobile #searchbox").keypress(function(event) {
        if (event.which == 13) {
            event.preventDefault();
            var url  = $(".sidr .navbar-search-mobile #searchbox").data("url");
            var searchValue = $(".sidr .navbar-search-mobile #searchbox").val();
            //clean text remove all special characters
            searchValue = searchValue.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>\{\}\[\]\\\/]/gi, '');
            if (searchValue.length > 0) {
                window.location.replace(url+".f_text="+searchValue+".html");
            } else {
                window.location.replace(url+".html");
            }

        }
    });


    $(".sidr .navbar-search-mobile button").on('click', function () {
        var url  = $(".sidr .navbar-search-mobile #searchbox").data("url");
        var searchValue = $(".sidr .navbar-search-mobile #searchbox").val();
        //clean text remove all special characters
        searchValue = searchValue.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>\{\}\[\]\\\/]/gi, '');
        if (searchValue.length > 0) {
            window.location.replace(url+".f_text="+searchValue+".html");
        } else {
            window.location.replace(url+".html");
        }
    });
});


/*
 * Ini: Código agregado por solicitud de Victor Santillán (Jira TELCELFII-182) 28-09-2015
 */

// Create IE + others compatible event handler

var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent";
var eventer = window[eventMethod];
var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message";

// Listen to message from child window
eventer(messageEvent,function(e) {
    var height = e.data;
    var iframe = document.getElementById("iframe-recarga");
    if(iframe != null){
        document.getElementById("iframe-recarga").height =height;
    }
},false);

/*
 * Fin: Código agregado por solicitud de Victor Santillán
 */

/* FIX JIRA 226 */
function posicionar_tooltips(elemento){
	elemento.parent().css('position','relative');
	elemento.tooltip('toggle');
}
/* FIX JIRA 226 */


window.mobileAndTabletcheck = function() {
  var check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
}

function generate_responsive_carousel(){

	  var contenedor_principal = $("<div class='carousel-container' style='display: none;'></div>");
	  var contenedor_flecha_izquierda = $("<div class='arrow-container-left'><a href='#'><i class='icon-SliderLeft' aria-hidden='true'></i></a></div>");
	  var dummy_container = $("<div class='carousel-menu-responsive'></div>");
	  var inner_carousel = $("<div class='inner-carousel'></div>");
	  var contenedor_flecha_derecha = $("<div class='arrow-container-right'><a href='#'><i class='icon-SliderRight' aria-hidden='true'></i></a></div>");

	  $.each( $('.r-tabs-tab a') , function( index , value ){
	    if( $(this).closest('li').hasClass('active') ){
	    	var a = "<a href='"+$(this).attr('href')+"' data-toggle='tab' data-href='"+$(this).attr('data-href')+"' data-target='"+$(this).attr('data-target')+"' class='just-tabs r-tabs-anchor js-carousel-menu active'><i class='"+$(this).find('i').attr('class')+"'></i><h2>"+$(this).find('h2').html()+"</h2></a>";
	    }else{
	    	var a = "<a href='"+$(this).attr('href')+"' data-toggle='tab' data-href='"+$(this).attr('data-href')+"' data-target='"+$(this).attr('data-target')+"' class='just-tabs r-tabs-anchor js-carousel-menu'><i class='"+$(this).find('i').attr('class')+"'></i><h2>"+$(this).find('h2').html()+"</h2></a>";
	    }
	    inner_carousel.append(a);
	  } );

	  contenedor_principal.append(contenedor_flecha_izquierda);
	  dummy_container.append(inner_carousel);
	  contenedor_principal.append(dummy_container);
	  contenedor_principal.append(contenedor_flecha_derecha);
	  $('.special-tabs').before(contenedor_principal);
	  carousel_menu_responsive_width();

	}

	function carousel_menu_responsive_width(){

	  $('.carousel-container').width( window.innerWidth);
	  $('.carousel-menu-responsive').width( window.innerWidth - 90 );
	  $('.inner-carousel').width( ( $('.js-carousel-menu').length * 130 ) );

	}
	
    function findBootstrapEnvironment() {
        var envs = ['xs', 'sm', 'md', 'lg'];

        $el = $('<div>');
        $el.appendTo($('body'));

        for (var i = envs.length - 1; i >= 0; i--) {
            var env = envs[i];

            $el.addClass('hidden-'+env);
            if ($el.is(':hidden')) {
                $el.remove();
                return env
            }
        };
    }
    
    function showHidePromoMenu(obj,image,linkType) {
    	if (image != "") {
    		if ($(obj).closest("li").children(".linkimage").val() != undefined && $(obj).closest("li").children(".linkimage").val() != "") {
    			$(obj).closest("li").find(".link-promo-menu").removeAttr("target");
        		$(obj).closest("li").find(".link-promo-menu").show();
        		if (linkType == 'externalimage') {
        			$(obj).closest("li").find(".link-promo-menu").attr("target","_blank");
        		}
    		}
        } else {
                $(obj).closest("li").find(".link-promo-menu").hide();
        }
    }
    
	function getImagePromoMenu(obj,image,linkimage,linkType,level) {
		var link = $(obj);
		var closestLink = $(link.closest(".menus").find(".link-promo-menu"));
		var closestImage = $(link.closest(".menus").find(".image-promo-menu"));
		closestImage.show();
		if (closestLink.length) {
			closestImage.unwrap();
		}
		if (image != "") {
			closestImage.attr('src',image);
			if (linkimage != undefined && linkimage != "") {
				closestImage.wrap("<a class='link-promo-menu' href='"+linkimage+"'></a>");
				//closestLink.attr('href',linkimage);
                            if (linkType == 'externalimage') {
                                    closestImage.parent().attr("target","_blank");
                            }
                        }else{//si no proporcionan un linkimage valido se usa el del padre
                            if(level != 3){//nivel 3 es el "inicial"
                                    closestImage.wrap("<a class='link-promo-menu' href='"+link.parent().parent().siblings(".linkimage").val()+"'></a>");
                            }
                        }
		} else {
			var hasImage = false;
			$(link.parents("li")).each( function(){
				if ($(this).children(".imageReference").val() != undefined && $(this).children(".imageReference").val() != "") {
					closestImage.attr('src',$(this).children(".imageReference").val());
					if ($(this).children(".linkimage").val() != undefined && $(this).children(".linkimage").val() != "") {
                                            if(linkimage != undefined && linkimage != ''){
						closestImage.wrap("<a class='link-promo-menu' href='"+linkimage+"'></a>");
                                            }else{
                                                if(level != 3){
                                                    closestImage.wrap("<a class='link-promo-menu' href='"+link.parent().parent().siblings(".linkimage").val()+"'></a>");
                                                }
                                            }
                                            if (linkType == 'externalimage') {
                                                    closestImage.parent().attr("target","_blank");
                                            }
					}
		    		hasImage = true;
		    		return false;
				}
		    } );
			if (!hasImage) {
				closestImage.hide();
			}
		}
	}

	/**
	 * valida si es dispositivo movil.
	 * @returns {Boolean}
	 */
	function isMobile() {
		var mobile = false; //initiate as false
	    // device detection
	    if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) 
	    		|| /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))) mobile = true;
	    
	    return mobile
	}

	function ajustar_menus(){

		var resolucion = findBootstrapEnvironment();

		if( resolucion === "sm" ){

			if( $('.header-main').length > 0 ){
				
				$('.header-main').addClass('estatico');
				$('.navbar-static-top').removeClass('afixed');
				$('.dropdown-menu.login-box').css('margin-top','10px');



				if( $('.breadcrumb-holder').length > 0 ){
					$('.breadcrumb-holder').show();
					$('.breadcrumb-holder').addClass('breadcrumb-movil');
					$('body').css('margin-top','100px');
				}else{
					$('body').css('margin-top','20px');
				}
		 
				if( $('.carousel-container').length > 0 ){
					$('body').css('margin-top','190px');
					$('.carousel-container').css('top','100px');
				}
			}
		
		}else if( resolucion === "xs"  ){


			if( $('.header-main').length > 0 ){

		    $('.header-main').addClass('estatico');

		    	if( $('.breadcrumb-holder').length > 0 ){
		    		$('.breadcrumb-holder').show();
		    		$('.breadcrumb-holder').addClass('breadcrumb-movil');
		    		$('body').css('margin-top','100px');
		        }else{
		        	$('body').css('margin-top','60px');
		        }
		 
		    	if( $('.carousel-container').length > 0 ){
		    		$('body').css('margin-top','190px');
		    		$('.carousel-container').css('top','100px');
		    	}
		    }

		  }else{
		        if( $('.header-main').length > 0 ){
		        	$('body').css('margin-top','0px');
		        	$('.header-main').removeClass('estatico');
		        	if( $('.breadcrumb-holder').length > 0 ){
		        		$('.breadcrumb-holder').removeClass('breadcrumb-movil');
		        	}
		        }
		  }
	}
	
	function alinear_verticalmente(){
		$.each( $('.c-vertical') , function( index , value ){
			var alto_padre = $(this).parent().height();
			var padding_top = (alto_padre / 2) - ( $(this).height() / 2 );
			//$(this).css('padding-top', (alto_padre / 2) - ( $(this).height() / 2 ) );
			$(this).animate({'padding-top': padding_top }, "slow");
		});
	}
	
	function js_contentenido_a_modal(){
	   if( findBootstrapEnvironment() === 'xs' ){
	     $.each( $('.js-contenido-copia') , function(){
	       $('.js-contenido-modal').html($(this).html());
	     } );
	   }
	 }
	
/*funcion post, para que botones de tienda en linea funcnionen con el puro codigo html*/
function post(varArray, /*optional*/ actionURL, /*optional*/ redirectMethod, /*optional*/target)
{
	var form = document.createElement("form");
	form.action = actionURL ? actionURL : self.location
			form.method = "post";

	if(target)
		form.target=target;

	if (redirectMethod && redirectMethod.toLowerCase() == 'get')
	{
		form.action += form.action.indexOf('?') == -1 ? '?' : '&';
		for (var i=0; i < varArray.length-1; i+=2)
			form.action += varArray[i] + '=' + encodeURIComponent(varArray[i+1]) + '&';
	}

	else
	{
		for (var i=0; i < varArray.length-1; i+=2)
			AddHiddenFields(form, varArray[i], varArray[i+1]);
	}

	document.body.appendChild(form);
	form.submit();

	return false;
}

function AddHiddenFields(obj, nameFields, valueFields)
{
	if(obj != null && typeof obj == "object")
	{
		var newElement;
		var newElemValue = valueFields;

		if(typeof valueFields == "string" && valueFields.indexOf("%0A") != -1)
		{
			newElement = document.createElement("textarea");
			newElement.style.visibility = "hidden";
			newElemValue = decodeURIComponent(newElemValue.replace(/\+/g, '%20'));
		}

		else
		{
			newElement = document.createElement("input");
			newElement.type = "hidden";
		}

		newElement.name = ""+nameFields+"";
		newElement.id = ""+nameFields+"";
		newElement.value = ""+newElemValue+"";
		obj.appendChild(newElement);
	}
}

//cambio para que los combos se vean hasta arriba en el z-index de algunas secciones
//se puso aqui porque a veces el ready no ha terminado de cargar (ya sea porque son paginas ajax o alguna otra razon)
function ordenar_chosen(){
	var start = 1997;
	var simpleSelectStart = 1997;
	$.each( $('.chosen-container') , function( index , value ){
		$(this).css('z-index' , start );
		start -- ;
	});
	
	$.each( $('.xk-formcontrol-simpleselect') , function( index , value ){
		$(this).css('z-index' , simpleSelectStart );
		simpleSelectStart -- ;
	});
}

/*
 * Devuelve la region que se encuentra almacenada en la session, si no encuentra devuelve un valor vacio
 */
function getRegionFromCookie(){
	var regionId = $.cookie("telcelcom_region");
	if ((typeof regionId === 'undefined') || regionId === '') { regionId = ""; }
	return regionId;
}

/*
 * Devuelve el perfil que se encuentra almacenado en la session, si no encuentra devuelve un valor vacio
 */
function getProfileFromCookie(){
	var profile = $.cookie("telcelcom_profile");
	if ((typeof profile === 'undefined') || profile === '') { profile = ""; }
	return profile;
}

/*
 * Devuelve Bredcrum(jerarquia) en caso de no encontrarlo devolvera 'PERSONAS | HOME'
 */
function getBredcrum(){
	var breadcrumDiv = $("ul.breadcrumbLineal.breadcrumb");
	var jerarquia = "";
	if(breadcrumDiv.length == 0){
		jerarquia = "Personas|Home";
	} else {
		var elems = $("ul.breadcrumbLineal.breadcrumb li");
		$.each(elems, function(){
			if(!$(this).hasClass("bredcrumb-back")){
				jerarquia += $(this).text() + "|";
			}
		});
		jerarquia = jerarquia.substring(0, jerarquia.length - 1);
	}
	return jerarquia;
}

/*
 * Devuelve el dia de la semana y la hora sin minutos. EJ: 'Lunes|18:00' 
 */
function getDTMDate(){
	var f = new Date();
	var h = f.getHours();
	h = ("0" + h).slice(-2);
	var weekday = new Array(7);
	weekday[0]=  "Domingo";
	weekday[1] = "Lunes";
	weekday[2] = "Martes";
	weekday[3] = "Miercoles";
	weekday[4] = "Jueves";
	weekday[5] = "Viernes";
	weekday[6] = "Sabado";
	var d = weekday[f.getDay()];
	return d + '|' + h + ":00";
}

/*
 * Devuelve la resolucion del navegador.
 */
function getBrowserResolution(){
	/***
	w x h
	***/
	var width = $(window).width();
	var height = $(window).height();
	var resolution = width + "x" + height;
	return resolution;
}

/*
 * Devuelve la seccion de equipos donde se va a ejecutar dlMetri
 */
function getDevicePageName(){
	pageName = "";
	ulrPageName = window.location.pathname.toLowerCase();
	if(ulrPageName.indexOf("/tablets") > 0){
		pageName = "Equipos|Tablets";
	} else if (ulrPageName.indexOf("/wifi-movil") > 0) {
		pageName = "Equipos|Wifi Movil";
	} else if (ulrPageName.indexOf("/modems-usb") > 0) {
		pageName = "Equipos|Modems USB";
	} else if (ulrPageName.indexOf("/telefonos-y-smartphones") > 0) {
		pageName = "Equipos|Telefonos y Smartphones";
	} else {
		pageName = "Home|Amigo Kit";
	}
	return pageName;
}
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2006, 2014 Klaus Hartl
 * Released under the MIT license
 */
(function (factory) {
	if (typeof define === 'function' && define.amd) {
		// AMD
		define(['jquery'], factory);
	} else if (typeof exports === 'object') {
		// CommonJS
		factory(require('jquery'));
	} else {
		// Browser globals
		factory(jQuery);
	}
}(function ($) {

	var pluses = /\+/g;

	function encode(s) {
		return config.raw ? s : encodeURIComponent(s);
	}

	function decode(s) {
		return config.raw ? s : decodeURIComponent(s);
	}

	function stringifyCookieValue(value) {
		return encode(config.json ? JSON.stringify(value) : String(value));
	}

	function parseCookieValue(s) {
		if (s.indexOf('"') === 0) {
			// This is a quoted cookie as according to RFC2068, unescape...
			s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, '\\');
		}

		try {
			// Replace server-side written pluses with spaces.
			// If we can't decode the cookie, ignore it, it's unusable.
			// If we can't parse the cookie, ignore it, it's unusable.
			s = decodeURIComponent(s.replace(pluses, ' '));
			return config.json ? JSON.parse(s) : s;
		} catch(e) {}
	}

	function read(s, converter) {
		var value = config.raw ? s : parseCookieValue(s);
		return $.isFunction(converter) ? converter(value) : value;
	}

	var config = $.cookie = function (key, value, options) {

		// Write

		if (arguments.length > 1 && !$.isFunction(value)) {
			options = $.extend({}, config.defaults, options);

			if (typeof options.expires === 'number') {
				var days = options.expires, t = options.expires = new Date();
				t.setTime(+t + days * 864e+5);
			}

			return (document.cookie = [
				encode(key), '=', stringifyCookieValue(value),
				options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
				options.path    ? '; path=' + options.path : '',
				options.domain  ? '; domain=' + options.domain : '',
				options.secure  ? '; secure' : ''
			].join(''));
		}

		// Read

		var result = key ? undefined : {};

		// To prevent the for loop in the first place assign an empty array
		// in case there are no cookies at all. Also prevents odd result when
		// calling $.cookie().
		var cookies = document.cookie ? document.cookie.split('; ') : [];

		for (var i = 0, l = cookies.length; i < l; i++) {
			var parts = cookies[i].split('=');
			var name = decode(parts.shift());
			var cookie = parts.join('=');

			if (key && key === name) {
				// If second argument (value) is a function it's a converter...
				result = read(cookie, value);
				break;
			}

			// Prevent storing a cookie that we couldn't decode.
			if (!key && (cookie = read(cookie)) !== undefined) {
				result[name] = cookie;
			}
		}

		return result;
	};

	config.defaults = {};

	$.removeCookie = function (key, options) {
		if ($.cookie(key) === undefined) {
			return false;
		}

		// Must not alter options, thus extending a fresh object...
		$.cookie(key, '', $.extend({}, options, { expires: -1 }));
		return !$.cookie(key);
	};

}));

/**
 * Telcel.com User Profiler
 * Version: 1.0
 * Author: AOliva
 * Date: 10/22/14.
 *
 * This Javascript is used for the implementation of the profiler integration with the telcel.com site.
 * It will create a group of cookies based on data obtained from different sources that will be used to know
 * if the final user is "Amigo" or Plan.
 * 
 * The cases that will occur to set the cookies are the following:
 *      Case 1:
 *          The phone number, region and profile cookie is already stored on browser. I this case the external profile
 *          service of Telcel is not called and the user is redirected to the proper homepage based on the cookies' data.
 *      Case 2:
 *          The request is from a device on Telcel's network and has the Header enrichment, no cookies has been set
 *          on the user's browser. A AJAX call is made to a servlet that will check on the request headers the one  that
 *          will contain the user's phone number, after getting the response another AJAX call is made to the external
 *          profile service of Telcel to get the profile information and set the cookies with the proper data.
 *      Case 3:
 *          The there's no cookie and is not a mobile on Telcel's network, the user is prompted to enter
 *          phone number. The user gets to the "Amigo" home page and is prompted to enter a phone number on a form and
 *          a request with entered phone number is sent to the external profile service to retrieve the user's profile
 *          and set the cookies with the proper data.
 *
 */
$(function () {
    var PROFILER_MODAL_OBJ = $('#modalSegmentacion');
    var PROFILER_URL = "http://www2.telcel.com/rs/Perfil.php?telefono=";
    //var NUMBER_CHECKER_URL = "http://www2.telcel.com/rs/header.php";
    var NUMBER_CHECKER_URL = "/bin/telcelcom/nocacheable/profiler/checkheader";
    var HOME_NO_CLIENT = "/content/telcel.html";
    var HOME_PLAN = "/content/telcel/plan.html";
    var HOME_AMIGO = "/content/telcel/amigo.html";
    var PROFILE_PREPAID = "PREPAGO";
    var PROFILE_PLAN = "POSPAGO";
    var PROFILE_HYBRID = "MIXTO";
    var PROFILE_NO_CLIENT = "NOCLIENT";
    var DEFAULT_REGION= 9;
    var DEFAULT_PROFILE = "NOCLIENT"
    var COOKIE_LIFE_TIME = 30;
    var UserProfiler = (function(v) {
        return v;
    } (UserProfiler || {}));

    var endsWith = function (str, suffix) {
        return str.indexOf(suffix, str.length - suffix.length) !== -1;
    }

    var clearPathName = function(path){
        result = path;
        if(typeof path !=='undefined' && endsWith(path, ".html")){
            result = path.substring(path, path.length-5);
        }
        return result;
    };
    UserProfiler.cookieManager = {
        checkForCookies: function() {
            var phoneCookie = $.cookie("telcelcom_tel");
            var profileCookie = $.cookie("telcelcom_profile");
            if(profileCookie != undefined) {
                UserProfiler.remoteCalls.redirectToHome(profileCookie);
            } else {
                if(phoneCookie != undefined){
                    UserProfiler.remoteCalls.callProfiler(phoneCookie, "");
                } else {
                    UserProfiler.remoteCalls.checkHeader();
                }
            }
        },
        createPhoneCookie : function(phoneNumber) {
            if(phoneNumber) {
                $.cookie("telcelcom_tel", phoneNumber, {path : '/',  expires : COOKIE_LIFE_TIME});
            }
        },
        createProfileCookie : function(profile) {
            if(profile) {
                $.cookie("telcelcom_profile", profile, {path : '/',  expires : COOKIE_LIFE_TIME});
            }
        },
        createRegionCookie : function(regionCode) {
            if(regionCode) {
                $.cookie("telcelcom_region", regionCode, {path : '/',  expires : COOKIE_LIFE_TIME});
                $.cookie("telceltienda_region", regionCode, {path : '/',  expires : COOKIE_LIFE_TIME, domain  : 'telcel.com'});
            }
        },
        createStateCookie : function(state) {
            $.cookie("telcelcom_estado", state, {path : '/',  expires : COOKIE_LIFE_TIME});
        },
        createAllCookies : function(phoneNumber, profile, regionCode, state) {
            UserProfiler.cookieManager.createPhoneCookie(phoneNumber);
            UserProfiler.cookieManager.createProfileCookie(profile);
            UserProfiler.cookieManager.createRegionCookie(regionCode);
            UserProfiler.cookieManager.createStateCookie(state);
        },
        /**
         * method for testing purposes only
         */
        cookieTest : function() {
            $.cookie("telcelcom_tel", "5510104351");
        }
    }

    UserProfiler.remoteCalls = {
        callProfiler: function(phoneNumber, state) {
            $.post(
                PROFILER_URL + phoneNumber,
                function(data) {
                    var opCode = data.codigo;
                    if(opCode && opCode === "0") {
                        var profile = data.perfil;
                        var region = data.region;
                        UserProfiler.cookieManager.createAllCookies(phoneNumber, profile, region, state);
                        UserProfiler.remoteCalls.redirectToHome(profile);
                    }
                },
                "json"
            )
        },
        redirectToHome: function(profile) {
            if((profile === PROFILE_PLAN || profile === PROFILE_HYBRID)) {
                if(window.location.pathname !== HOME_PLAN) {
                    window.location = HOME_PLAN;
                } else {
                    $('#modalSegmentacion').modal('hide');
                }
            } else if (profile === PROFILE_PREPAID) {
                if(window.location.pathname !== HOME_AMIGO) {
                    window.location = HOME_AMIGO;
                } else {
                    $('#modalSegmentacion').modal('hide');
                }
            }else if (profile === PROFILE_NO_CLIENT){
                if(window.location.pathname !== HOME_NO_CLIENT) {
                    window.location = HOME_NO_CLIENT;
                } else {
                    $('#modalSegmentacion').modal('hide');
                }
            }
        },
        checkHeader: function() {
            var phoneNumber = "";
            $.ajax({
                url: NUMBER_CHECKER_URL,
                type: 'GET',
                dataType: 'json',
                success: function(data) {
                    $telefono = data.msisdn;
                    if($telefono.length) {
                        UserProfiler.remoteCalls.callProfiler($telefono, "");
                    } else {
                        UserProfiler.modalManager.callModal();
                    }
                },
                error: function() {
                    UserProfiler.modalManager.callModal();
                }
            });
        }
    }

    /*
    UserProfiler.modalManager = {
        callModal: function() {
            //Launch of users modal on home
            if ($('.home').length) {
                var profilerModalPath = $('#modalSegmentacion').data('modalPath');
                $modal = $('#modalSegmentacion').modal({
                    remote: profilerModalPath + "/jcr:content/mainPar/mainmodalfirsstep.html",//'/etc/designs/telcel/telcelcom/ajax/segmentacion-usuarios.html',
                    backdrop: true
                });

                $modal.on('loaded.bs.modal', function (e) {
                    UserProfiler.modalManager.actualStep = 1;
                    $('.customSelect').chosen({
                        width: "100%"
                    });

                    $("#capa-segmentacion").on("keypress",'#numero',function (e) {
                        if (e.which==13){
                            $(this).closest('form').validator('validate').submit();
                            return false;
                        }
                    });

                    // Eventos form soy cliente
                    $("#capa-segmentacion").on("submit","#from-cliente-profiler",function(e) {
                        e.preventDefault();
                        var state = $("#marca_cliente_chosen span").html();
                        var region = $("#marca_cliente option:selected");
                        UserProfiler.cookieManager.createStateCookie(state);
                        UserProfiler.cookieManager.createRegionCookie(region.val());
                        var phoneNumber = $("#numero").val();
                        if(phoneNumber.trim()!=""){
                            if (phoneNumber.length>2 && phoneNumber.indexOf("52")==0){
                                phoneNumber = phoneNumber.substring(2,phoneNumber.length);
                            }
                            UserProfiler.remoteCalls.callProfiler(phoneNumber, "");
                        }else{
                            if (!region.val()){
                                UserProfiler.cookieManager.createRegionCookie(DEFAULT_REGION);
                            }
                            UserProfiler.modalManager.actualStep = -1;
                            window.location = HOME_AMIGO;
                        }
                    });

                    // Eventos form no cliente
                    $("#capa-segmentacion").on("submit","#from-nocliente-profiler",function(e) {
                        e.preventDefault();
                        var state = $("#marca_nocliente_chosen span").html();
                        var region = $("#marca_nocliente option:selected");
                        if (region.val()){
                            UserProfiler.cookieManager.createRegionCookie(region.val());
                        }else{
                            UserProfiler.cookieManager.createRegionCookie(DEFAULT_REGION);
                        }
						UserProfiler.cookieManager.createProfileCookie(DEFAULT_PROFILE);
                        UserProfiler.cookieManager.createStateCookie(state);
                        UserProfiler.modalManager.actualStep = -1;
                        $('#modalSegmentacion').modal('hide');
                        if (clearPathName(window.location.pathname)!==clearPathName(HOME_NO_CLIENT)){
                            if (window.location.pathname.trim()!=="/"){
                                window.location = HOME_NO_CLIENT;
                            }
                        }
                    });
                    //Tracking de paso actual
                    $('.perfilador-action').click(function(e){
                        if($(this).data('option')=='cliente'){
                            UserProfiler.modalManager.actualStep = 3;
                            UserProfiler.cookieManager.createProfileCookie(PROFILE_PREPAID);
                        }else{
                            UserProfiler.modalManager.actualStep = 2;
                        }
                    });
                });

                // Acciones de cierre de modal
                $modal.on('hide.bs.modal',function(e){
                   if (UserProfiler.modalManager.actualStep==2){
                       if (clearPathName(window.location.pathname)!==clearPathName(HOME_NO_CLIENT)){
                           window.location = HOME_NO_CLIENT;
                       }
                   }else if (UserProfiler.modalManager.actualStep==3){
                       UserProfiler.cookieManager.createRegionCookie(DEFAULT_REGION);
                       window.location = HOME_AMIGO;
                   }
                });
            }
        },
        actualStep: 0
    }
    */
    
    //UserProfiler.cookieManager.cookieTest();
    if($('.home').length) {
        if(PROFILER_MODAL_OBJ.attr("data-plan-page")) {
            HOME_PLAN = PROFILER_MODAL_OBJ.attr("data-plan-page");
        }
        if(PROFILER_MODAL_OBJ.attr("data-amigo-page")) {
            HOME_AMIGO = PROFILER_MODAL_OBJ.attr("data-amigo-page");
        }
        if(PROFILER_MODAL_OBJ.attr("data-home-page")) {
            HOME_NO_CLIENT = PROFILER_MODAL_OBJ.attr("data-home-page");
        }
        UserProfiler.cookieManager.checkForCookies();

        //No client clicked url
        $('body').on('click', '.noClientCookie', function(){
            var date = new Date();
            var minutes = 60;
            date.setTime(date.getTime() + (minutes * 60 * 1000));
            $.cookie("telcelcom_profile", PROFILE_NO_CLIENT, {path : '/',  expires : date});
        });
    }

    $('body').on('click', '.js-modal-link', function (e) {
            var URL = $(this).attr('href'),
                target = $($(this).data('target'));
            $(target).animate({'opacity': '.5'}, function () {
                loader = $('<div/>', {
                    'class': 'spinner-holder clear'
                }).css({'position': 'absolute', 'bottom': '50%', 'right': '50%'}).appendTo(target).spin('defaultSpin');
                $.ajax({
                    url: URL,
                    success: function (data, textStatus, jqXHR) {
                        /*TO-DO Create a custom plugin to perform ajax links*/
                        $(target).find('.spinner-holder').spin(false);
                        $(target).html(data).css({'opacity': '1', 'height': 'auto'}).find('.customCheck').each(function () {
                            $(this).prettyCheckable();
                        });
                        $(target).find('.customSelect').each(function () {
                            var search = $(this).data('search');
                            var ancho = $(this).data('width') + '%';
                            $(this).chosen({
                                disable_search_threshold: search,
                                width: ancho
                            })
                        });
                        $(target).find('form').validator();

                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        $('<div/>', {
                            'class': 'ajax-error text-center',
                            'text': 'Error'
                        }).appendTo(target);
                        target.find('.spinner-holder').spin(false);
                    }
                });
            });
            e.preventDefault();
    });
});

function getCurrentDate() {
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth()+1; //January is 0!

    var yyyy = today.getFullYear();
    if(dd<10){
        dd='0'+dd
    }
    if(mm<10){
        mm='0'+mm
    }
    var today = mm +'/'+dd+'/'+yyyy;
    return today;
}

/**
 * Created by antonio on 3/30/15.
 */

function checkForDigit(text) {
  return  /^-?\d/.test(text);
}

function parseStringValue(value) {
    var textVal = value,
        numValue = parseInt(textVal);
    numValue = numValue.toString();
    textVal = textVal.replace(numValue, '');
     return   '<span class="number">' + numValue + '</span><span class="text">' + textVal + '</span>';
}

function formatPrice(n, currency) {
    return currency + n.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, "$1,");
}

function generateTimeStamp() {
    return Date.now()/1000 | 0;
}

$(document).ready(function(){
    
    if($(".btn-chat-footer") && $(".btn-chat-footer") != null){
        var chatBtnLink=$("#chtBtnLinkDiv").data("chatbtnlink");
        if(window.location.pathname.indexOf("/empresas") >= 0  || window.location.pathname.indexOf("/cf")==0 || window.location.pathname.indexOf("/content/telcel/configuracion/chat-empresa.html")==0){
            chatBtnLink=$("#chtBtnLinkDiv").data("chatbtnlinkempresa");
        }
        $(".btn-chat-footer").attr('href',chatBtnLink+'.html');
    }
    
    $(".menus .list-unstyled a").on('click', function(){
        var currentLink = $(this).attr('href'),
            targetLink=$(this).attr('target');
        if(currentLink.indexOf("#!") != -1) {
            if (typeof targetLink=='undefined'||(typeof targetLink!='undefined'&& (targetLink.trim()=='' || targetLink.trim()=='_self' ))) {
                if(/iPhone/i.test(navigator.userAgent)) {
                    $.pathchange.changeTo(currentLink.split("#!")[0]+"/");
                    window.location.href = currentLink;
                }else{

                    $.pathchange.changeTo(currentLink.split("#!")[0]+"/");
                    window.location.href = currentLink;
                    /*setTimeout(function(){
                        //window.open(currentLink, "_self");
                        window.location.reload();
                    },975);*/
                }
            }
		}
    });
    $('body').on('click','main a[href*="#!"]:not([data-toggle*="tab"])', function(){

        var currentLink = $(this).attr('href'),
            targetLink=$(this).attr('target');
        if(currentLink.indexOf("#!") != -1&&!$(this).hasClass('xk-prevent-link')) {
            if (typeof targetLink=='undefined'||(typeof targetLink!='undefined'&&targetLink.trim()=='_self')){
                if(/iPhone/i.test(navigator.userAgent)) {
                    $.pathchange.changeTo(currentLink.split("#!")[0]+"/");
                    window.location.href = currentLink;
                }else{
                    window.location = currentLink;
                    setTimeout(function(){
                        window.location.reload();
                    },975);
                }
            }
        }
    });


    /**Chat Button **/
    var findChatButtons = function($jq) {
        $jq.each(function () {
            var $chat_button = $(this),
                template = "<h3 class='text-center'>${timeOffMessage}</h3>";


            var timeStart = $chat_button.attr('data-time-start').split(","),
                timeEnd = $chat_button.attr('data-time-end').split(",");
            var nowTime = moment.tz(moment(), 'America/Mexico_City'),
                startTime = moment.tz(moment(), 'America/Mexico_City').hours(timeStart[0]).minutes(timeStart[1]),
                endTime = moment.tz(moment(), 'America/Mexico_City').hours(timeEnd[0]).minutes(timeEnd[1]);

            if (!nowTime.isBetween(startTime, endTime)) {
                var message = $chat_button.attr('data-message'),
                    html = template.replace("${timeOffMessage}",
                        message.replace("${hora_inicio}", startTime.format("HH:mm")).replace("${hora_fin}", endTime.format("HH:mm")));
                $chat_button.html(html);
                return;
            }

        });
    };

    findChatButtons($('.xk-chat-button'));

    $('body').on('support.chatbutton','xk-support-chat-button', function(evt){
        findChatButtons($(evt.target).find('.xk-chat-button'));
    });
});

var DEFAULT_LOGIN_URL = "https://www.mitelcel.com/mitelcel/login/auth";
var DEFAULT_FORGOTPASSWORD_URL = "https://www.mitelcel.com/mitelcel/login?recuperar=0";
var DEFAULT_SIGNUP_URL = "https://www.mitelcel.com/mitelcel/login";

var MiTelcelLogin = (function(v) {
    return v;
} (MiTelcelLogin || {}));

MiTelcelLogin.remoteCalls = {
    login: function(url, username, password) {
        /*console.log("sending request: login");
        console.log("URL: "+ url);
        console.log("username: "+ username);
        console.log("password: "+ password); */
        //alert("sending POST to" + url);
        $("#formLogin").attr("action", url);
        $("#num-telcel").attr("name","j_username");
        $("#password").attr("name", "j_password");
        $("#formLogin").submit();
        /*$.post(
            'https://www.mitelcel.com/mitelcel/login/auth',
            { j_username:username, j_password:password }
        ).done(function( data ) {
            window.location = "http://mitelcel.com";
        });*/


    },
	forgotPassword: function(url, phoneNumber) {
        //console.log("sending request: forgot password");
        $.post(
            url,
            { j_phonenumber: phoneNumber }, // TODO: verify which is the name of the parameter to be sent
            function(data) {
                console.log("TODO: redirect if login success.");   
            },
            "json"
        )
    },
    signUp: function(url, phoneNumber) {
       // console.log("sending request: sign up");
        $.post(
            url,
            { j_phonenumber: phoneNumber }, // TODO: verify which is the name of the parameter to be sent
            function(data) {
                console.log("TODO: redirect if login success.");   
            },
            "json"
        )
    }
}

$(function() {
  	$( "#loginButton" ).click(function() {
        //alert($("#formLogin").attr("data-login-url"));
      	var username = $("#num-telcel").val().trim();
        var password = $("#password").val().trim();
        var loginURL = $("#formLogin").attr("data-login-url");

        //if ((username !== "") && (password !== "")) {
            if (loginURL !== "") {
              //  alert("test");

				MiTelcelLogin.remoteCalls.login(loginURL, username, password);
            }
            //else { // Use default URL
               // alert("test no");
             //   MiTelcelLogin.remoteCalls.login(DEFAULT_LOGIN_URL, username, password);
           // }
        //}
    });

    $( "#forgotPasswordButton" ).click(function() {
      	var phonenumber = $("#num-telcel2").val().trim();
        var forgotPasswordURL = $("#forgotPasswordURL").val();

        if (phonenumber !== "") {
            if (forgotPasswordURL !== "") {
				MiTelcelLogin.remoteCalls.forgotPassword(forgotPasswordURL, phonenumber);
            }
            else { // Use default URL
                MiTelcelLogin.remoteCalls.forgotPassword(DEFAULT_FORGOTPASSWORD_URL, phonenumber);
            }
        }
    });

    $( "#signUpButton" ).click(function() {
      	var phonenumber = $("#num-telcel3").val().trim();
        var signUpURL = $("#signUpURL").val();

        if (phonenumber !== "") {
            if (signUpURL !== "") {
				MiTelcelLogin.remoteCalls.signUp(signUpURL, phonenumber);
            }
            else { // Use default URL
                MiTelcelLogin.remoteCalls.signUp(DEFAULT_SIGNUP_URL, phonenumber);
            }
        }
    });
    //check for user agent in order to change links for mobile.
    var signUpLink = $('#signUpLink').attr('data-desktop-link');
    $('#signUpLink').attr('href', signUpLink);
    var forgotPassLink = $('#forgotPassLink').attr('data-desktop-link');
    $('#forgotPassLink').attr('href', forgotPassLink);
    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        signUpLink = $('#signUpLink').attr('data-mobile-link');
        $('#signUpLink').attr('href', signUpLink);
        forgotPassLink = $('#forgotPassLink').attr('data-mobile-link');
        $('#forgotPassLink').attr('href', forgotPassLink);
    }
});
//! moment.js
//! version : 2.9.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function c(a,b){return Bb.call(a,b)}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function e(a){vb.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function f(a,b){var c=!0;return o(function(){return c&&(e(a),c=!1),b.apply(this,arguments)},b)}function g(a,b){sc[a]||(e(b),sc[a]=!0)}function h(a,b){return function(c){return r(a.call(this,c),b)}}function i(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function j(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function k(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function l(){}function m(a,b){b!==!1&&H(a),p(this,a),this._d=new Date(+a._d),uc===!1&&(uc=!0,vb.updateOffset(this),uc=!1)}function n(a){var b=A(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=vb.localeData(),this._bubble()}function o(a,b){for(var d in b)c(b,d)&&(a[d]=b[d]);return c(b,"toString")&&(a.toString=b.toString),c(b,"valueOf")&&(a.valueOf=b.valueOf),a}function p(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Kb.length>0)for(c in Kb)d=Kb[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function q(a){return 0>a?Math.ceil(a):Math.floor(a)}function r(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function s(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function t(a,b){var c;return b=M(b,a),a.isBefore(b)?c=s(a,b):(c=s(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function u(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(g(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=vb.duration(c,d),v(this,e,a),this}}function v(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&pb(a,"Date",ob(a,"Date")+f*c),g&&nb(a,ob(a,"Month")+g*c),d&&vb.updateOffset(a,f||g)}function w(a){return"[object Array]"===Object.prototype.toString.call(a)}function x(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function y(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&C(a[d])!==C(b[d]))&&g++;return g+f}function z(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=lc[a]||mc[b]||b}return a}function A(a){var b,d,e={};for(d in a)c(a,d)&&(b=z(d),b&&(e[b]=a[d]));return e}function B(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}vb[b]=function(e,f){var g,h,i=vb._locale[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=vb().utc().set(d,a);return i.call(vb._locale,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function C(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function D(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function E(a,b,c){return jb(vb([a,11,31+b-c]),b,c).week}function F(a){return G(a)?366:365}function G(a){return a%4===0&&a%100!==0||a%400===0}function H(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[Db]<0||a._a[Db]>11?Db:a._a[Eb]<1||a._a[Eb]>D(a._a[Cb],a._a[Db])?Eb:a._a[Fb]<0||a._a[Fb]>24||24===a._a[Fb]&&(0!==a._a[Gb]||0!==a._a[Hb]||0!==a._a[Ib])?Fb:a._a[Gb]<0||a._a[Gb]>59?Gb:a._a[Hb]<0||a._a[Hb]>59?Hb:a._a[Ib]<0||a._a[Ib]>999?Ib:-1,a._pf._overflowDayOfYear&&(Cb>b||b>Eb)&&(b=Eb),a._pf.overflow=b)}function I(b){return null==b._isValid&&(b._isValid=!isNaN(b._d.getTime())&&b._pf.overflow<0&&!b._pf.empty&&!b._pf.invalidMonth&&!b._pf.nullInput&&!b._pf.invalidFormat&&!b._pf.userInvalidated,b._strict&&(b._isValid=b._isValid&&0===b._pf.charsLeftOver&&0===b._pf.unusedTokens.length&&b._pf.bigHour===a)),b._isValid}function J(a){return a?a.toLowerCase().replace("_","-"):a}function K(a){for(var b,c,d,e,f=0;f<a.length;){for(e=J(a[f]).split("-"),b=e.length,c=J(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=L(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&y(e,c,!0)>=b-1)break;b--}f++}return null}function L(a){var b=null;if(!Jb[a]&&Lb)try{b=vb.locale(),require("./locale/"+a),vb.locale(b)}catch(c){}return Jb[a]}function M(a,b){var c,d;return b._isUTC?(c=b.clone(),d=(vb.isMoment(a)||x(a)?+a:+vb(a))-+c,c._d.setTime(+c._d+d),vb.updateOffset(c,!1),c):vb(a).local()}function N(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function O(a){var b,c,d=a.match(Pb);for(b=0,c=d.length;c>b;b++)d[b]=rc[d[b]]?rc[d[b]]:N(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function P(a,b){return a.isValid()?(b=Q(b,a.localeData()),nc[b]||(nc[b]=O(b)),nc[b](a)):a.localeData().invalidDate()}function Q(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Qb.lastIndex=0;d>=0&&Qb.test(a);)a=a.replace(Qb,c),Qb.lastIndex=0,d-=1;return a}function R(a,b){var c,d=b._strict;switch(a){case"Q":return _b;case"DDDD":return bc;case"YYYY":case"GGGG":case"gggg":return d?cc:Tb;case"Y":case"G":case"g":return ec;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?dc:Ub;case"S":if(d)return _b;case"SS":if(d)return ac;case"SSS":if(d)return bc;case"DDD":return Sb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Wb;case"a":case"A":return b._locale._meridiemParse;case"x":return Zb;case"X":return $b;case"Z":case"ZZ":return Xb;case"T":return Yb;case"SSSS":return Vb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?ac:Rb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Rb;case"Do":return d?b._locale._ordinalParse:b._locale._ordinalParseLenient;default:return c=new RegExp($(Z(a.replace("\\","")),"i"))}}function S(a){a=a||"";var b=a.match(Xb)||[],c=b[b.length-1]||[],d=(c+"").match(jc)||["-",0,0],e=+(60*d[1])+C(d[2]);return"+"===d[0]?e:-e}function T(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[Db]=3*(C(b)-1));break;case"M":case"MM":null!=b&&(e[Db]=C(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b,a,c._strict),null!=d?e[Db]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[Eb]=C(b));break;case"Do":null!=b&&(e[Eb]=C(parseInt(b.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=C(b));break;case"YY":e[Cb]=vb.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[Cb]=C(b);break;case"a":case"A":c._meridiem=b;break;case"h":case"hh":c._pf.bigHour=!0;case"H":case"HH":e[Fb]=C(b);break;case"m":case"mm":e[Gb]=C(b);break;case"s":case"ss":e[Hb]=C(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Ib]=C(1e3*("0."+b));break;case"x":c._d=new Date(C(b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=S(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=C(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=vb.parseTwoDigitYear(b)}}function U(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[Cb],jb(vb(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[Cb],jb(vb(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,g>f&&++e):f=null!=c.e?c.e+g:g),i=kb(d,e,f,h,g),a._a[Cb]=i.year,a._dayOfYear=i.dayOfYear}function V(a){var c,d,e,f,g=[];if(!a._d){for(e=X(a),a._w&&null==a._a[Eb]&&null==a._a[Db]&&U(a),a._dayOfYear&&(f=b(a._a[Cb],e[Cb]),a._dayOfYear>F(f)&&(a._pf._overflowDayOfYear=!0),d=fb(f,0,a._dayOfYear),a._a[Db]=d.getUTCMonth(),a._a[Eb]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=g[c]=e[c];for(;7>c;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];24===a._a[Fb]&&0===a._a[Gb]&&0===a._a[Hb]&&0===a._a[Ib]&&(a._nextDay=!0,a._a[Fb]=0),a._d=(a._useUTC?fb:eb).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[Fb]=24)}}function W(a){var b;a._d||(b=A(a._i),a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],V(a))}function X(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function Y(b){if(b._f===vb.ISO_8601)return void ab(b);b._a=[],b._pf.empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,j=0;for(e=Q(b._f,b._locale).match(Pb)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(R(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&b._pf.unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),rc[f]?(d?b._pf.empty=!1:b._pf.unusedTokens.push(f),T(f,d,b)):b._strict&&!d&&b._pf.unusedTokens.push(f);b._pf.charsLeftOver=i-j,h.length>0&&b._pf.unusedInput.push(h),b._pf.bigHour===!0&&b._a[Fb]<=12&&(b._pf.bigHour=a),b._a[Fb]=k(b._locale,b._a[Fb],b._meridiem),V(b),H(b)}function Z(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function $(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function _(a){var b,c,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,b=p({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._pf=d(),b._f=a._f[f],Y(b),I(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||e>g)&&(e=g,c=b));o(a,c||b)}function ab(a){var b,c,d=a._i,e=fc.exec(d);if(e){for(a._pf.iso=!0,b=0,c=hc.length;c>b;b++)if(hc[b][1].exec(d)){a._f=hc[b][0]+(e[6]||" ");break}for(b=0,c=ic.length;c>b;b++)if(ic[b][1].exec(d)){a._f+=ic[b][0];break}d.match(Xb)&&(a._f+="Z"),Y(a)}else a._isValid=!1}function bb(a){ab(a),a._isValid===!1&&(delete a._isValid,vb.createFromInputFallback(a))}function cb(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function db(b){var c,d=b._i;d===a?b._d=new Date:x(d)?b._d=new Date(+d):null!==(c=Mb.exec(d))?b._d=new Date(+c[1]):"string"==typeof d?bb(b):w(d)?(b._a=cb(d.slice(0),function(a){return parseInt(a,10)}),V(b)):"object"==typeof d?W(b):"number"==typeof d?b._d=new Date(d):vb.createFromInputFallback(b)}function eb(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function fb(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function gb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function hb(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function ib(a,b,c){var d=vb.duration(a).abs(),e=Ab(d.as("s")),f=Ab(d.as("m")),g=Ab(d.as("h")),h=Ab(d.as("d")),i=Ab(d.as("M")),j=Ab(d.as("y")),k=e<oc.s&&["s",e]||1===f&&["m"]||f<oc.m&&["mm",f]||1===g&&["h"]||g<oc.h&&["hh",g]||1===h&&["d"]||h<oc.d&&["dd",h]||1===i&&["M"]||i<oc.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,hb.apply({},k)}function jb(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=vb(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function kb(a,b,c,d,e){var f,g,h=fb(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:F(a-1)+g}}function lb(b){var c,d=b._i,e=b._f;return b._locale=b._locale||vb.localeData(b._l),null===d||e===a&&""===d?vb.invalid({nullInput:!0}):("string"==typeof d&&(b._i=d=b._locale.preparse(d)),vb.isMoment(d)?new m(d,!0):(e?w(e)?_(b):Y(b):db(b),c=new m(b),c._nextDay&&(c.add(1,"d"),c._nextDay=a),c))}function mb(a,b){var c,d;if(1===b.length&&w(b[0])&&(b=b[0]),!b.length)return vb();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function nb(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),D(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function ob(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function pb(a,b,c){return"Month"===b?nb(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function qb(a,b){return function(c){return null!=c?(pb(this,a,c),vb.updateOffset(this,b),this):ob(this,a)}}function rb(a){return 400*a/146097}function sb(a){return 146097*a/400}function tb(a){vb.duration.fn[a]=function(){return this._data[a]}}function ub(a){"undefined"==typeof ender&&(wb=zb.moment,zb.moment=a?f("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",vb):vb)}for(var vb,wb,xb,yb="2.9.0",zb="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,Ab=Math.round,Bb=Object.prototype.hasOwnProperty,Cb=0,Db=1,Eb=2,Fb=3,Gb=4,Hb=5,Ib=6,Jb={},Kb=[],Lb="undefined"!=typeof module&&module&&module.exports,Mb=/^\/?Date\((\-?\d+)/i,Nb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ob=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Pb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Qb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Rb=/\d\d?/,Sb=/\d{1,3}/,Tb=/\d{1,4}/,Ub=/[+\-]?\d{1,6}/,Vb=/\d+/,Wb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Xb=/Z|[\+\-]\d\d:?\d\d/gi,Yb=/T/i,Zb=/[\+\-]?\d+/,$b=/[\+\-]?\d+(\.\d{1,3})?/,_b=/\d/,ac=/\d\d/,bc=/\d{3}/,cc=/\d{4}/,dc=/[+-]?\d{6}/,ec=/[+-]?\d+/,fc=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gc="YYYY-MM-DDTHH:mm:ssZ",hc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ic=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],jc=/([\+\-]|\d\d)/gi,kc=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),lc={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},mc={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},nc={},oc={s:45,m:45,h:22,d:26,M:11},pc="DDD w W M D d".split(" "),qc="M D H h m s w W".split(" "),rc={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return r(this.year()%100,2)},YYYY:function(){return r(this.year(),4)},YYYYY:function(){return r(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+r(Math.abs(a),6)},gg:function(){return r(this.weekYear()%100,2)},gggg:function(){return r(this.weekYear(),4)},ggggg:function(){return r(this.weekYear(),5)},GG:function(){return r(this.isoWeekYear()%100,2)},GGGG:function(){return r(this.isoWeekYear(),4)},GGGGG:function(){return r(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return C(this.milliseconds()/100)},SS:function(){return r(C(this.milliseconds()/10),2)},SSS:function(){return r(this.milliseconds(),3)},SSSS:function(){return r(this.milliseconds(),3)},Z:function(){var a=this.utcOffset(),b="+";return 0>a&&(a=-a,b="-"),b+r(C(a/60),2)+":"+r(C(a)%60,2)},ZZ:function(){var a=this.utcOffset(),b="+";return 0>a&&(a=-a,b="-"),b+r(C(a/60),2)+r(C(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},sc={},tc=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],uc=!1;pc.length;)xb=pc.pop(),rc[xb+"o"]=i(rc[xb],xb);for(;qc.length;)xb=qc.pop(),rc[xb+xb]=h(rc[xb],2);rc.DDDD=h(rc.DDD,3),o(l.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=vb.utc([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=vb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.apply(b,[c]):d},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(a){return a},postformat:function(a){return a},week:function(a){return jb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),vb=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=b,g._f=c,g._l=e,g._strict=f,g._isUTC=!1,g._pf=d(),lb(g)},vb.suppressDeprecationWarnings=!1,vb.createFromInputFallback=f("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),vb.min=function(){var a=[].slice.call(arguments,0);return mb("isBefore",a)},vb.max=function(){var a=[].slice.call(arguments,0);return mb("isAfter",a)},vb.utc=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=c,g._strict=f,g._pf=d(),lb(g).utc()},vb.unix=function(a){return vb(1e3*a)},vb.duration=function(a,b){var d,e,f,g,h=a,i=null;return vb.isDuration(a)?h={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(h={},b?h[b]=a:h.milliseconds=a):(i=Nb.exec(a))?(d="-"===i[1]?-1:1,h={y:0,d:C(i[Eb])*d,h:C(i[Fb])*d,m:C(i[Gb])*d,s:C(i[Hb])*d,ms:C(i[Ib])*d}):(i=Ob.exec(a))?(d="-"===i[1]?-1:1,f=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*d},h={y:f(i[2]),M:f(i[3]),d:f(i[4]),h:f(i[5]),m:f(i[6]),s:f(i[7]),w:f(i[8])}):null==h?h={}:"object"==typeof h&&("from"in h||"to"in h)&&(g=t(vb(h.from),vb(h.to)),h={},h.ms=g.milliseconds,h.M=g.months),e=new n(h),vb.isDuration(a)&&c(a,"_locale")&&(e._locale=a._locale),e},vb.version=yb,vb.defaultFormat=gc,vb.ISO_8601=function(){},vb.momentProperties=Kb,vb.updateOffset=function(){},vb.relativeTimeThreshold=function(b,c){return oc[b]===a?!1:c===a?oc[b]:(oc[b]=c,!0)},vb.lang=f("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return vb.locale(a,b)}),vb.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?vb.defineLocale(a,b):vb.localeData(a),c&&(vb.duration._locale=vb._locale=c)),vb._locale._abbr},vb.defineLocale=function(a,b){return null!==b?(b.abbr=a,Jb[a]||(Jb[a]=new l),Jb[a].set(b),vb.locale(a),Jb[a]):(delete Jb[a],null)},vb.langData=f("moment.langData is deprecated. Use moment.localeData instead.",function(a){return vb.localeData(a)}),vb.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return vb._locale;if(!w(a)){if(b=L(a))return b;a=[a]}return K(a)},vb.isMoment=function(a){return a instanceof m||null!=a&&c(a,"_isAMomentObject")},vb.isDuration=function(a){return a instanceof n};for(xb=tc.length-1;xb>=0;--xb)B(tc[xb]);vb.normalizeUnits=function(a){return z(a)},vb.invalid=function(a){var b=vb.utc(0/0);return null!=a?o(b._pf,a):b._pf.userInvalidated=!0,b},vb.parseZone=function(){return vb.apply(null,arguments).parseZone()},vb.parseTwoDigitYear=function(a){return C(a)+(C(a)>68?1900:2e3)},vb.isDate=x,o(vb.fn=m.prototype,{clone:function(){return vb(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=vb(this).utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():P(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):P(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return I(this)},isDSTShifted:function(){return this._a?this.isValid()&&y(this._a,(this._isUTC?vb.utc(this._a):vb(this._a)).toArray())>0:!1},parsingFlags:function(){return o({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.utcOffset(0,a)},local:function(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(a){var b=P(this,a||vb.defaultFormat);return this.localeData().postformat(b)},add:u(1,"add"),subtract:u(-1,"subtract"),diff:function(a,b,c){var d,e,f=M(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=z(b),"year"===b||"month"===b||"quarter"===b?(e=j(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:q(e)},from:function(a,b){return vb.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(vb(),a)},calendar:function(a){var b=a||vb(),c=M(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this,vb(b)))},isLeapYear:function(){return G(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=gb(a,this.localeData()),this.add(a-b,"d")):b},month:qb("Month",!0),startOf:function(a){switch(a=z(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(b){return b=z(b),b===a||"millisecond"===b?this:this.startOf(b).add(1,"isoWeek"===b?"week":b).subtract(1,"ms")},isAfter:function(a,b){var c;return b=z("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=vb.isMoment(a)?a:vb(a),+this>+a):(c=vb.isMoment(a)?+a:+vb(a),c<+this.clone().startOf(b))},isBefore:function(a,b){var c;return b=z("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=vb.isMoment(a)?a:vb(a),+a>+this):(c=vb.isMoment(a)?+a:+vb(a),+this.clone().endOf(b)<c)},isBetween:function(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)},isSame:function(a,b){var c;return b=z(b||"millisecond"),"millisecond"===b?(a=vb.isMoment(a)?a:vb(a),+this===+a):(c=+vb(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))},min:f("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=vb.apply(null,arguments),this>a?this:a}),max:f("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=vb.apply(null,arguments),a>this?this:a}),zone:f("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}),utcOffset:function(a,b){var c,d=this._offset||0;return null!=a?("string"==typeof a&&(a=S(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._dateUtcOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.add(c,"m"),d!==a&&(!b||this._changeInProgress?v(this,vb.duration(a-d,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,vb.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?d:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(S(this._i)),this},hasAlignedHourOffset:function(a){return a=a?vb(a).utcOffset():0,(this.utcOffset()-a)%60===0},daysInMonth:function(){return D(this.year(),this.month())},dayOfYear:function(a){var b=Ab((vb(this).startOf("day")-vb(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=jb(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=jb(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=jb(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return E(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return E(this.year(),a.dow,a.doy)},get:function(a){return a=z(a),this[a]()},set:function(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else a=z(a),"function"==typeof this[a]&&this[a](b);return this},locale:function(b){var c;return b===a?this._locale._abbr:(c=vb.localeData(b),null!=c&&(this._locale=c),this)},lang:f("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(b){return b===a?this.localeData():this.locale(b)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),vb.fn.millisecond=vb.fn.milliseconds=qb("Milliseconds",!1),vb.fn.second=vb.fn.seconds=qb("Seconds",!1),vb.fn.minute=vb.fn.minutes=qb("Minutes",!1),vb.fn.hour=vb.fn.hours=qb("Hours",!0),vb.fn.date=qb("Date",!0),vb.fn.dates=f("dates accessor is deprecated. Use date instead.",qb("Date",!0)),vb.fn.year=qb("FullYear",!0),vb.fn.years=f("years accessor is deprecated. Use year instead.",qb("FullYear",!0)),vb.fn.days=vb.fn.day,vb.fn.months=vb.fn.month,vb.fn.weeks=vb.fn.week,vb.fn.isoWeeks=vb.fn.isoWeek,vb.fn.quarters=vb.fn.quarter,vb.fn.toJSON=vb.fn.toISOString,vb.fn.isUTC=vb.fn.isUtc,o(vb.duration.fn=n.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=q(d/1e3),g.seconds=a%60,b=q(a/60),g.minutes=b%60,c=q(b/60),g.hours=c%24,e+=q(c/24),h=q(rb(e)),e-=q(sb(h)),f+=q(e/30),e%=30,h+=q(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return q(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*C(this._months/12)
},humanize:function(a){var b=ib(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=vb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=vb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=z(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=z(a),"month"===a||"year"===a)return b=this._days+this._milliseconds/864e5,c=this._months+12*rb(b),"month"===a?c:c/12;switch(b=this._days+Math.round(sb(this._months/12)),a){case"week":return b/7+this._milliseconds/6048e5;case"day":return b+this._milliseconds/864e5;case"hour":return 24*b+this._milliseconds/36e5;case"minute":return 24*b*60+this._milliseconds/6e4;case"second":return 24*b*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*b*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+a)}},lang:vb.fn.lang,locale:vb.fn.locale,toIsoString:f("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),vb.duration.fn.toString=vb.duration.fn.toISOString;for(xb in kc)c(kc,xb)&&tb(xb.toLowerCase());vb.duration.fn.asMilliseconds=function(){return this.as("ms")},vb.duration.fn.asSeconds=function(){return this.as("s")},vb.duration.fn.asMinutes=function(){return this.as("m")},vb.duration.fn.asHours=function(){return this.as("h")},vb.duration.fn.asDays=function(){return this.as("d")},vb.duration.fn.asWeeks=function(){return this.as("weeks")},vb.duration.fn.asMonths=function(){return this.as("M")},vb.duration.fn.asYears=function(){return this.as("y")},vb.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===C(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Lb?module.exports=vb:"function"==typeof define&&define.amd?(define(function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(zb.moment=wb),vb}),ub(!0)):ub()}).call(this);
//! moment-timezone.js
//! version : 0.3.0
//! author : Tim Wood
//! license : MIT
//! github.com/moment/moment-timezone
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["moment"],b):"object"==typeof exports?module.exports=b(require("moment")):b(a.moment)}(this,function(a){"use strict";function b(a){return a>96?a-87:a>64?a-29:a-48}function c(a){var c,d=0,e=a.split("."),f=e[0],g=e[1]||"",h=1,i=0,j=1;for(45===a.charCodeAt(0)&&(d=1,j=-1),d;d<f.length;d++)c=b(f.charCodeAt(d)),i=60*i+c;for(d=0;d<g.length;d++)h/=60,c=b(g.charCodeAt(d)),i+=c*h;return i*j}function d(a){for(var b=0;b<a.length;b++)a[b]=c(a[b])}function e(a,b){for(var c=0;b>c;c++)a[c]=Math.round((a[c-1]||0)+6e4*a[c]);a[b-1]=1/0}function f(a,b){var c,d=[];for(c=0;c<b.length;c++)d[c]=a[b[c]];return d}function g(a){var b=a.split("|"),c=b[2].split(" "),g=b[3].split(""),h=b[4].split(" ");return d(c),d(g),d(h),e(h,g.length),{name:b[0],abbrs:f(b[1].split(" "),g),offsets:f(c,g),untils:h}}function h(a){a&&this._set(g(a))}function i(a){return(a||"").toLowerCase().replace(/\//g,"_")}function j(a){var b,c,d;for("string"==typeof a&&(a=[a]),b=0;b<a.length;b++)c=new h(a[b]),d=i(c.name),y[d]=c,n(d)}function k(a){return y[i(a)]||null}function l(){var a,b=[];for(a in y)y.hasOwnProperty(a)&&y[a]&&b.push(y[a].name);return b.sort()}function m(a){var b,c;for("string"==typeof a&&(a=[a]),b=0;b<a.length;b++)c=a[b].split("|"),p(c[0],c[1]),p(c[1],c[0])}function n(a){if(z[a]){var b,c=y[a],d=z[a];for(b=0;b<d.length;b++)o(c,d[b]);z[a]=null}}function o(a,b){var c=y[i(b)]=new h;c._set(a),c.name=b}function p(a,b){a=i(a),y[a]?o(y[a],b):(z[a]=z[a]||[],z[a].push(b))}function q(a){j(a.zones),m(a.links),u.dataVersion=a.version}function r(a){return r.didShowError||(r.didShowError=!0,t("moment.tz.zoneExists('"+a+"') has been deprecated in favor of !moment.tz.zone('"+a+"')")),!!k(a)}function s(a){return!(!a._a||void 0!==a._tzm)}function t(a){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(a)}function u(b){var c=Array.prototype.slice.call(arguments,0,-1),d=arguments[arguments.length-1],e=k(d),f=a.utc.apply(null,c);return e&&!a.isMoment(b)&&s(f)&&f.add(e.parse(f),"minutes"),f.tz(d),f}function v(a){return function(){return this._z?this._z.abbr(this):a.call(this)}}function w(a){return function(){return this._z=null,a.apply(this,arguments)}}if(void 0!==a.tz)return a;var x="0.3.0",y={},z={},A=a.version.split("."),B=+A[0],C=+A[1];(2>B||2===B&&6>C)&&t("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+a.version+". See momentjs.com"),h.prototype={_set:function(a){this.name=a.name,this.abbrs=a.abbrs,this.untils=a.untils,this.offsets=a.offsets},_index:function(a){var b,c=+a,d=this.untils;for(b=0;b<d.length;b++)if(c<d[b])return b},parse:function(a){var b,c,d,e,f=+a,g=this.offsets,h=this.untils,i=h.length-1;for(e=0;i>e;e++)if(b=g[e],c=g[e+1],d=g[e?e-1:e],c>b&&u.moveAmbiguousForward?b=c:b>d&&u.moveInvalidForward&&(b=d),f<h[e]-6e4*b)return g[e];return g[i]},abbr:function(a){return this.abbrs[this._index(a)]},offset:function(a){return this.offsets[this._index(a)]}},u.version=x,u.dataVersion="",u._zones=y,u._links=z,u.add=j,u.link=m,u.load=q,u.zone=k,u.zoneExists=r,u.names=l,u.Zone=h,u.unpack=g,u.unpackBase60=c,u.needsOffset=s,u.moveInvalidForward=!0,u.moveAmbiguousForward=!1;var D=a.fn;a.tz=u,a.defaultZone=null,a.updateOffset=function(b,c){var d;void 0===b._z&&(b._z=a.defaultZone),b._z&&(d=b._z.offset(b),Math.abs(d)<16&&(d/=60),void 0!==b.utcOffset?b.utcOffset(-d,c):b.zone(d,c))},D.tz=function(b){return b?(this._z=k(b),this._z?a.updateOffset(this):t("Moment Timezone has no data for "+b+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},D.zoneName=v(D.zoneName),D.zoneAbbr=v(D.zoneAbbr),D.utc=w(D.utc),a.tz.setDefault=function(b){return(2>B||2===B&&9>C)&&t("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+a.version+"."),a.defaultZone=b?k(b):null,a};var E=a.momentProperties;return"[object Array]"===Object.prototype.toString.call(E)?(E.push("_z"),E.push("_a")):E&&(E._z=null),a});
/**
 * @author: jhernandez
 * @date: 20/03/15
 * @description: Load time zone data based on http://www.iana.org/time-zones
 */

(function(moment){
moment.tz.load({
    version: "2015a",
    zones: [
        "America/Mexico_City|LMT MST CST CDT CWT|6A.A 70 60 50 50|012121232324232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 gEn0 TX0 3xd0 Jb0 6zB0 SL0 e5d0 17b0 1Pff0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0"
    ],
    links: [
        "America/Mexico_City|Mexico/General"
    ]
});
})(moment); 
/*
  html2canvas 0.4.1 <http://html2canvas.hertzen.com>
  Copyright (c) 2013 Niklas von Hertzen

  Released under MIT License
*/

(function(window, document, undefined){

"use strict";

var _html2canvas = {},
previousElement,
computedCSS,
html2canvas;

_html2canvas.Util = {};

_html2canvas.Util.log = function(a) {
  if (_html2canvas.logging && window.console && window.console.log) {
    window.console.log(a);
  }
};

_html2canvas.Util.trimText = (function(isNative){
  return function(input) {
    return isNative ? isNative.apply(input) : ((input || '') + '').replace( /^\s+|\s+$/g , '' );
  };
})(String.prototype.trim);

_html2canvas.Util.asFloat = function(v) {
  return parseFloat(v);
};

(function() {
  // TODO: support all possible length values
  var TEXT_SHADOW_PROPERTY = /((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g;
  var TEXT_SHADOW_VALUES = /(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;
  _html2canvas.Util.parseTextShadows = function (value) {
    if (!value || value === 'none') {
      return [];
    }

    // find multiple shadow declarations
    var shadows = value.match(TEXT_SHADOW_PROPERTY),
      results = [];
    for (var i = 0; shadows && (i < shadows.length); i++) {
      var s = shadows[i].match(TEXT_SHADOW_VALUES);
      results.push({
        color: s[0],
        offsetX: s[1] ? s[1].replace('px', '') : 0,
        offsetY: s[2] ? s[2].replace('px', '') : 0,
        blur: s[3] ? s[3].replace('px', '') : 0
      });
    }
    return results;
  };
})();


_html2canvas.Util.parseBackgroundImage = function (value) {
    var whitespace = ' \r\n\t',
        method, definition, prefix, prefix_i, block, results = [],
        c, mode = 0, numParen = 0, quote, args;

    var appendResult = function(){
        if(method) {
            if(definition.substr( 0, 1 ) === '"') {
                definition = definition.substr( 1, definition.length - 2 );
            }
            if(definition) {
                args.push(definition);
            }
            if(method.substr( 0, 1 ) === '-' &&
                    (prefix_i = method.indexOf( '-', 1 ) + 1) > 0) {
                prefix = method.substr( 0, prefix_i);
                method = method.substr( prefix_i );
            }
            results.push({
                prefix: prefix,
                method: method.toLowerCase(),
                value: block,
                args: args
            });
        }
        args = []; //for some odd reason, setting .length = 0 didn't work in safari
        method =
            prefix =
            definition =
            block = '';
    };

    appendResult();
    for(var i = 0, ii = value.length; i<ii; i++) {
        c = value[i];
        if(mode === 0 && whitespace.indexOf( c ) > -1){
            continue;
        }
        switch(c) {
            case '"':
                if(!quote) {
                    quote = c;
                }
                else if(quote === c) {
                    quote = null;
                }
                break;

            case '(':
                if(quote) { break; }
                else if(mode === 0) {
                    mode = 1;
                    block += c;
                    continue;
                } else {
                    numParen++;
                }
                break;

            case ')':
                if(quote) { break; }
                else if(mode === 1) {
                    if(numParen === 0) {
                        mode = 0;
                        block += c;
                        appendResult();
                        continue;
                    } else {
                        numParen--;
                    }
                }
                break;

            case ',':
                if(quote) { break; }
                else if(mode === 0) {
                    appendResult();
                    continue;
                }
                else if (mode === 1) {
                    if(numParen === 0 && !method.match(/^url$/i)) {
                        args.push(definition);
                        definition = '';
                        block += c;
                        continue;
                    }
                }
                break;
        }

        block += c;
        if(mode === 0) { method += c; }
        else { definition += c; }
    }
    appendResult();

    return results;
};

_html2canvas.Util.Bounds = function (element) {
  var clientRect, bounds = {};

  if (element.getBoundingClientRect){
    clientRect = element.getBoundingClientRect();

    // TODO add scroll position to bounds, so no scrolling of window necessary
    bounds.top = clientRect.top;
    bounds.bottom = clientRect.bottom || (clientRect.top + clientRect.height);
    bounds.left = clientRect.left;

    bounds.width = element.offsetWidth;
    bounds.height = element.offsetHeight;
  }

  return bounds;
};

// TODO ideally, we'd want everything to go through this function instead of Util.Bounds,
// but would require further work to calculate the correct positions for elements with offsetParents
_html2canvas.Util.OffsetBounds = function (element) {
  var parent = element.offsetParent ? _html2canvas.Util.OffsetBounds(element.offsetParent) : {top: 0, left: 0};

  return {
    top: element.offsetTop + parent.top,
    bottom: element.offsetTop + element.offsetHeight + parent.top,
    left: element.offsetLeft + parent.left,
    width: element.offsetWidth,
    height: element.offsetHeight
  };
};

function toPX(element, attribute, value ) {
    var rsLeft = element.runtimeStyle && element.runtimeStyle[attribute],
        left,
        style = element.style;

    // Check if we are not dealing with pixels, (Opera has issues with this)
    // Ported from jQuery css.js
    // From the awesome hack by Dean Edwards
    // http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291

    // If we're not dealing with a regular pixel number
    // but a number that has a weird ending, we need to convert it to pixels

    if ( !/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test( value ) && /^-?\d/.test(value) ) {
        // Remember the original values
        left = style.left;

        // Put in the new values to get a computed value out
        if (rsLeft) {
            element.runtimeStyle.left = element.currentStyle.left;
        }
        style.left = attribute === "fontSize" ? "1em" : (value || 0);
        value = style.pixelLeft + "px";

        // Revert the changed values
        style.left = left;
        if (rsLeft) {
            element.runtimeStyle.left = rsLeft;
        }
    }

    if (!/^(thin|medium|thick)$/i.test(value)) {
        return Math.round(parseFloat(value)) + "px";
    }

    return value;
}

function asInt(val) {
    return parseInt(val, 10);
}

function parseBackgroundSizePosition(value, element, attribute, index) {
    value = (value || '').split(',');
    value = value[index || 0] || value[0] || 'auto';
    value = _html2canvas.Util.trimText(value).split(' ');

    if(attribute === 'backgroundSize' && (!value[0] || value[0].match(/cover|contain|auto/))) {
        //these values will be handled in the parent function
    } else {
        value[0] = (value[0].indexOf( "%" ) === -1) ? toPX(element, attribute + "X", value[0]) : value[0];
        if(value[1] === undefined) {
            if(attribute === 'backgroundSize') {
                value[1] = 'auto';
                return value;
            } else {
                // IE 9 doesn't return double digit always
                value[1] = value[0];
            }
        }
        value[1] = (value[1].indexOf("%") === -1) ? toPX(element, attribute + "Y", value[1]) : value[1];
    }
    return value;
}

_html2canvas.Util.getCSS = function (element, attribute, index) {
    if (previousElement !== element) {
      computedCSS = document.defaultView.getComputedStyle(element, null);
    }

    var value = computedCSS[attribute];

    if (/^background(Size|Position)$/.test(attribute)) {
        return parseBackgroundSizePosition(value, element, attribute, index);
    } else if (/border(Top|Bottom)(Left|Right)Radius/.test(attribute)) {
      var arr = value.split(" ");
      if (arr.length <= 1) {
          arr[1] = arr[0];
      }
      return arr.map(asInt);
    }

  return value;
};

_html2canvas.Util.resizeBounds = function( current_width, current_height, target_width, target_height, stretch_mode ){
  var target_ratio = target_width / target_height,
    current_ratio = current_width / current_height,
    output_width, output_height;

  if(!stretch_mode || stretch_mode === 'auto') {
    output_width = target_width;
    output_height = target_height;
  } else if(target_ratio < current_ratio ^ stretch_mode === 'contain') {
    output_height = target_height;
    output_width = target_height * current_ratio;
  } else {
    output_width = target_width;
    output_height = target_width / current_ratio;
  }

  return {
    width: output_width,
    height: output_height
  };
};

function backgroundBoundsFactory( prop, el, bounds, image, imageIndex, backgroundSize ) {
    var bgposition =  _html2canvas.Util.getCSS( el, prop, imageIndex ) ,
    topPos,
    left,
    percentage,
    val;

    if (bgposition.length === 1){
      val = bgposition[0];

      bgposition = [];

      bgposition[0] = val;
      bgposition[1] = val;
    }

    if (bgposition[0].toString().indexOf("%") !== -1){
      percentage = (parseFloat(bgposition[0])/100);
      left = bounds.width * percentage;
      if(prop !== 'backgroundSize') {
        left -= (backgroundSize || image).width*percentage;
      }
    } else {
      if(prop === 'backgroundSize') {
        if(bgposition[0] === 'auto') {
          left = image.width;
        } else {
          if (/contain|cover/.test(bgposition[0])) {
            var resized = _html2canvas.Util.resizeBounds(image.width, image.height, bounds.width, bounds.height, bgposition[0]);
            left = resized.width;
            topPos = resized.height;
          } else {
            left = parseInt(bgposition[0], 10);
          }
        }
      } else {
        left = parseInt( bgposition[0], 10);
      }
    }


    if(bgposition[1] === 'auto') {
      topPos = left / image.width * image.height;
    } else if (bgposition[1].toString().indexOf("%") !== -1){
      percentage = (parseFloat(bgposition[1])/100);
      topPos =  bounds.height * percentage;
      if(prop !== 'backgroundSize') {
        topPos -= (backgroundSize || image).height * percentage;
      }

    } else {
      topPos = parseInt(bgposition[1],10);
    }

    return [left, topPos];
}

_html2canvas.Util.BackgroundPosition = function( el, bounds, image, imageIndex, backgroundSize ) {
    var result = backgroundBoundsFactory( 'backgroundPosition', el, bounds, image, imageIndex, backgroundSize );
    return { left: result[0], top: result[1] };
};

_html2canvas.Util.BackgroundSize = function( el, bounds, image, imageIndex ) {
    var result = backgroundBoundsFactory( 'backgroundSize', el, bounds, image, imageIndex );
    return { width: result[0], height: result[1] };
};

_html2canvas.Util.Extend = function (options, defaults) {
  for (var key in options) {
    if (options.hasOwnProperty(key)) {
      defaults[key] = options[key];
    }
  }
  return defaults;
};


/*
 * Derived from jQuery.contents()
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
_html2canvas.Util.Children = function( elem ) {
  var children;
  try {
    children = (elem.nodeName && elem.nodeName.toUpperCase() === "IFRAME") ? elem.contentDocument || elem.contentWindow.document : (function(array) {
      var ret = [];
      if (array !== null) {
        (function(first, second ) {
          var i = first.length,
          j = 0;

          if (typeof second.length === "number") {
            for (var l = second.length; j < l; j++) {
              first[i++] = second[j];
            }
          } else {
            while (second[j] !== undefined) {
              first[i++] = second[j++];
            }
          }

          first.length = i;

          return first;
        })(ret, array);
      }
      return ret;
    })(elem.childNodes);

  } catch (ex) {
    _html2canvas.Util.log("html2canvas.Util.Children failed with exception: " + ex.message);
    children = [];
  }
  return children;
};

_html2canvas.Util.isTransparent = function(backgroundColor) {
  return (backgroundColor === "transparent" || backgroundColor === "rgba(0, 0, 0, 0)");
};
_html2canvas.Util.Font = (function () {

  var fontData = {};

  return function(font, fontSize, doc) {
    if (fontData[font + "-" + fontSize] !== undefined) {
      return fontData[font + "-" + fontSize];
    }

    var container = doc.createElement('div'),
    img = doc.createElement('img'),
    span = doc.createElement('span'),
    sampleText = 'Hidden Text',
    baseline,
    middle,
    metricsObj;

    container.style.visibility = "hidden";
    container.style.fontFamily = font;
    container.style.fontSize = fontSize;
    container.style.margin = 0;
    container.style.padding = 0;

    doc.body.appendChild(container);

    // http://probablyprogramming.com/2009/03/15/the-tiniest-gif-ever (handtinywhite.gif)
    img.src = "data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=";
    img.width = 1;
    img.height = 1;

    img.style.margin = 0;
    img.style.padding = 0;
    img.style.verticalAlign = "baseline";

    span.style.fontFamily = font;
    span.style.fontSize = fontSize;
    span.style.margin = 0;
    span.style.padding = 0;

    span.appendChild(doc.createTextNode(sampleText));
    container.appendChild(span);
    container.appendChild(img);
    baseline = (img.offsetTop - span.offsetTop) + 1;

    container.removeChild(span);
    container.appendChild(doc.createTextNode(sampleText));

    container.style.lineHeight = "normal";
    img.style.verticalAlign = "super";

    middle = (img.offsetTop-container.offsetTop) + 1;
    metricsObj = {
      baseline: baseline,
      lineWidth: 1,
      middle: middle
    };

    fontData[font + "-" + fontSize] = metricsObj;

    doc.body.removeChild(container);

    return metricsObj;
  };
})();

(function(){
  var Util = _html2canvas.Util,
    Generate = {};

  _html2canvas.Generate = Generate;

  var reGradients = [
  /^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,
  /^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,
  /^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,
  /^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,
  /^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,
  /^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,
  /^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/
  ];

  /*
 * TODO: Add IE10 vendor prefix (-ms) support
 * TODO: Add W3C gradient (linear-gradient) support
 * TODO: Add old Webkit -webkit-gradient(radial, ...) support
 * TODO: Maybe some RegExp optimizations are possible ;o)
 */
  Generate.parseGradient = function(css, bounds) {
    var gradient, i, len = reGradients.length, m1, stop, m2, m2Len, step, m3, tl,tr,br,bl;

    for(i = 0; i < len; i+=1){
      m1 = css.match(reGradients[i]);
      if(m1) {
        break;
      }
    }

    if(m1) {
      switch(m1[1]) {
        case '-webkit-linear-gradient':
        case '-o-linear-gradient':

          gradient = {
            type: 'linear',
            x0: null,
            y0: null,
            x1: null,
            y1: null,
            colorStops: []
          };

          // get coordinates
          m2 = m1[2].match(/\w+/g);
          if(m2){
            m2Len = m2.length;
            for(i = 0; i < m2Len; i+=1){
              switch(m2[i]) {
                case 'top':
                  gradient.y0 = 0;
                  gradient.y1 = bounds.height;
                  break;

                case 'right':
                  gradient.x0 = bounds.width;
                  gradient.x1 = 0;
                  break;

                case 'bottom':
                  gradient.y0 = bounds.height;
                  gradient.y1 = 0;
                  break;

                case 'left':
                  gradient.x0 = 0;
                  gradient.x1 = bounds.width;
                  break;
              }
            }
          }
          if(gradient.x0 === null && gradient.x1 === null){ // center
            gradient.x0 = gradient.x1 = bounds.width / 2;
          }
          if(gradient.y0 === null && gradient.y1 === null){ // center
            gradient.y0 = gradient.y1 = bounds.height / 2;
          }

          // get colors and stops
          m2 = m1[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g);
          if(m2){
            m2Len = m2.length;
            step = 1 / Math.max(m2Len - 1, 1);
            for(i = 0; i < m2Len; i+=1){
              m3 = m2[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/);
              if(m3[2]){
                stop = parseFloat(m3[2]);
                if(m3[3] === '%'){
                  stop /= 100;
                } else { // px - stupid opera
                  stop /= bounds.width;
                }
              } else {
                stop = i * step;
              }
              gradient.colorStops.push({
                color: m3[1],
                stop: stop
              });
            }
          }
          break;

        case '-webkit-gradient':

          gradient = {
            type: m1[2] === 'radial' ? 'circle' : m1[2], // TODO: Add radial gradient support for older mozilla definitions
            x0: 0,
            y0: 0,
            x1: 0,
            y1: 0,
            colorStops: []
          };

          // get coordinates
          m2 = m1[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/);
          if(m2){
            gradient.x0 = (m2[1] * bounds.width) / 100;
            gradient.y0 = (m2[2] * bounds.height) / 100;
            gradient.x1 = (m2[3] * bounds.width) / 100;
            gradient.y1 = (m2[4] * bounds.height) / 100;
          }

          // get colors and stops
          m2 = m1[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g);
          if(m2){
            m2Len = m2.length;
            for(i = 0; i < m2Len; i+=1){
              m3 = m2[i].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/);
              stop = parseFloat(m3[2]);
              if(m3[1] === 'from') {
                stop = 0.0;
              }
              if(m3[1] === 'to') {
                stop = 1.0;
              }
              gradient.colorStops.push({
                color: m3[3],
                stop: stop
              });
            }
          }
          break;

        case '-moz-linear-gradient':

          gradient = {
            type: 'linear',
            x0: 0,
            y0: 0,
            x1: 0,
            y1: 0,
            colorStops: []
          };

          // get coordinates
          m2 = m1[2].match(/(\d{1,3})%?\s(\d{1,3})%?/);

          // m2[1] == 0%   -> left
          // m2[1] == 50%  -> center
          // m2[1] == 100% -> right

          // m2[2] == 0%   -> top
          // m2[2] == 50%  -> center
          // m2[2] == 100% -> bottom

          if(m2){
            gradient.x0 = (m2[1] * bounds.width) / 100;
            gradient.y0 = (m2[2] * bounds.height) / 100;
            gradient.x1 = bounds.width - gradient.x0;
            gradient.y1 = bounds.height - gradient.y0;
          }

          // get colors and stops
          m2 = m1[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g);
          if(m2){
            m2Len = m2.length;
            step = 1 / Math.max(m2Len - 1, 1);
            for(i = 0; i < m2Len; i+=1){
              m3 = m2[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/);
              if(m3[2]){
                stop = parseFloat(m3[2]);
                if(m3[3]){ // percentage
                  stop /= 100;
                }
              } else {
                stop = i * step;
              }
              gradient.colorStops.push({
                color: m3[1],
                stop: stop
              });
            }
          }
          break;

        case '-webkit-radial-gradient':
        case '-moz-radial-gradient':
        case '-o-radial-gradient':

          gradient = {
            type: 'circle',
            x0: 0,
            y0: 0,
            x1: bounds.width,
            y1: bounds.height,
            cx: 0,
            cy: 0,
            rx: 0,
            ry: 0,
            colorStops: []
          };

          // center
          m2 = m1[2].match(/(\d{1,3})%?\s(\d{1,3})%?/);
          if(m2){
            gradient.cx = (m2[1] * bounds.width) / 100;
            gradient.cy = (m2[2] * bounds.height) / 100;
          }

          // size
          m2 = m1[3].match(/\w+/);
          m3 = m1[4].match(/[a-z\-]*/);
          if(m2 && m3){
            switch(m3[0]){
              case 'farthest-corner':
              case 'cover': // is equivalent to farthest-corner
              case '': // mozilla removes "cover" from definition :(
                tl = Math.sqrt(Math.pow(gradient.cx, 2) + Math.pow(gradient.cy, 2));
                tr = Math.sqrt(Math.pow(gradient.cx, 2) + Math.pow(gradient.y1 - gradient.cy, 2));
                br = Math.sqrt(Math.pow(gradient.x1 - gradient.cx, 2) + Math.pow(gradient.y1 - gradient.cy, 2));
                bl = Math.sqrt(Math.pow(gradient.x1 - gradient.cx, 2) + Math.pow(gradient.cy, 2));
                gradient.rx = gradient.ry = Math.max(tl, tr, br, bl);
                break;
              case 'closest-corner':
                tl = Math.sqrt(Math.pow(gradient.cx, 2) + Math.pow(gradient.cy, 2));
                tr = Math.sqrt(Math.pow(gradient.cx, 2) + Math.pow(gradient.y1 - gradient.cy, 2));
                br = Math.sqrt(Math.pow(gradient.x1 - gradient.cx, 2) + Math.pow(gradient.y1 - gradient.cy, 2));
                bl = Math.sqrt(Math.pow(gradient.x1 - gradient.cx, 2) + Math.pow(gradient.cy, 2));
                gradient.rx = gradient.ry = Math.min(tl, tr, br, bl);
                break;
              case 'farthest-side':
                if(m2[0] === 'circle'){
                  gradient.rx = gradient.ry = Math.max(
                    gradient.cx,
                    gradient.cy,
                    gradient.x1 - gradient.cx,
                    gradient.y1 - gradient.cy
                    );
                } else { // ellipse

                  gradient.type = m2[0];

                  gradient.rx = Math.max(
                    gradient.cx,
                    gradient.x1 - gradient.cx
                    );
                  gradient.ry = Math.max(
                    gradient.cy,
                    gradient.y1 - gradient.cy
                    );
                }
                break;
              case 'closest-side':
              case 'contain': // is equivalent to closest-side
                if(m2[0] === 'circle'){
                  gradient.rx = gradient.ry = Math.min(
                    gradient.cx,
                    gradient.cy,
                    gradient.x1 - gradient.cx,
                    gradient.y1 - gradient.cy
                    );
                } else { // ellipse

                  gradient.type = m2[0];

                  gradient.rx = Math.min(
                    gradient.cx,
                    gradient.x1 - gradient.cx
                    );
                  gradient.ry = Math.min(
                    gradient.cy,
                    gradient.y1 - gradient.cy
                    );
                }
                break;

            // TODO: add support for "30px 40px" sizes (webkit only)
            }
          }

          // color stops
          m2 = m1[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g);
          if(m2){
            m2Len = m2.length;
            step = 1 / Math.max(m2Len - 1, 1);
            for(i = 0; i < m2Len; i+=1){
              m3 = m2[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/);
              if(m3[2]){
                stop = parseFloat(m3[2]);
                if(m3[3] === '%'){
                  stop /= 100;
                } else { // px - stupid opera
                  stop /= bounds.width;
                }
              } else {
                stop = i * step;
              }
              gradient.colorStops.push({
                color: m3[1],
                stop: stop
              });
            }
          }
          break;
      }
    }

    return gradient;
  };

  function addScrollStops(grad) {
    return function(colorStop) {
      try {
        grad.addColorStop(colorStop.stop, colorStop.color);
      }
      catch(e) {
        Util.log(['failed to add color stop: ', e, '; tried to add: ', colorStop]);
      }
    };
  }

  Generate.Gradient = function(src, bounds) {
    if(bounds.width === 0 || bounds.height === 0) {
      return;
    }

    var canvas = document.createElement('canvas'),
    ctx = canvas.getContext('2d'),
    gradient, grad;

    canvas.width = bounds.width;
    canvas.height = bounds.height;

    // TODO: add support for multi defined background gradients
    gradient = _html2canvas.Generate.parseGradient(src, bounds);

    if(gradient) {
      switch(gradient.type) {
        case 'linear':
          grad = ctx.createLinearGradient(gradient.x0, gradient.y0, gradient.x1, gradient.y1);
          gradient.colorStops.forEach(addScrollStops(grad));
          ctx.fillStyle = grad;
          ctx.fillRect(0, 0, bounds.width, bounds.height);
          break;

        case 'circle':
          grad = ctx.createRadialGradient(gradient.cx, gradient.cy, 0, gradient.cx, gradient.cy, gradient.rx);
          gradient.colorStops.forEach(addScrollStops(grad));
          ctx.fillStyle = grad;
          ctx.fillRect(0, 0, bounds.width, bounds.height);
          break;

        case 'ellipse':
          var canvasRadial = document.createElement('canvas'),
            ctxRadial = canvasRadial.getContext('2d'),
            ri = Math.max(gradient.rx, gradient.ry),
            di = ri * 2;

          canvasRadial.width = canvasRadial.height = di;

          grad = ctxRadial.createRadialGradient(gradient.rx, gradient.ry, 0, gradient.rx, gradient.ry, ri);
          gradient.colorStops.forEach(addScrollStops(grad));

          ctxRadial.fillStyle = grad;
          ctxRadial.fillRect(0, 0, di, di);

          ctx.fillStyle = gradient.colorStops[gradient.colorStops.length - 1].color;
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          ctx.drawImage(canvasRadial, gradient.cx - gradient.rx, gradient.cy - gradient.ry, 2 * gradient.rx, 2 * gradient.ry);
          break;
      }
    }

    return canvas;
  };

  Generate.ListAlpha = function(number) {
    var tmp = "",
    modulus;

    do {
      modulus = number % 26;
      tmp = String.fromCharCode((modulus) + 64) + tmp;
      number = number / 26;
    }while((number*26) > 26);

    return tmp;
  };

  Generate.ListRoman = function(number) {
    var romanArray = ["M", "CM", "D", "CD", "C", "XC", "L", "XL", "X", "IX", "V", "IV", "I"],
    decimal = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],
    roman = "",
    v,
    len = romanArray.length;

    if (number <= 0 || number >= 4000) {
      return number;
    }

    for (v=0; v < len; v+=1) {
      while (number >= decimal[v]) {
        number -= decimal[v];
        roman += romanArray[v];
      }
    }

    return roman;
  };
})();
function h2cRenderContext(width, height) {
  var storage = [];
  return {
    storage: storage,
    width: width,
    height: height,
    clip: function() {
      storage.push({
        type: "function",
        name: "clip",
        'arguments': arguments
      });
    },
    translate: function() {
      storage.push({
        type: "function",
        name: "translate",
        'arguments': arguments
      });
    },
    fill: function() {
      storage.push({
        type: "function",
        name: "fill",
        'arguments': arguments
      });
    },
    save: function() {
      storage.push({
        type: "function",
        name: "save",
        'arguments': arguments
      });
    },
    restore: function() {
      storage.push({
        type: "function",
        name: "restore",
        'arguments': arguments
      });
    },
    fillRect: function () {
      storage.push({
        type: "function",
        name: "fillRect",
        'arguments': arguments
      });
    },
    createPattern: function() {
      storage.push({
        type: "function",
        name: "createPattern",
        'arguments': arguments
      });
    },
    drawShape: function() {

      var shape = [];

      storage.push({
        type: "function",
        name: "drawShape",
        'arguments': shape
      });

      return {
        moveTo: function() {
          shape.push({
            name: "moveTo",
            'arguments': arguments
          });
        },
        lineTo: function() {
          shape.push({
            name: "lineTo",
            'arguments': arguments
          });
        },
        arcTo: function() {
          shape.push({
            name: "arcTo",
            'arguments': arguments
          });
        },
        bezierCurveTo: function() {
          shape.push({
            name: "bezierCurveTo",
            'arguments': arguments
          });
        },
        quadraticCurveTo: function() {
          shape.push({
            name: "quadraticCurveTo",
            'arguments': arguments
          });
        }
      };

    },
    drawImage: function () {
      storage.push({
        type: "function",
        name: "drawImage",
        'arguments': arguments
      });
    },
    fillText: function () {
      storage.push({
        type: "function",
        name: "fillText",
        'arguments': arguments
      });
    },
    setVariable: function (variable, value) {
      storage.push({
        type: "variable",
        name: variable,
        'arguments': value
      });
      return value;
    }
  };
}
_html2canvas.Parse = function (images, options) {
  window.scroll(0,0);

  var element = (( options.elements === undefined ) ? document.body : options.elements[0]), // select body by default
  numDraws = 0,
  doc = element.ownerDocument,
  Util = _html2canvas.Util,
  support = Util.Support(options, doc),
  ignoreElementsRegExp = new RegExp("(" + options.ignoreElements + ")"),
  body = doc.body,
  getCSS = Util.getCSS,
  pseudoHide = "___html2canvas___pseudoelement",
  hidePseudoElements = doc.createElement('style');

  hidePseudoElements.innerHTML = '.' + pseudoHide + '-before:before { content: "" !important; display: none !important; }' +
  '.' + pseudoHide + '-after:after { content: "" !important; display: none !important; }';

  body.appendChild(hidePseudoElements);

  images = images || {};

  function documentWidth () {
    return Math.max(
      Math.max(doc.body.scrollWidth, doc.documentElement.scrollWidth),
      Math.max(doc.body.offsetWidth, doc.documentElement.offsetWidth),
      Math.max(doc.body.clientWidth, doc.documentElement.clientWidth)
      );
  }

  function documentHeight () {
    return Math.max(
      Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight),
      Math.max(doc.body.offsetHeight, doc.documentElement.offsetHeight),
      Math.max(doc.body.clientHeight, doc.documentElement.clientHeight)
      );
  }

  function getCSSInt(element, attribute) {
    var val = parseInt(getCSS(element, attribute), 10);
    return (isNaN(val)) ? 0 : val; // borders in old IE are throwing 'medium' for demo.html
  }

  function renderRect (ctx, x, y, w, h, bgcolor) {
    if (bgcolor !== "transparent"){
      ctx.setVariable("fillStyle", bgcolor);
      ctx.fillRect(x, y, w, h);
      numDraws+=1;
    }
  }

  function capitalize(m, p1, p2) {
    if (m.length > 0) {
      return p1 + p2.toUpperCase();
    }
  }

  function textTransform (text, transform) {
    switch(transform){
      case "lowercase":
        return text.toLowerCase();
      case "capitalize":
        return text.replace( /(^|\s|:|-|\(|\))([a-z])/g, capitalize);
      case "uppercase":
        return text.toUpperCase();
      default:
        return text;
    }
  }

  function noLetterSpacing(letter_spacing) {
    return (/^(normal|none|0px)$/.test(letter_spacing));
  }

  function drawText(currentText, x, y, ctx){
    if (currentText !== null && Util.trimText(currentText).length > 0) {
      ctx.fillText(currentText, x, y);
      numDraws+=1;
    }
  }

  function setTextVariables(ctx, el, text_decoration, color) {
    var align = false,
    bold = getCSS(el, "fontWeight"),
    family = getCSS(el, "fontFamily"),
    size = getCSS(el, "fontSize"),
    shadows = Util.parseTextShadows(getCSS(el, "textShadow"));

    switch(parseInt(bold, 10)){
      case 401:
        bold = "bold";
        break;
      case 400:
        bold = "normal";
        break;
    }

    ctx.setVariable("fillStyle", color);
    ctx.setVariable("font", [getCSS(el, "fontStyle"), getCSS(el, "fontVariant"), bold, size, family].join(" "));
    ctx.setVariable("textAlign", (align) ? "right" : "left");

    if (shadows.length) {
      // TODO: support multiple text shadows
      // apply the first text shadow
      ctx.setVariable("shadowColor", shadows[0].color);
      ctx.setVariable("shadowOffsetX", shadows[0].offsetX);
      ctx.setVariable("shadowOffsetY", shadows[0].offsetY);
      ctx.setVariable("shadowBlur", shadows[0].blur);
    }

    if (text_decoration !== "none"){
      return Util.Font(family, size, doc);
    }
  }

  function renderTextDecoration(ctx, text_decoration, bounds, metrics, color) {
    switch(text_decoration) {
      case "underline":
        // Draws a line at the baseline of the font
        // TODO As some browsers display the line as more than 1px if the font-size is big, need to take that into account both in position and size
        renderRect(ctx, bounds.left, Math.round(bounds.top + metrics.baseline + metrics.lineWidth), bounds.width, 1, color);
        break;
      case "overline":
        renderRect(ctx, bounds.left, Math.round(bounds.top), bounds.width, 1, color);
        break;
      case "line-through":
        // TODO try and find exact position for line-through
        renderRect(ctx, bounds.left, Math.ceil(bounds.top + metrics.middle + metrics.lineWidth), bounds.width, 1, color);
        break;
    }
  }

  function getTextBounds(state, text, textDecoration, isLast, transform) {
    var bounds;
    if (support.rangeBounds && !transform) {
      if (textDecoration !== "none" || Util.trimText(text).length !== 0) {
        bounds = textRangeBounds(text, state.node, state.textOffset);
      }
      state.textOffset += text.length;
    } else if (state.node && typeof state.node.nodeValue === "string" ){
      var newTextNode = (isLast) ? state.node.splitText(text.length) : null;
      bounds = textWrapperBounds(state.node, transform);
      state.node = newTextNode;
    }
    return bounds;
  }

  function textRangeBounds(text, textNode, textOffset) {
    var range = doc.createRange();
    range.setStart(textNode, textOffset);
    range.setEnd(textNode, textOffset + text.length);
    return range.getBoundingClientRect();
  }

  function textWrapperBounds(oldTextNode, transform) {
    var parent = oldTextNode.parentNode,
    wrapElement = doc.createElement('wrapper'),
    backupText = oldTextNode.cloneNode(true);

    wrapElement.appendChild(oldTextNode.cloneNode(true));
    parent.replaceChild(wrapElement, oldTextNode);

    var bounds = transform ? Util.OffsetBounds(wrapElement) : Util.Bounds(wrapElement);
    parent.replaceChild(backupText, wrapElement);
    return bounds;
  }

  function renderText(el, textNode, stack) {
    var ctx = stack.ctx,
    color = getCSS(el, "color"),
    textDecoration = getCSS(el, "textDecoration"),
    textAlign = getCSS(el, "textAlign"),
    metrics,
    textList,
    state = {
      node: textNode,
      textOffset: 0
    };

    if (Util.trimText(textNode.nodeValue).length > 0) {
      textNode.nodeValue = textTransform(textNode.nodeValue, getCSS(el, "textTransform"));
      textAlign = textAlign.replace(["-webkit-auto"],["auto"]);

      textList = (!options.letterRendering && /^(left|right|justify|auto)$/.test(textAlign) && noLetterSpacing(getCSS(el, "letterSpacing"))) ?
      textNode.nodeValue.split(/(\b| )/)
      : textNode.nodeValue.split("");

      metrics = setTextVariables(ctx, el, textDecoration, color);

      if (options.chinese) {
        textList.forEach(function(word, index) {
          if (/.*[\u4E00-\u9FA5].*$/.test(word)) {
            word = word.split("");
            word.unshift(index, 1);
            textList.splice.apply(textList, word);
          }
        });
      }

      textList.forEach(function(text, index) {
        var bounds = getTextBounds(state, text, textDecoration, (index < textList.length - 1), stack.transform.matrix);
        if (bounds) {
          drawText(text, bounds.left, bounds.bottom, ctx);
          renderTextDecoration(ctx, textDecoration, bounds, metrics, color);
        }
      });
    }
  }

  function listPosition (element, val) {
    var boundElement = doc.createElement( "boundelement" ),
    originalType,
    bounds;

    boundElement.style.display = "inline";

    originalType = element.style.listStyleType;
    element.style.listStyleType = "none";

    boundElement.appendChild(doc.createTextNode(val));

    element.insertBefore(boundElement, element.firstChild);

    bounds = Util.Bounds(boundElement);
    element.removeChild(boundElement);
    element.style.listStyleType = originalType;
    return bounds;
  }

  function elementIndex(el) {
    var i = -1,
    count = 1,
    childs = el.parentNode.childNodes;

    if (el.parentNode) {
      while(childs[++i] !== el) {
        if (childs[i].nodeType === 1) {
          count++;
        }
      }
      return count;
    } else {
      return -1;
    }
  }

  function listItemText(element, type) {
    var currentIndex = elementIndex(element), text;
    switch(type){
      case "decimal":
        text = currentIndex;
        break;
      case "decimal-leading-zero":
        text = (currentIndex.toString().length === 1) ? currentIndex = "0" + currentIndex.toString() : currentIndex.toString();
        break;
      case "upper-roman":
        text = _html2canvas.Generate.ListRoman( currentIndex );
        break;
      case "lower-roman":
        text = _html2canvas.Generate.ListRoman( currentIndex ).toLowerCase();
        break;
      case "lower-alpha":
        text = _html2canvas.Generate.ListAlpha( currentIndex ).toLowerCase();
        break;
      case "upper-alpha":
        text = _html2canvas.Generate.ListAlpha( currentIndex );
        break;
    }

    return text + ". ";
  }

  function renderListItem(element, stack, elBounds) {
    var x,
    text,
    ctx = stack.ctx,
    type = getCSS(element, "listStyleType"),
    listBounds;

    if (/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(type)) {
      text = listItemText(element, type);
      listBounds = listPosition(element, text);
      setTextVariables(ctx, element, "none", getCSS(element, "color"));

      if (getCSS(element, "listStylePosition") === "inside") {
        ctx.setVariable("textAlign", "left");
        x = elBounds.left;
      } else {
        return;
      }

      drawText(text, x, listBounds.bottom, ctx);
    }
  }

  function loadImage (src){
    var img = images[src];
    return (img && img.succeeded === true) ? img.img : false;
  }

  function clipBounds(src, dst){
    var x = Math.max(src.left, dst.left),
    y = Math.max(src.top, dst.top),
    x2 = Math.min((src.left + src.width), (dst.left + dst.width)),
    y2 = Math.min((src.top + src.height), (dst.top + dst.height));

    return {
      left:x,
      top:y,
      width:x2-x,
      height:y2-y
    };
  }

  function setZ(element, stack, parentStack){
    var newContext,
    isPositioned = stack.cssPosition !== 'static',
    zIndex = isPositioned ? getCSS(element, 'zIndex') : 'auto',
    opacity = getCSS(element, 'opacity'),
    isFloated = getCSS(element, 'cssFloat') !== 'none';

    // https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Understanding_z_index/The_stacking_context
    // When a new stacking context should be created:
    // the root element (HTML),
    // positioned (absolutely or relatively) with a z-index value other than "auto",
    // elements with an opacity value less than 1. (See the specification for opacity),
    // on mobile WebKit and Chrome 22+, position: fixed always creates a new stacking context, even when z-index is "auto" (See this post)

    stack.zIndex = newContext = h2czContext(zIndex);
    newContext.isPositioned = isPositioned;
    newContext.isFloated = isFloated;
    newContext.opacity = opacity;
    newContext.ownStacking = (zIndex !== 'auto' || opacity < 1);

    if (parentStack) {
      parentStack.zIndex.children.push(stack);
    }
  }

  function renderImage(ctx, element, image, bounds, borders) {

    var paddingLeft = getCSSInt(element, 'paddingLeft'),
    paddingTop = getCSSInt(element, 'paddingTop'),
    paddingRight = getCSSInt(element, 'paddingRight'),
    paddingBottom = getCSSInt(element, 'paddingBottom');

    drawImage(
      ctx,
      image,
      0, //sx
      0, //sy
      image.width, //sw
      image.height, //sh
      bounds.left + paddingLeft + borders[3].width, //dx
      bounds.top + paddingTop + borders[0].width, // dy
      bounds.width - (borders[1].width + borders[3].width + paddingLeft + paddingRight), //dw
      bounds.height - (borders[0].width + borders[2].width + paddingTop + paddingBottom) //dh
      );
  }

  function getBorderData(element) {
    return ["Top", "Right", "Bottom", "Left"].map(function(side) {
      return {
        width: getCSSInt(element, 'border' + side + 'Width'),
        color: getCSS(element, 'border' + side + 'Color')
      };
    });
  }

  function getBorderRadiusData(element) {
    return ["TopLeft", "TopRight", "BottomRight", "BottomLeft"].map(function(side) {
      return getCSS(element, 'border' + side + 'Radius');
    });
  }

  var getCurvePoints = (function(kappa) {

    return function(x, y, r1, r2) {
      var ox = (r1) * kappa, // control point offset horizontal
      oy = (r2) * kappa, // control point offset vertical
      xm = x + r1, // x-middle
      ym = y + r2; // y-middle
      return {
        topLeft: bezierCurve({
          x:x,
          y:ym
        }, {
          x:x,
          y:ym - oy
        }, {
          x:xm - ox,
          y:y
        }, {
          x:xm,
          y:y
        }),
        topRight: bezierCurve({
          x:x,
          y:y
        }, {
          x:x + ox,
          y:y
        }, {
          x:xm,
          y:ym - oy
        }, {
          x:xm,
          y:ym
        }),
        bottomRight: bezierCurve({
          x:xm,
          y:y
        }, {
          x:xm,
          y:y + oy
        }, {
          x:x + ox,
          y:ym
        }, {
          x:x,
          y:ym
        }),
        bottomLeft: bezierCurve({
          x:xm,
          y:ym
        }, {
          x:xm - ox,
          y:ym
        }, {
          x:x,
          y:y + oy
        }, {
          x:x,
          y:y
        })
      };
    };
  })(4 * ((Math.sqrt(2) - 1) / 3));

  function bezierCurve(start, startControl, endControl, end) {

    var lerp = function (a, b, t) {
      return {
        x:a.x + (b.x - a.x) * t,
        y:a.y + (b.y - a.y) * t
      };
    };

    return {
      start: start,
      startControl: startControl,
      endControl: endControl,
      end: end,
      subdivide: function(t) {
        var ab = lerp(start, startControl, t),
        bc = lerp(startControl, endControl, t),
        cd = lerp(endControl, end, t),
        abbc = lerp(ab, bc, t),
        bccd = lerp(bc, cd, t),
        dest = lerp(abbc, bccd, t);
        return [bezierCurve(start, ab, abbc, dest), bezierCurve(dest, bccd, cd, end)];
      },
      curveTo: function(borderArgs) {
        borderArgs.push(["bezierCurve", startControl.x, startControl.y, endControl.x, endControl.y, end.x, end.y]);
      },
      curveToReversed: function(borderArgs) {
        borderArgs.push(["bezierCurve", endControl.x, endControl.y, startControl.x, startControl.y, start.x, start.y]);
      }
    };
  }

  function parseCorner(borderArgs, radius1, radius2, corner1, corner2, x, y) {
    if (radius1[0] > 0 || radius1[1] > 0) {
      borderArgs.push(["line", corner1[0].start.x, corner1[0].start.y]);
      corner1[0].curveTo(borderArgs);
      corner1[1].curveTo(borderArgs);
    } else {
      borderArgs.push(["line", x, y]);
    }

    if (radius2[0] > 0 || radius2[1] > 0) {
      borderArgs.push(["line", corner2[0].start.x, corner2[0].start.y]);
    }
  }

  function drawSide(borderData, radius1, radius2, outer1, inner1, outer2, inner2) {
    var borderArgs = [];

    if (radius1[0] > 0 || radius1[1] > 0) {
      borderArgs.push(["line", outer1[1].start.x, outer1[1].start.y]);
      outer1[1].curveTo(borderArgs);
    } else {
      borderArgs.push([ "line", borderData.c1[0], borderData.c1[1]]);
    }

    if (radius2[0] > 0 || radius2[1] > 0) {
      borderArgs.push(["line", outer2[0].start.x, outer2[0].start.y]);
      outer2[0].curveTo(borderArgs);
      borderArgs.push(["line", inner2[0].end.x, inner2[0].end.y]);
      inner2[0].curveToReversed(borderArgs);
    } else {
      borderArgs.push([ "line", borderData.c2[0], borderData.c2[1]]);
      borderArgs.push([ "line", borderData.c3[0], borderData.c3[1]]);
    }

    if (radius1[0] > 0 || radius1[1] > 0) {
      borderArgs.push(["line", inner1[1].end.x, inner1[1].end.y]);
      inner1[1].curveToReversed(borderArgs);
    } else {
      borderArgs.push([ "line", borderData.c4[0], borderData.c4[1]]);
    }

    return borderArgs;
  }

  function calculateCurvePoints(bounds, borderRadius, borders) {

    var x = bounds.left,
    y = bounds.top,
    width = bounds.width,
    height = bounds.height,

    tlh = borderRadius[0][0],
    tlv = borderRadius[0][1],
    trh = borderRadius[1][0],
    trv = borderRadius[1][1],
    brh = borderRadius[2][0],
    brv = borderRadius[2][1],
    blh = borderRadius[3][0],
    blv = borderRadius[3][1],

    topWidth = width - trh,
    rightHeight = height - brv,
    bottomWidth = width - brh,
    leftHeight = height - blv;

    return {
      topLeftOuter: getCurvePoints(
        x,
        y,
        tlh,
        tlv
        ).topLeft.subdivide(0.5),

      topLeftInner: getCurvePoints(
        x + borders[3].width,
        y + borders[0].width,
        Math.max(0, tlh - borders[3].width),
        Math.max(0, tlv - borders[0].width)
        ).topLeft.subdivide(0.5),

      topRightOuter: getCurvePoints(
        x + topWidth,
        y,
        trh,
        trv
        ).topRight.subdivide(0.5),

      topRightInner: getCurvePoints(
        x + Math.min(topWidth, width + borders[3].width),
        y + borders[0].width,
        (topWidth > width + borders[3].width) ? 0 :trh - borders[3].width,
        trv - borders[0].width
        ).topRight.subdivide(0.5),

      bottomRightOuter: getCurvePoints(
        x + bottomWidth,
        y + rightHeight,
        brh,
        brv
        ).bottomRight.subdivide(0.5),

      bottomRightInner: getCurvePoints(
        x + Math.min(bottomWidth, width + borders[3].width),
        y + Math.min(rightHeight, height + borders[0].width),
        Math.max(0, brh - borders[1].width),
        Math.max(0, brv - borders[2].width)
        ).bottomRight.subdivide(0.5),

      bottomLeftOuter: getCurvePoints(
        x,
        y + leftHeight,
        blh,
        blv
        ).bottomLeft.subdivide(0.5),

      bottomLeftInner: getCurvePoints(
        x + borders[3].width,
        y + leftHeight,
        Math.max(0, blh - borders[3].width),
        Math.max(0, blv - borders[2].width)
        ).bottomLeft.subdivide(0.5)
    };
  }

  function getBorderClip(element, borderPoints, borders, radius, bounds) {
    var backgroundClip = getCSS(element, 'backgroundClip'),
    borderArgs = [];

    switch(backgroundClip) {
      case "content-box":
      case "padding-box":
        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftInner, borderPoints.topRightInner, bounds.left + borders[3].width, bounds.top + borders[0].width);
        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightInner, borderPoints.bottomRightInner, bounds.left + bounds.width - borders[1].width, bounds.top + borders[0].width);
        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightInner, borderPoints.bottomLeftInner, bounds.left + bounds.width - borders[1].width, bounds.top + bounds.height - borders[2].width);
        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftInner, borderPoints.topLeftInner, bounds.left + borders[3].width, bounds.top + bounds.height - borders[2].width);
        break;

      default:
        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftOuter, borderPoints.topRightOuter, bounds.left, bounds.top);
        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightOuter, borderPoints.bottomRightOuter, bounds.left + bounds.width, bounds.top);
        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightOuter, borderPoints.bottomLeftOuter, bounds.left + bounds.width, bounds.top + bounds.height);
        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftOuter, borderPoints.topLeftOuter, bounds.left, bounds.top + bounds.height);
        break;
    }

    return borderArgs;
  }

  function parseBorders(element, bounds, borders){
    var x = bounds.left,
    y = bounds.top,
    width = bounds.width,
    height = bounds.height,
    borderSide,
    bx,
    by,
    bw,
    bh,
    borderArgs,
    // http://www.w3.org/TR/css3-background/#the-border-radius
    borderRadius = getBorderRadiusData(element),
    borderPoints = calculateCurvePoints(bounds, borderRadius, borders),
    borderData = {
      clip: getBorderClip(element, borderPoints, borders, borderRadius, bounds),
      borders: []
    };

    for (borderSide = 0; borderSide < 4; borderSide++) {

      if (borders[borderSide].width > 0) {
        bx = x;
        by = y;
        bw = width;
        bh = height - (borders[2].width);

        switch(borderSide) {
          case 0:
            // top border
            bh = borders[0].width;

            borderArgs = drawSide({
              c1: [bx, by],
              c2: [bx + bw, by],
              c3: [bx + bw - borders[1].width, by + bh],
              c4: [bx + borders[3].width, by + bh]
            }, borderRadius[0], borderRadius[1],
            borderPoints.topLeftOuter, borderPoints.topLeftInner, borderPoints.topRightOuter, borderPoints.topRightInner);
            break;
          case 1:
            // right border
            bx = x + width - (borders[1].width);
            bw = borders[1].width;

            borderArgs = drawSide({
              c1: [bx + bw, by],
              c2: [bx + bw, by + bh + borders[2].width],
              c3: [bx, by + bh],
              c4: [bx, by + borders[0].width]
            }, borderRadius[1], borderRadius[2],
            borderPoints.topRightOuter, borderPoints.topRightInner, borderPoints.bottomRightOuter, borderPoints.bottomRightInner);
            break;
          case 2:
            // bottom border
            by = (by + height) - (borders[2].width);
            bh = borders[2].width;

            borderArgs = drawSide({
              c1: [bx + bw, by + bh],
              c2: [bx, by + bh],
              c3: [bx + borders[3].width, by],
              c4: [bx + bw - borders[3].width, by]
            }, borderRadius[2], borderRadius[3],
            borderPoints.bottomRightOuter, borderPoints.bottomRightInner, borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner);
            break;
          case 3:
            // left border
            bw = borders[3].width;

            borderArgs = drawSide({
              c1: [bx, by + bh + borders[2].width],
              c2: [bx, by],
              c3: [bx + bw, by + borders[0].width],
              c4: [bx + bw, by + bh]
            }, borderRadius[3], borderRadius[0],
            borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner, borderPoints.topLeftOuter, borderPoints.topLeftInner);
            break;
        }

        borderData.borders.push({
          args: borderArgs,
          color: borders[borderSide].color
        });

      }
    }

    return borderData;
  }

  function createShape(ctx, args) {
    var shape = ctx.drawShape();
    args.forEach(function(border, index) {
      shape[(index === 0) ? "moveTo" : border[0] + "To" ].apply(null, border.slice(1));
    });
    return shape;
  }

  function renderBorders(ctx, borderArgs, color) {
    if (color !== "transparent") {
      ctx.setVariable( "fillStyle", color);
      createShape(ctx, borderArgs);
      ctx.fill();
      numDraws+=1;
    }
  }

  function renderFormValue (el, bounds, stack){

    var valueWrap = doc.createElement('valuewrap'),
    cssPropertyArray = ['lineHeight','textAlign','fontFamily','color','fontSize','paddingLeft','paddingTop','width','height','border','borderLeftWidth','borderTopWidth'],
    textValue,
    textNode;

    cssPropertyArray.forEach(function(property) {
      try {
        valueWrap.style[property] = getCSS(el, property);
      } catch(e) {
        // Older IE has issues with "border"
        Util.log("html2canvas: Parse: Exception caught in renderFormValue: " + e.message);
      }
    });

    valueWrap.style.borderColor = "black";
    valueWrap.style.borderStyle = "solid";
    valueWrap.style.display = "block";
    valueWrap.style.position = "absolute";

    if (/^(submit|reset|button|text|password)$/.test(el.type) || el.nodeName === "SELECT"){
      valueWrap.style.lineHeight = getCSS(el, "height");
    }

    valueWrap.style.top = bounds.top + "px";
    valueWrap.style.left = bounds.left + "px";

    textValue = (el.nodeName === "SELECT") ? (el.options[el.selectedIndex] || 0).text : el.value;
    if(!textValue) {
      textValue = el.placeholder;
    }

    textNode = doc.createTextNode(textValue);

    valueWrap.appendChild(textNode);
    body.appendChild(valueWrap);

    renderText(el, textNode, stack);
    body.removeChild(valueWrap);
  }

  function drawImage (ctx) {
    ctx.drawImage.apply(ctx, Array.prototype.slice.call(arguments, 1));
    numDraws+=1;
  }

  function getPseudoElement(el, which) {
    var elStyle = window.getComputedStyle(el, which);
    if(!elStyle || !elStyle.content || elStyle.content === "none" || elStyle.content === "-moz-alt-content" || elStyle.display === "none") {
      return;
    }
    var content = elStyle.content + '',
    first = content.substr( 0, 1 );
    //strips quotes
    if(first === content.substr( content.length - 1 ) && first.match(/'|"/)) {
      content = content.substr( 1, content.length - 2 );
    }

    var isImage = content.substr( 0, 3 ) === 'url',
    elps = document.createElement( isImage ? 'img' : 'span' );

    elps.className = pseudoHide + "-before " + pseudoHide + "-after";

    Object.keys(elStyle).filter(indexedProperty).forEach(function(prop) {
      // Prevent assigning of read only CSS Rules, ex. length, parentRule
      try {
        elps.style[prop] = elStyle[prop];
      } catch (e) {
        Util.log(['Tried to assign readonly property ', prop, 'Error:', e]);
      }
    });

    if(isImage) {
      elps.src = Util.parseBackgroundImage(content)[0].args[0];
    } else {
      elps.innerHTML = content;
    }
    return elps;
  }

  function indexedProperty(property) {
    return (isNaN(window.parseInt(property, 10)));
  }

  function injectPseudoElements(el, stack) {
    var before = getPseudoElement(el, ':before'),
    after = getPseudoElement(el, ':after');
    if(!before && !after) {
      return;
    }

    if(before) {
      el.className += " " + pseudoHide + "-before";
      el.parentNode.insertBefore(before, el);
      parseElement(before, stack, true);
      el.parentNode.removeChild(before);
      el.className = el.className.replace(pseudoHide + "-before", "").trim();
    }

    if (after) {
      el.className += " " + pseudoHide + "-after";
      el.appendChild(after);
      parseElement(after, stack, true);
      el.removeChild(after);
      el.className = el.className.replace(pseudoHide + "-after", "").trim();
    }

  }

  function renderBackgroundRepeat(ctx, image, backgroundPosition, bounds) {
    var offsetX = Math.round(bounds.left + backgroundPosition.left),
    offsetY = Math.round(bounds.top + backgroundPosition.top);

    ctx.createPattern(image);
    ctx.translate(offsetX, offsetY);
    ctx.fill();
    ctx.translate(-offsetX, -offsetY);
  }

  function backgroundRepeatShape(ctx, image, backgroundPosition, bounds, left, top, width, height) {
    var args = [];
    args.push(["line", Math.round(left), Math.round(top)]);
    args.push(["line", Math.round(left + width), Math.round(top)]);
    args.push(["line", Math.round(left + width), Math.round(height + top)]);
    args.push(["line", Math.round(left), Math.round(height + top)]);
    createShape(ctx, args);
    ctx.save();
    ctx.clip();
    renderBackgroundRepeat(ctx, image, backgroundPosition, bounds);
    ctx.restore();
  }

  function renderBackgroundColor(ctx, backgroundBounds, bgcolor) {
    renderRect(
      ctx,
      backgroundBounds.left,
      backgroundBounds.top,
      backgroundBounds.width,
      backgroundBounds.height,
      bgcolor
      );
  }

  function renderBackgroundRepeating(el, bounds, ctx, image, imageIndex) {
    var backgroundSize = Util.BackgroundSize(el, bounds, image, imageIndex),
    backgroundPosition = Util.BackgroundPosition(el, bounds, image, imageIndex, backgroundSize),
    backgroundRepeat = getCSS(el, "backgroundRepeat").split(",").map(Util.trimText);

    image = resizeImage(image, backgroundSize);

    backgroundRepeat = backgroundRepeat[imageIndex] || backgroundRepeat[0];

    switch (backgroundRepeat) {
      case "repeat-x":
        backgroundRepeatShape(ctx, image, backgroundPosition, bounds,
          bounds.left, bounds.top + backgroundPosition.top, 99999, image.height);
        break;

      case "repeat-y":
        backgroundRepeatShape(ctx, image, backgroundPosition, bounds,
          bounds.left + backgroundPosition.left, bounds.top, image.width, 99999);
        break;

      case "no-repeat":
        backgroundRepeatShape(ctx, image, backgroundPosition, bounds,
          bounds.left + backgroundPosition.left, bounds.top + backgroundPosition.top, image.width, image.height);
        break;

      default:
        renderBackgroundRepeat(ctx, image, backgroundPosition, {
          top: bounds.top,
          left: bounds.left,
          width: image.width,
          height: image.height
        });
        break;
    }
  }

  function renderBackgroundImage(element, bounds, ctx) {
    var backgroundImage = getCSS(element, "backgroundImage"),
    backgroundImages = Util.parseBackgroundImage(backgroundImage),
    image,
    imageIndex = backgroundImages.length;

    while(imageIndex--) {
      backgroundImage = backgroundImages[imageIndex];

      if (!backgroundImage.args || backgroundImage.args.length === 0) {
        continue;
      }

      var key = backgroundImage.method === 'url' ?
      backgroundImage.args[0] :
      backgroundImage.value;

      image = loadImage(key);

      // TODO add support for background-origin
      if (image) {
        renderBackgroundRepeating(element, bounds, ctx, image, imageIndex);
      } else {
        Util.log("html2canvas: Error loading background:", backgroundImage);
      }
    }
  }

  function resizeImage(image, bounds) {
    if(image.width === bounds.width && image.height === bounds.height) {
      return image;
    }

    var ctx, canvas = doc.createElement('canvas');
    canvas.width = bounds.width;
    canvas.height = bounds.height;
    ctx = canvas.getContext("2d");
    drawImage(ctx, image, 0, 0, image.width, image.height, 0, 0, bounds.width, bounds.height );
    return canvas;
  }

  function setOpacity(ctx, element, parentStack) {
    return ctx.setVariable("globalAlpha", getCSS(element, "opacity") * ((parentStack) ? parentStack.opacity : 1));
  }

  function removePx(str) {
    return str.replace("px", "");
  }

  var transformRegExp = /(matrix)\((.+)\)/;

  function getTransform(element, parentStack) {
    var transform = getCSS(element, "transform") || getCSS(element, "-webkit-transform") || getCSS(element, "-moz-transform") || getCSS(element, "-ms-transform") || getCSS(element, "-o-transform");
    var transformOrigin = getCSS(element, "transform-origin") || getCSS(element, "-webkit-transform-origin") || getCSS(element, "-moz-transform-origin") || getCSS(element, "-ms-transform-origin") || getCSS(element, "-o-transform-origin") || "0px 0px";

    transformOrigin = transformOrigin.split(" ").map(removePx).map(Util.asFloat);

    var matrix;
    if (transform && transform !== "none") {
      var match = transform.match(transformRegExp);
      if (match) {
        switch(match[1]) {
          case "matrix":
            matrix = match[2].split(",").map(Util.trimText).map(Util.asFloat);
            break;
        }
      }
    }

    return {
      origin: transformOrigin,
      matrix: matrix
    };
  }

  function createStack(element, parentStack, bounds, transform) {
    var ctx = h2cRenderContext((!parentStack) ? documentWidth() : bounds.width , (!parentStack) ? documentHeight() : bounds.height),
    stack = {
      ctx: ctx,
      opacity: setOpacity(ctx, element, parentStack),
      cssPosition: getCSS(element, "position"),
      borders: getBorderData(element),
      transform: transform,
      clip: (parentStack && parentStack.clip) ? Util.Extend( {}, parentStack.clip ) : null
    };

    setZ(element, stack, parentStack);

    // TODO correct overflow for absolute content residing under a static position
    if (options.useOverflow === true && /(hidden|scroll|auto)/.test(getCSS(element, "overflow")) === true && /(BODY)/i.test(element.nodeName) === false){
      stack.clip = (stack.clip) ? clipBounds(stack.clip, bounds) : bounds;
    }

    return stack;
  }

  function getBackgroundBounds(borders, bounds, clip) {
    var backgroundBounds = {
      left: bounds.left + borders[3].width,
      top: bounds.top + borders[0].width,
      width: bounds.width - (borders[1].width + borders[3].width),
      height: bounds.height - (borders[0].width + borders[2].width)
    };

    if (clip) {
      backgroundBounds = clipBounds(backgroundBounds, clip);
    }

    return backgroundBounds;
  }

  function getBounds(element, transform) {
    var bounds = (transform.matrix) ? Util.OffsetBounds(element) : Util.Bounds(element);
    transform.origin[0] += bounds.left;
    transform.origin[1] += bounds.top;
    return bounds;
  }

  function renderElement(element, parentStack, pseudoElement, ignoreBackground) {
    var transform = getTransform(element, parentStack),
    bounds = getBounds(element, transform),
    image,
    stack = createStack(element, parentStack, bounds, transform),
    borders = stack.borders,
    ctx = stack.ctx,
    backgroundBounds = getBackgroundBounds(borders, bounds, stack.clip),
    borderData = parseBorders(element, bounds, borders),
    backgroundColor = (ignoreElementsRegExp.test(element.nodeName)) ? "#efefef" : getCSS(element, "backgroundColor");


    createShape(ctx, borderData.clip);

    ctx.save();
    ctx.clip();

    if (backgroundBounds.height > 0 && backgroundBounds.width > 0 && !ignoreBackground) {
      renderBackgroundColor(ctx, bounds, backgroundColor);
      renderBackgroundImage(element, backgroundBounds, ctx);
    } else if (ignoreBackground) {
      stack.backgroundColor =  backgroundColor;
    }

    ctx.restore();

    borderData.borders.forEach(function(border) {
      renderBorders(ctx, border.args, border.color);
    });

    if (!pseudoElement) {
      injectPseudoElements(element, stack);
    }

    switch(element.nodeName){
      case "IMG":
        if ((image = loadImage(element.getAttribute('src')))) {
          renderImage(ctx, element, image, bounds, borders);
        } else {
          Util.log("html2canvas: Error loading <img>:" + element.getAttribute('src'));
        }
        break;
      case "INPUT":
        // TODO add all relevant type's, i.e. HTML5 new stuff
        // todo add support for placeholder attribute for browsers which support it
        if (/^(text|url|email|submit|button|reset)$/.test(element.type) && (element.value || element.placeholder || "").length > 0){
          renderFormValue(element, bounds, stack);
        }
        break;
      case "TEXTAREA":
        if ((element.value || element.placeholder || "").length > 0){
          renderFormValue(element, bounds, stack);
        }
        break;
      case "SELECT":
        if ((element.options||element.placeholder || "").length > 0){
          renderFormValue(element, bounds, stack);
        }
        break;
      case "LI":
        renderListItem(element, stack, backgroundBounds);
        break;
      case "CANVAS":
        renderImage(ctx, element, element, bounds, borders);
        break;
    }

    return stack;
  }

  function isElementVisible(element) {
    return (getCSS(element, 'display') !== "none" && getCSS(element, 'visibility') !== "hidden" && !element.hasAttribute("data-html2canvas-ignore"));
  }

  function parseElement (element, stack, pseudoElement) {
    if (isElementVisible(element)) {
      stack = renderElement(element, stack, pseudoElement, false) || stack;
      if (!ignoreElementsRegExp.test(element.nodeName)) {
        parseChildren(element, stack, pseudoElement);
      }
    }
  }

  function parseChildren(element, stack, pseudoElement) {
    Util.Children(element).forEach(function(node) {
      if (node.nodeType === node.ELEMENT_NODE) {
        parseElement(node, stack, pseudoElement);
      } else if (node.nodeType === node.TEXT_NODE) {
        renderText(element, node, stack);
      }
    });
  }

  function init() {
    var background = getCSS(document.documentElement, "backgroundColor"),
      transparentBackground = (Util.isTransparent(background) && element === document.body),
      stack = renderElement(element, null, false, transparentBackground);
    parseChildren(element, stack);

    if (transparentBackground) {
      background = stack.backgroundColor;
    }

    body.removeChild(hidePseudoElements);
    return {
      backgroundColor: background,
      stack: stack
    };
  }

  return init();
};

function h2czContext(zindex) {
  return {
    zindex: zindex,
    children: []
  };
}

_html2canvas.Preload = function( options ) {

  var images = {
    numLoaded: 0,   // also failed are counted here
    numFailed: 0,
    numTotal: 0,
    cleanupDone: false
  },
  pageOrigin,
  Util = _html2canvas.Util,
  methods,
  i,
  count = 0,
  element = options.elements[0] || document.body,
  doc = element.ownerDocument,
  domImages = element.getElementsByTagName('img'), // Fetch images of the present element only
  imgLen = domImages.length,
  link = doc.createElement("a"),
  supportCORS = (function( img ){
    return (img.crossOrigin !== undefined);
  })(new Image()),
  timeoutTimer;

  link.href = window.location.href;
  pageOrigin  = link.protocol + link.host;

  function isSameOrigin(url){
    link.href = url;
    link.href = link.href; // YES, BELIEVE IT OR NOT, that is required for IE9 - http://jsfiddle.net/niklasvh/2e48b/
    var origin = link.protocol + link.host;
    return (origin === pageOrigin);
  }

  function start(){
    Util.log("html2canvas: start: images: " + images.numLoaded + " / " + images.numTotal + " (failed: " + images.numFailed + ")");
    if (!images.firstRun && images.numLoaded >= images.numTotal){
      Util.log("Finished loading images: # " + images.numTotal + " (failed: " + images.numFailed + ")");

      if (typeof options.complete === "function"){
        options.complete(images);
      }

    }
  }

  // TODO modify proxy to serve images with CORS enabled, where available
  function proxyGetImage(url, img, imageObj){
    var callback_name,
    scriptUrl = options.proxy,
    script;

    link.href = url;
    url = link.href; // work around for pages with base href="" set - WARNING: this may change the url

    callback_name = 'html2canvas_' + (count++);
    imageObj.callbackname = callback_name;

    if (scriptUrl.indexOf("?") > -1) {
      scriptUrl += "&";
    } else {
      scriptUrl += "?";
    }
    scriptUrl += 'url=' + encodeURIComponent(url) + '&callback=' + callback_name;
    script = doc.createElement("script");

    window[callback_name] = function(a){
      if (a.substring(0,6) === "error:"){
        imageObj.succeeded = false;
        images.numLoaded++;
        images.numFailed++;
        start();
      } else {
        setImageLoadHandlers(img, imageObj);
        img.src = a;
      }
      window[callback_name] = undefined; // to work with IE<9  // NOTE: that the undefined callback property-name still exists on the window object (for IE<9)
      try {
        delete window[callback_name];  // for all browser that support this
      } catch(ex) {}
      script.parentNode.removeChild(script);
      script = null;
      delete imageObj.script;
      delete imageObj.callbackname;
    };

    script.setAttribute("type", "text/javascript");
    script.setAttribute("src", scriptUrl);
    imageObj.script = script;
    window.document.body.appendChild(script);

  }

  function loadPseudoElement(element, type) {
    var style = window.getComputedStyle(element, type),
    content = style.content;
    if (content.substr(0, 3) === 'url') {
      methods.loadImage(_html2canvas.Util.parseBackgroundImage(content)[0].args[0]);
    }
    loadBackgroundImages(style.backgroundImage, element);
  }

  function loadPseudoElementImages(element) {
    loadPseudoElement(element, ":before");
    loadPseudoElement(element, ":after");
  }

  function loadGradientImage(backgroundImage, bounds) {
    var img = _html2canvas.Generate.Gradient(backgroundImage, bounds);

    if (img !== undefined){
      images[backgroundImage] = {
        img: img,
        succeeded: true
      };
      images.numTotal++;
      images.numLoaded++;
      start();
    }
  }

  function invalidBackgrounds(background_image) {
    return (background_image && background_image.method && background_image.args && background_image.args.length > 0 );
  }

  function loadBackgroundImages(background_image, el) {
    var bounds;

    _html2canvas.Util.parseBackgroundImage(background_image).filter(invalidBackgrounds).forEach(function(background_image) {
      if (background_image.method === 'url') {
        methods.loadImage(background_image.args[0]);
      } else if(background_image.method.match(/\-?gradient$/)) {
        if(bounds === undefined) {
          bounds = _html2canvas.Util.Bounds(el);
        }
        loadGradientImage(background_image.value, bounds);
      }
    });
  }

  function getImages (el) {
    var elNodeType = false;

    // Firefox fails with permission denied on pages with iframes
    try {
      Util.Children(el).forEach(getImages);
    }
    catch( e ) {}

    try {
      elNodeType = el.nodeType;
    } catch (ex) {
      elNodeType = false;
      Util.log("html2canvas: failed to access some element's nodeType - Exception: " + ex.message);
    }

    if (elNodeType === 1 || elNodeType === undefined) {
      loadPseudoElementImages(el);
      try {
        loadBackgroundImages(Util.getCSS(el, 'backgroundImage'), el);
      } catch(e) {
        Util.log("html2canvas: failed to get background-image - Exception: " + e.message);
      }
      loadBackgroundImages(el);
    }
  }

  function setImageLoadHandlers(img, imageObj) {
    img.onload = function() {
      if ( imageObj.timer !== undefined ) {
        // CORS succeeded
        window.clearTimeout( imageObj.timer );
      }

      images.numLoaded++;
      imageObj.succeeded = true;
      img.onerror = img.onload = null;
      start();
    };
    img.onerror = function() {
      if (img.crossOrigin === "anonymous") {
        // CORS failed
        window.clearTimeout( imageObj.timer );

        // let's try with proxy instead
        if ( options.proxy ) {
          var src = img.src;
          img = new Image();
          imageObj.img = img;
          img.src = src;

          proxyGetImage( img.src, img, imageObj );
          return;
        }
      }

      images.numLoaded++;
      images.numFailed++;
      imageObj.succeeded = false;
      img.onerror = img.onload = null;
      start();
    };
  }

  methods = {
    loadImage: function( src ) {
      var img, imageObj;
      if ( src && images[src] === undefined ) {
        img = new Image();
        if ( src.match(/data:image\/.*;base64,/i) ) {
          img.src = src.replace(/url\(['"]{0,}|['"]{0,}\)$/ig, '');
          imageObj = images[src] = {
            img: img
          };
          images.numTotal++;
          setImageLoadHandlers(img, imageObj);
        } else if ( isSameOrigin( src ) || options.allowTaint ===  true ) {
          imageObj = images[src] = {
            img: img
          };
          images.numTotal++;
          setImageLoadHandlers(img, imageObj);
          img.src = src;
        } else if ( supportCORS && !options.allowTaint && options.useCORS ) {
          // attempt to load with CORS

          img.crossOrigin = "anonymous";
          imageObj = images[src] = {
            img: img
          };
          images.numTotal++;
          setImageLoadHandlers(img, imageObj);
          img.src = src;
        } else if ( options.proxy ) {
          imageObj = images[src] = {
            img: img
          };
          images.numTotal++;
          proxyGetImage( src, img, imageObj );
        }
      }

    },
    cleanupDOM: function(cause) {
      var img, src;
      if (!images.cleanupDone) {
        if (cause && typeof cause === "string") {
          Util.log("html2canvas: Cleanup because: " + cause);
        } else {
          Util.log("html2canvas: Cleanup after timeout: " + options.timeout + " ms.");
        }

        for (src in images) {
          if (images.hasOwnProperty(src)) {
            img = images[src];
            if (typeof img === "object" && img.callbackname && img.succeeded === undefined) {
              // cancel proxy image request
              window[img.callbackname] = undefined; // to work with IE<9  // NOTE: that the undefined callback property-name still exists on the window object (for IE<9)
              try {
                delete window[img.callbackname];  // for all browser that support this
              } catch(ex) {}
              if (img.script && img.script.parentNode) {
                img.script.setAttribute("src", "about:blank");  // try to cancel running request
                img.script.parentNode.removeChild(img.script);
              }
              images.numLoaded++;
              images.numFailed++;
              Util.log("html2canvas: Cleaned up failed img: '" + src + "' Steps: " + images.numLoaded + " / " + images.numTotal);
            }
          }
        }

        // cancel any pending requests
        if(window.stop !== undefined) {
          window.stop();
        } else if(document.execCommand !== undefined) {
          document.execCommand("Stop", false);
        }
        if (document.close !== undefined) {
          document.close();
        }
        images.cleanupDone = true;
        if (!(cause && typeof cause === "string")) {
          start();
        }
      }
    },

    renderingDone: function() {
      if (timeoutTimer) {
        window.clearTimeout(timeoutTimer);
      }
    }
  };

  if (options.timeout > 0) {
    timeoutTimer = window.setTimeout(methods.cleanupDOM, options.timeout);
  }

  Util.log('html2canvas: Preload starts: finding background-images');
  images.firstRun = true;

  getImages(element);

  Util.log('html2canvas: Preload: Finding images');
  // load <img> images
  for (i = 0; i < imgLen; i+=1){
    methods.loadImage( domImages[i].getAttribute( "src" ) );
  }

  images.firstRun = false;
  Util.log('html2canvas: Preload: Done.');
  if (images.numTotal === images.numLoaded) {
    start();
  }

  return methods;
};

_html2canvas.Renderer = function(parseQueue, options){

  // http://www.w3.org/TR/CSS21/zindex.html
  function createRenderQueue(parseQueue) {
    var queue = [],
    rootContext;

    rootContext = (function buildStackingContext(rootNode) {
      var rootContext = {};
      function insert(context, node, specialParent) {
        var zi = (node.zIndex.zindex === 'auto') ? 0 : Number(node.zIndex.zindex),
        contextForChildren = context, // the stacking context for children
        isPositioned = node.zIndex.isPositioned,
        isFloated = node.zIndex.isFloated,
        stub = {node: node},
        childrenDest = specialParent; // where children without z-index should be pushed into

        if (node.zIndex.ownStacking) {
          // '!' comes before numbers in sorted array
          contextForChildren = stub.context = { '!': [{node:node, children: []}]};
          childrenDest = undefined;
        } else if (isPositioned || isFloated) {
          childrenDest = stub.children = [];
        }

        if (zi === 0 && specialParent) {
          specialParent.push(stub);
        } else {
          if (!context[zi]) { context[zi] = []; }
          context[zi].push(stub);
        }

        node.zIndex.children.forEach(function(childNode) {
          insert(contextForChildren, childNode, childrenDest);
        });
      }
      insert(rootContext, rootNode);
      return rootContext;
    })(parseQueue);

    function sortZ(context) {
      Object.keys(context).sort().forEach(function(zi) {
        var nonPositioned = [],
        floated = [],
        positioned = [],
        list = [];

        // positioned after static
        context[zi].forEach(function(v) {
          if (v.node.zIndex.isPositioned || v.node.zIndex.opacity < 1) {
            // http://www.w3.org/TR/css3-color/#transparency
            // non-positioned element with opactiy < 1 should be stacked as if it were a positioned element with ‘z-index: 0’ and ‘opacity: 1’.
            positioned.push(v);
          } else if (v.node.zIndex.isFloated) {
            floated.push(v);
          } else {
            nonPositioned.push(v);
          }
        });

        (function walk(arr) {
          arr.forEach(function(v) {
            list.push(v);
            if (v.children) { walk(v.children); }
          });
        })(nonPositioned.concat(floated, positioned));

        list.forEach(function(v) {
          if (v.context) {
            sortZ(v.context);
          } else {
            queue.push(v.node);
          }
        });
      });
    }

    sortZ(rootContext);

    return queue;
  }

  function getRenderer(rendererName) {
    var renderer;

    if (typeof options.renderer === "string" && _html2canvas.Renderer[rendererName] !== undefined) {
      renderer = _html2canvas.Renderer[rendererName](options);
    } else if (typeof rendererName === "function") {
      renderer = rendererName(options);
    } else {
      throw new Error("Unknown renderer");
    }

    if ( typeof renderer !== "function" ) {
      throw new Error("Invalid renderer defined");
    }
    return renderer;
  }

  return getRenderer(options.renderer)(parseQueue, options, document, createRenderQueue(parseQueue.stack), _html2canvas);
};

_html2canvas.Util.Support = function (options, doc) {

  function supportSVGRendering() {
    var img = new Image(),
    canvas = doc.createElement("canvas"),
    ctx = (canvas.getContext === undefined) ? false : canvas.getContext("2d");
    if (ctx === false) {
      return false;
    }
    canvas.width = canvas.height = 10;
    img.src = [
    "data:image/svg+xml,",
    "<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>",
    "<foreignObject width='10' height='10'>",
    "<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>",
    "sup",
    "</div>",
    "</foreignObject>",
    "</svg>"
    ].join("");
    try {
      ctx.drawImage(img, 0, 0);
      canvas.toDataURL();
    } catch(e) {
      return false;
    }
    _html2canvas.Util.log('html2canvas: Parse: SVG powered rendering available');
    return true;
  }

  // Test whether we can use ranges to measure bounding boxes
  // Opera doesn't provide valid bounds.height/bottom even though it supports the method.

  function supportRangeBounds() {
    var r, testElement, rangeBounds, rangeHeight, support = false;

    if (doc.createRange) {
      r = doc.createRange();
      if (r.getBoundingClientRect) {
        testElement = doc.createElement('boundtest');
        testElement.style.height = "123px";
        testElement.style.display = "block";
        doc.body.appendChild(testElement);

        r.selectNode(testElement);
        rangeBounds = r.getBoundingClientRect();
        rangeHeight = rangeBounds.height;

        if (rangeHeight === 123) {
          support = true;
        }
        doc.body.removeChild(testElement);
      }
    }

    return support;
  }

  return {
    rangeBounds: supportRangeBounds(),
    svgRendering: options.svgRendering && supportSVGRendering()
  };
};
window.html2canvas = function(elements, opts) {
  elements = (elements.length) ? elements : [elements];
  var queue,
  canvas,
  options = {
    // general
    logging: false,
    elements: elements,
    background: "#fff",

    // preload options
    proxy: null,
    timeout: 0,    // no timeout
    useCORS: false, // try to load images as CORS (where available), before falling back to proxy
    allowTaint: false, // whether to allow images to taint the canvas, won't need proxy if set to true

    // parse options
    svgRendering: false, // use svg powered rendering where available (FF11+)
    ignoreElements: "IFRAME|OBJECT|PARAM",
    useOverflow: true,
    letterRendering: false,
    chinese: false,

    // render options

    width: null,
    height: null,
    taintTest: true, // do a taint test with all images before applying to canvas
    renderer: "Canvas"
  };

  options = _html2canvas.Util.Extend(opts, options);

  _html2canvas.logging = options.logging;
  options.complete = function( images ) {

    if (typeof options.onpreloaded === "function") {
      if ( options.onpreloaded( images ) === false ) {
        return;
      }
    }
    queue = _html2canvas.Parse( images, options );

    if (typeof options.onparsed === "function") {
      if ( options.onparsed( queue ) === false ) {
        return;
      }
    }

    canvas = _html2canvas.Renderer( queue, options );

    if (typeof options.onrendered === "function") {
      options.onrendered( canvas );
    }


  };

  // for pages without images, we still want this to be async, i.e. return methods before executing
  window.setTimeout( function(){
    _html2canvas.Preload( options );
  }, 0 );

  return {
    render: function( queue, opts ) {
      return _html2canvas.Renderer( queue, _html2canvas.Util.Extend(opts, options) );
    },
    parse: function( images, opts ) {
      return _html2canvas.Parse( images, _html2canvas.Util.Extend(opts, options) );
    },
    preload: function( opts ) {
      return _html2canvas.Preload( _html2canvas.Util.Extend(opts, options) );
    },
    log: _html2canvas.Util.log
  };
};

window.html2canvas.log = _html2canvas.Util.log; // for renderers
window.html2canvas.Renderer = {
  Canvas: undefined // We are assuming this will be used
};
_html2canvas.Renderer.Canvas = function(options) {
  options = options || {};

  var doc = document,
  safeImages = [],
  testCanvas = document.createElement("canvas"),
  testctx = testCanvas.getContext("2d"),
  Util = _html2canvas.Util,
  canvas = options.canvas || doc.createElement('canvas');

  function createShape(ctx, args) {
    ctx.beginPath();
    args.forEach(function(arg) {
      ctx[arg.name].apply(ctx, arg['arguments']);
    });
    ctx.closePath();
  }

  function safeImage(item) {
    if (safeImages.indexOf(item['arguments'][0].src ) === -1) {
      testctx.drawImage(item['arguments'][0], 0, 0);
      try {
        testctx.getImageData(0, 0, 1, 1);
      } catch(e) {
        testCanvas = doc.createElement("canvas");
        testctx = testCanvas.getContext("2d");
        return false;
      }
      safeImages.push(item['arguments'][0].src);
    }
    return true;
  }

  function renderItem(ctx, item) {
    switch(item.type){
      case "variable":
        ctx[item.name] = item['arguments'];
        break;
      case "function":
        switch(item.name) {
          case "createPattern":
            if (item['arguments'][0].width > 0 && item['arguments'][0].height > 0) {
              try {
                ctx.fillStyle = ctx.createPattern(item['arguments'][0], "repeat");
              }
              catch(e) {
                Util.log("html2canvas: Renderer: Error creating pattern", e.message);
              }
            }
            break;
          case "drawShape":
            createShape(ctx, item['arguments']);
            break;
          case "drawImage":
            if (item['arguments'][8] > 0 && item['arguments'][7] > 0) {
              if (!options.taintTest || (options.taintTest && safeImage(item))) {
                ctx.drawImage.apply( ctx, item['arguments'] );
              }
            }
            break;
          default:
            ctx[item.name].apply(ctx, item['arguments']);
        }
        break;
    }
  }

  return function(parsedData, options, document, queue, _html2canvas) {
    var ctx = canvas.getContext("2d"),
    newCanvas,
    bounds,
    fstyle,
    zStack = parsedData.stack;

    canvas.width = canvas.style.width =  options.width || zStack.ctx.width;
    canvas.height = canvas.style.height = options.height || zStack.ctx.height;

    fstyle = ctx.fillStyle;
    ctx.fillStyle = (Util.isTransparent(zStack.backgroundColor) && options.background !== undefined) ? options.background : parsedData.backgroundColor;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = fstyle;

    queue.forEach(function(storageContext) {
      // set common settings for canvas
      ctx.textBaseline = "bottom";
      ctx.save();

      if (storageContext.transform.matrix) {
        ctx.translate(storageContext.transform.origin[0], storageContext.transform.origin[1]);
        ctx.transform.apply(ctx, storageContext.transform.matrix);
        ctx.translate(-storageContext.transform.origin[0], -storageContext.transform.origin[1]);
      }

      if (storageContext.clip){
        ctx.beginPath();
        ctx.rect(storageContext.clip.left, storageContext.clip.top, storageContext.clip.width, storageContext.clip.height);
        ctx.clip();
      }

      if (storageContext.ctx.storage) {
        storageContext.ctx.storage.forEach(function(item) {
          renderItem(ctx, item);
        });
      }

      ctx.restore();
    });

    Util.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj");

    if (options.elements.length === 1) {
      if (typeof options.elements[0] === "object" && options.elements[0].nodeName !== "BODY") {
        // crop image to the bounds of selected (single) element
        bounds = _html2canvas.Util.Bounds(options.elements[0]);
        newCanvas = document.createElement('canvas');
        newCanvas.width = Math.ceil(bounds.width);
        newCanvas.height = Math.ceil(bounds.height);
        ctx = newCanvas.getContext("2d");

        ctx.drawImage(canvas, bounds.left, bounds.top, bounds.width, bounds.height, 0, 0, bounds.width, bounds.height);
        canvas = null;
        return newCanvas;
      }
    }

    return canvas;
  };
};
})(window,document);
/**
 * Print section
 *
 *
 */
$(function() {

     $(document).on("click", ".print-section", function(e){
        if($(".js-display-text").length) {
            var button=$(".js-display-text"),
                      target=button.prev(),
                      curHeight = 70,
                      autoHeight = target.css('height', 'auto').height(),
                      newHeight=(button.hasClass('opened'))?curHeight:autoHeight,
                      oldHeight=(button.hasClass('opened'))?autoHeight:curHeight;
                  if(!button.hasClass('opened')){
                      target.height(oldHeight).animate({height: newHeight}, 0, function(){
                          button.toggleClass('opened');
                          target.toggleClass('visible');
                      });
                  }

        }


        e.stopPropagation();
        var today = getFormattedCurrentDate();
        e.preventDefault();
        var hasSection = $(this).closest('.xk-printable-section');
        var legalText = $("#legalText").val();

        if (hasSection.length == 0) {
            hasSection = $('.xk-printable-section');
        }
        if (hasSection.length != 0) {

            //Ini: code added for printing modals
            //  For printing modals, the div to print must have the '.xk-modal-printable-section' class.
            var objectToPrint = hasSection;
            var cleanModalPrintContent = false;
            if (hasSection.hasClass("xk-modal-printable-section")) {
                var modalPrintContent = $('<div class="modal-print-content"></div>');
                $("body").append(modalPrintContent);
                if (modalPrintContent != null && modalPrintContent.length > 0) {
                    modalPrintContent.width(hasSection.width());
                    modalPrintContent.height(hasSection.height());
                    modalPrintContent.eq(0).html(hasSection.html());
                    objectToPrint = modalPrintContent;
                    cleanModalPrintContent = true;
                }
            }
            //End: code added for printing modals

            html2canvas(objectToPrint, {
                onrendered: function (canvas) {
                    if (cleanModalPrintContent) { $(".modal-print-content").remove(); }
                    var mywindow = window.open('', '', 'height=600,width=800');
                    mywindow.document.write('<html><head><title></title>');
                    mywindow.document.write('</head><body >');

                    var isIE = /*@cc_on!@*/false || !!document.documentMode;   // At least IE6
                    if (isIE) {
                        //Ini: fix for IE
                        try {
                            var imgCanvas = mywindow.document.createElement('img');
                            imgCanvas.src = canvas.toDataURL();
                            mywindow.document.body.appendChild(imgCanvas);
                        }
                        catch(err) { console.log(err.message); }
                        //End: fix for IE
                    } else {
                        mywindow.document.body.appendChild(canvas);
                    }

                    if (typeof legalText != 'undefined') {
                        mywindow.document.write('<div style="float:left">' + legalText + '&nbsp;' + '</div>');
                    }
                    mywindow.document.write('<div> A la fecha ' + today + '</div>');
                    mywindow.document.write('</body></html>');
                    mywindow.document.close(); //added for IE
                    mywindow.focus(); //added for IE
                    mywindow.print();
                    mywindow.close();
                }
            });
        }
    })
});

function getFormattedCurrentDate() {
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth()+1; //January is 0!

    var yyyy = today.getFullYear();
    if(dd<10){
        dd='0'+dd
    }
    if(mm<10){
        mm='0'+mm
    }
    var today = dd+'/'+mm+'/'+yyyy;
    return today;
}

/**
 * Created by jhernandez on 12/03/15.
 */

$(function(){
    var initializeAccordion = function($parent, id){
        $($parent).each(function(){
            $(this).find('[data-parent]').each(function(){
                $(this).attr('data-parent',"#"+id);
            });
        });
    };

    $('body').on('general.accordioncontainer', '.js-cq-accordion', function(e, id) {
        initializeAccordion($(e.target), id);
        $(e.target).on('show.bs.collapse',function(){
            $(this).find('.collapse.in').collapse('hide')
        }).on('shown.bs.collapse',function(){
            var idOpened = $(this).find('.collapse.in').attr('id');
            $('html, body').animate({
                scrollTop: $('#'+idOpened).offset().top-250
            }, 500);
        });
    });

    $('.js-cq-accordion').each(function(){
        initializeAccordion($(this), $(this).attr('id'));
    });
});





function ResizeIframeFromParent(id) {
    if (jQuery('#'+id).length > 0) {
        var window = document.getElementById(id).contentWindow;
        var prevheight = jQuery('#'+id).attr('height');
        var newheight = Math.max( window.document.body.scrollHeight, window.document.body.offsetHeight, window.document.documentElement.clientHeight, window.document.documentElement.scrollHeight, window.document.documentElement.offsetHeight );
        if (newheight != prevheight && newheight > 0) {
            jQuery('#'+id).attr('height', newheight);
            //console.log("Adjusting iframe height for "+id+": " +prevheight+"px => "+newheight+"px");
        }
    }
}
function initialize() {
    var mapOptions = {
        center: new google.maps.LatLng(19.4270499, -99.1275711),
        zoom: 16,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
}
//xumak change: duplicated code commented. It already exists in customplugins.js
/*var onAjaxSuccess = function(target) {
    $(target).find('.customSelect').each(function(){
        var search=$(this).data('search');
        var ancho=$(this).data('width')+'%';
        $(this).chosen({
            disable_search_threshold:  search,
            width: ancho
        })
    });
    $(target).find('.js-simple-carousel-ajax').each(function() {
        var target = $(this),
            url = $(this).data('url');

        $.get(url).done(function(html) {
            $(target).html(html);

            $(target).find('.js-simple-carousel').each(function() {
                simpleCarousel($(this));
            }).find('.customCheck, .customRadio').each(function () {
                $(this).prettyCheckable();
            })
        });
    });
    $(target).find('.js-simple-carousel').each(function() {
        simpleCarousel($(this));
    });
    $(target).find('.js-range-radio').on('change','.js-range-position',function(){
        $(this).closest('.has-pretty-child').siblings().find('label').css('opacity','.5');
        $(this).closest('.has-pretty-child').find('label').css('opacity','1');
        if($($(this).closest('.js-range-radio').data('ajax-target')).length){
            var ajaxRequest = $(this).closest('.js-range-radio').data('ajax');
            if (ajaxRequest) {
                $(this).closest('.js-range-radio').simpleAjaxForm({spin: 'largeSpin'});
            }
        }
    });
    $(target).find('img.lazyLoad').show().lazyload({
        threshold: 300,
        skip_invisible: false
    })
};


(function ($) {
    $.fn.simpleAjaxForm = function(options) {
    

        var defaults = {
            url: ($(this).prop("tagName")=='FORM')?$(this).attr('action'):$(this).data('url'),
            target: $(this).data('ajax-target'),
            data: ($(this).prop('tagName')=='FORM') ? $(this).serialize() : $(this).closest('form').serialize(),
            spin: 'defaultSpin',
            mensajeError: "Se ha producido un error al procesar su peticion",
            strType:($(this).prop("tagName")=='FORM')?$(this).attr('method'):(($(this).data('srttype'))?$(this).data('srttype'):'GET'),
            callback: function(obj,target){}
        }
        var settings = $.extend( {}, defaults, options );
        if($(this).data('strtype')){
            settings.strType=$(this).data('strtype');
        }
        var loader,
            url=settings.url,
            target=settings.target,
            data=$(this).data('ajaxNoData') ? {} : settings.data,
            strType=settings.strType,
            callback=settings.callback,
            obj=($(this).prop("tagName")=='FORM')?$(this):$(this).closest('form');

        $(target).animate({'opacity': '.5'}, function() {
            loader = $('<div/>', {
                'class': 'spinner-holder clear'
            }).css({'position':'absolute','bottom':'50%', 'right':'50%'}).appendTo(target).spin(settings.spin);
            //perform ajax request

            $.ajax({
                url: url,
                data: data,
                dataType: 'HTML',
                type:strType
            }).done( function (result) {
                    $(target).find('.spinner-holder').spin(false);
                    $(target).html(result).css({'opacity': '1','height':'auto'}).find('.customCheck, .customRadio').each(function(){
                        $(this).prettyCheckable();
                    });
                    $(target).find('[data-trigger-events]').each(function() {
                        $(this).dataTriggerEvent();
                    });
                    onAjaxSuccess(target);
                    $('.js-tooltip').tooltip();
                    callback(obj,target);
                })
                .fail(function() {
                    // alert(target)
                    $(target).prepend('<div class="container-fluid "><div class="alert alert-warning fade in">'+settings.mensajeError+'</div></div>').css({'opacity': '1'}).find('.spinner-holder').spin(false);
                    $(target).find('.alert').delay('800').slideUp('slow');
                });
        });
    };
}(jQuery));*/

$(function(){


    $('body').on( 'click' , '.js-reset-form' , function(){

        $('.customSelect').each(function () {
            $(this).val('').trigger('chosen:updated');
        });

    }); 

    /*
    if ($('.validar').length) {

        $('.validar').validate({

            highlight: function(element) {
                $(element).closest('.form-group').addClass('has-error');
            },
            unhighlight: function(element) {
                $(element).closest('.form-group').removeClass('has-error');
            },
            errorElement: 'span',
            errorClass: 'help-block',
            errorPlacement: function(error, element) {
                if(element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            }
        });

    }
    */

    //This code exists in telcel-form-validator.js too...
    /*var maximo_z_index = 1999;

    $('.customSelect').each(function () {

        $(this).closest(".form-group").attr( "style" , "z-index: "+ maximo_z_index + " !important" );

        var search = $(this).data('search');
        var ancho = $(this).data('width') + '%';
        var inherit = $(this).data('inherit');
        $(this).chosen({
            disable_search_threshold: search,
            width: '100%',
            inherit_select_classes: inherit
        });

        maximo_z_index--;

    });*/



    $('body').on( "submit", ".js-file-ajax-form", function(e){

        //console.log("ENTRA");
        e.preventDefault();
        
        var url = $(this).attr('action');
        var respuesta = $(this).attr("data-ajax-target");
        var error = $(this).attr("data-ajax-error");
        var success = $(this).attr("data-ajax-success");
        var objform = $(this);
        var objcontainer = objform.parents(".xk-formcontainer");
        var recaptchaResponse = $(this).find(".g-recaptcha-response");
        var val = recaptchaResponse.val().trim();
        var formData = new FormData($(this)[0]);
        
        objform.spin('xlargeSpin');
        formData.append("secret", "6LeN3wETAAAAAD6oYRJVBpRYHqTauNJGjJj_CIWR");
        formData.append("response", val);
        //console.log(formData);
        $.ajax({
            url: url,
            type: 'POST',
            data: formData,
            success: function (data) {
            	reset_captcha(objcontainer);
            	reset_form();
                //$(respuesta).html(data);
                //console.log(JSON.stringify(data, null, 4));
                objform.spin(false).stop();
                
                if (data.result != undefined){

                    if (data.result == 0) {

                        xk_show_msg(objcontainer, success, error, 1);
                        $(window).scrollTop(objcontainer.find('#messages').offset().top -100);

                      } else if (data.result === -1) {
                    	  
                    	  xk_show_msg(objcontainer, success, error, 0);
                    	  $(window).scrollTop(objcontainer.find('#messages').offset().top -100);
                    	  
                      } else if (data.result === -2) {
                    	  
                          objform.spin(false).stop();
                          
                          addCaptchaErrorMessage(objcaptcha)
                      }

                } else {
                    xk_show_msg(objcontainer, success, error, 0);
                    $(window).scrollTop(objcontainer.find('#messages').offset().top -100);
                }

            },
            error: function (data) {
            	reset_form();
                objform.spin(false).stop();
                xk_show_msg(objcontainer, success, error, 0);
                $(window).scrollTop(objcontainer.find('#messages').offset().top -100);
            },
            cache: false,
            contentType: false,
            processData: false
        });


    } );




    $('body').on('change', '.js-mark-row', function () {
        $(this).closest('tr').toggleClass('mark');
    }).on('click','.js-mark-all-rows',function(){
        var $target = $($(this).data('target')),
            action  = $(this).data('action');
        $(this).parent().addClass('active').siblings().removeClass('active');
        if(action==1){
            $target.find('.js-mark-row').prettyCheckable('check');
            $target.find('tbody tr').addClass('mark');
        }else{
            $target.find('.js-mark-row').prettyCheckable('uncheck');
            $target.find('tbody tr').removeClass('mark');
        }
    }).on('change', '.js-fileinput', function() {
        var input = $(this),
            numFiles = input.get(0).files ? input.get(0).files.length : 1,
            label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
        input.trigger('fileselect', [numFiles, label]);
    });

    $(document).on('fileselect', '.js-fileinput', function(event, numFiles, label) {
        var input = $(this).closest('.input-group').find('.js-fileInputtext'),
            log = numFiles > 1 ? numFiles + ' files selected' : label;

        //Ini: code added for validating files to attach
        var files = $(this).get(0).files;
        var datamax = $(this).attr('data-max');
        var attachFile = validate_files(files, datamax, input);
        //End: code added for validating files to attach

        //if everything its ok then attach the file
        if (attachFile == 1) {
            input.parent().removeClass("has-error");
            $(this).removeClass("invalid-file");

            if( input.length ) {
                input.val(log);
            } else {
                if( log ) alert(log);
            }
            console.log(log)

        //if something is wrong then clean the "input file"
        } else {

           $(this).parent().addClass("has-error");
           $(this).addClass("invalid-file");
           $(this).wrap('<form>').closest('form').get(0).reset();
           $(this).unwrap();

        }


    });

    //xumak change: duplicated code commented. It already exists in scripts.js
    /*Forms customization*/
    /*$('.customCheck, .customRadio').each(function () {
        $(this).prettyCheckable();
    });*/
    $('.customSelect').each(function () {
        var search = $(this).data('search');
        var ancho = $(this).data('width') + '%';
        var inherit = $(this).data('inherit');
        $(this).chosen({
            disable_search_threshold: search,
            width: ancho,
            inherit_select_classes: inherit
        })
    });
    $('.js-external-accordion').on('show.bs.collapse', function () {
        setTimeout(function(){
            $('iframe.js-autosize').each(function(){
                ResizeIframeFromParent($(this).attr('id'));
            });
        },300);
    });

    if($('.resize-iframe').length){
        var iframeWin = window.parent.document.getElementById("iframe-10");
        iframeWin.height = document.body.scrollHeight+40;
    }

    if($('#map_canvas').length){
        initialize();
    }

    //xumak change: duplicated code commented. It already exists in scripts.js
    /*Simple AJAX form submission*/
    /*$('body').on("submit",".js-ajax-form", function (event) {
        $(this).simpleAjaxForm({
            callback: function(obj, target){
                //Load recharge subform
                if($(target).hasClass('js-reload-form')){
                    var target=$('.js-form-recarga');
                    var url=target.data('alt-url');
                    $.ajax({
                        url: url,
                        dataType: 'HTML',
                    }).done( function (result) {
                            $(target).html(result).css({'opacity': '1','height':'auto'})
                            .find('.customSelect').each(function(){
                                var search=$(this).data('search');
                                var ancho=$(this).data('width')+'%';
                                $(this).chosen({
                                    disable_search_threshold:  search,
                                    width: ancho
                                });
                            });
                            $(target).find('[data-trigger-events]').each(function() {
                                $(this).dataTriggerEvent();
                            });
                        })
                        .fail(function() {
                            // alert(target)
                            $(target).prepend('<div class="container-fluid "><div class="alert alert-warning fade in">'+settings.mensajeError+'</div></div>').css({'opacity': '1'});
                            $(target).find('.alert').delay('800').slideUp('slow');
                        });
                }
                if(obj.hasClass('js-recharge-steps')){
                    $('.js-steps').find('.active').removeClass('active').next().addClass('active')
                }
            }
        });
        event.preventDefault();
    });*/
});

//Ini: Xumak's fixes...
function xk_show_msg(objform, success, error, type) {

    if (success != "" && error != "") {

        var objsuccess = objform.find(success);
        var objerror = objform.find(error);

        if (objsuccess.length && objerror.length) {

            //show success message...
            var objToShow = objsuccess;
            var objToHide = objerror;
            var hidemsg = false;

            //show error message...
            if (type == 0) {
                objToShow = objerror;
                objToHide = objsuccess;
                hidemsg = true;
            }

            objToShow.removeClass("hidden");
            objToShow.fadeIn();
            objToHide.fadeOut();

            if (hidemsg == true) {

                //hide it automatically
                setTimeout(function(){
                    objToShow.fadeOut();
                }, 5000);

            }
        }
    }
}

function validate_files(files, datamax, input) {
	
	var message_placement;
	if( $('.validar-telcel').hasClass('form-horizontal') ){
		message_placement = '.input-container';
	}else{
		message_placement = '.form-group';
	}

    var i = 0;
    var attachFile = 1; //by default, it will attach the file...

    if (datamax != "" && datamax != "undefined") {

        var maxPerm = parseInt(datamax);

        while(i < files.length ) {

            var f = files[i];
            var extension = get_file_extension(f.name);
            //console.log("name:" + f.name + ", extension:" + extension);

            //Validates size of the file...
            if (f.size > (maxPerm * 1000)) {

                attachFile = 2; // Don't attach file, it exceeds the max perm size
                if( !input.closest(message_placement).find('span').hasClass('help-block-required') ){
                	input.closest(message_placement).append("<span class='help-block help-block-required '>El archivo '" + f.name + "' debe ser menor a " + datamax + " KB</span>");	
                	input.closest(message_placement).addClass('has-error');
                	input.val("");
                } else {
                	input.closest(message_placement).find('.help-block-required').html("El archivo '" + f.name + "' debe ser menor a " + datamax + " KB");
                	input.val("");
                }

            //Validates extension of the file...
            } else if (extension != "pdf" && extension != "docx" && extension != "doc" && extension != "txt" && extension != "zip") {

                attachFile = 3;
                if( !input.closest(message_placement).find('span').hasClass('help-block-required') ){
                	input.closest(message_placement).append("<span class='help-block help-block-required '>El archivo '" + f.name + "' debe ser pdf, doc, docx, txt o zip</span>");
                	input.closest(message_placement).addClass('has-error');
                	input.val("");
                } else {
                	input.closest(message_placement).find('.help-block-required').html("El archivo '" + f.name + "' debe ser pdf, doc, docx, txt o zip");
                	input.val("");
                }

            } else {
                input.closest(message_placement).find('.help-block-required').remove();
                input.closest(message_placement).removeClass('has-error');
            }

            i++;
        }
    }

    return attachFile;

}

function get_file_extension(name) {

    if (name != "") {
        var index = name.lastIndexOf(".");
        var extension = name.substring(index + 1, name.length);
        return extension;
    }

    return "";
}

function reset_form () {
	var allInputs = $( ":input" );
	$.each( allInputs , function( index , value ){
		if ($(this).attr('type') != "hidden") {
			$(this).val("");
		}
	} );


	$.each( $('.prettyradio') , function( index , value ){
		$(this).removeClass('is-checked');
		$(this).find($('a')).removeClass('checked');

	} );

	

	$.each( $('.xk-checkboxradio') , function( index , value ){
		$(this).prettyCheckable('uncheck');
	} );



	$('.customSelect').val('').trigger('chosen:updated');
}

function reset_captcha (objcontainer) {
	grecaptcha.reset(objcontainer.find("#recaptcha-id").val());
    var captchacontainer = objcontainer.find("#formCaptcha").find("div").find("div");
    captchacontainer.css("margin-left", "auto");
    captchacontainer.css("margin-right", "auto");
}
//End: Xumak's fixes...

var maximo_z_index = 1998;

//Code added for working with ajax tabs
$(document).on('general.formcontainer', '.xk-formcontainer', function(e, formhorizontal){

    var container = ".form-group";

    if (formhorizontal === 'true') {

        container = ".select-container";

    }
    $('body').on('keypress', '.js-only-numbers', function (e) {
        if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
            return false;
        }
    });
    
    $('.customSelect').each(function () {

        $(this).closest(container).attr( "style" , "z-index: "+ maximo_z_index + " !important" );

        var search = $(this).data('search');
        var ancho = $(this).data('width') + '%';
        var inherit = $(this).data('inherit');
        $(this).chosen({
            disable_search_threshold: search,
            width: '100%',
            inherit_select_classes: inherit
        });

        maximo_z_index--;

    });

    //Added for numbers validation
    $(this).find(".form-control[data-type='number']").addClass("js-only-numbers");

});


$(document).ready(function(){

   //Code added for working with ajax tabs
   $('.xk-formcontainer').each(function(){

        var formhorizontal = $(this).attr('data-formtype');
        $(this).trigger('general.formcontainer', formhorizontal);

   });


	var message_placement;
	if( $('.validar-telcel').hasClass('form-horizontal') ){
		message_placement = '.input-container';
	}else{
		message_placement = '.form-group';
	}    




	var flag = 1;


	$(document).on('click','.js-hard-reset-form',function( e ){
		
		e.preventDefault();

		var allInputs = $( ":input" );
		$.each( allInputs , function( index , value ){
			$(this).val("");
		} );


		$.each( $('.prettyradio') , function( index , value ){
			$(this).removeClass('is-checked');
			$(this).find($('a')).removeClass('checked');

		} );

		

		$.each( $('.xk-checkboxradio') , function( index , value ){
			$(this).prettyCheckable('uncheck');
		} );



		$('.customSelect').val('').trigger('chosen:updated');
	

	});



	$(document).on('click', '.validate-before-submit' , function( e ){

		e.preventDefault();

		flag = 1;

        $.each( $('[data-validation]') , function( index , element ){
            var validation = $(this).data('validation');

            var splitted = validation.split(" ");
            var element_to_be_analized = $(this);
            if(element_to_be_analized.parents('.tab-pane').length>0 && (element_to_be_analized.parents('.tab-pane').attr('id')=='distribuidor' || element_to_be_analized.parents('.tab-pane').attr('id')=='enviar-curriculum')){
                if(element_to_be_analized.parents('.tab-pane').hasClass('active')){
					element_to_be_analized.closest(message_placement).find('.help-block').remove();
                    $.each( splitted , function( index , value ){
        
                        validate( element_to_be_analized , value.toString() );
                    } );
        
                    var minLength = element_to_be_analized.attr("minlength");
                    if (minLength != null && minLength != "undefined" && minLength != "" ) {
                        validate_minlength( element_to_be_analized , "minlength", minLength );
                    }
                }
            }else{
				element_to_be_analized.closest(message_placement).find('.help-block').remove();
                $.each( splitted , function( index , value ){
    
                    validate( element_to_be_analized , value.toString() );
                } );
    
                var minLength = element_to_be_analized.attr("minlength");
                if (minLength != null && minLength != "undefined" && minLength != "" ) {
                    validate_minlength( element_to_be_analized , "minlength", minLength );
                }
            }

        } );

        var invalidfile = $('.invalid-file');
        if ( invalidfile != null && invalidfile != 'undefined' && invalidfile.length > 0  ) {

            flag = 0;
            var input = invalidfile.closest('.input-group').find('.js-fileInputtext');
            input.parent().addClass('has-error');

        }

		if( flag ){

		    //call the trigger that validates the captcha, then submit, else submit the closest form.
		    var objformcontainer = $(this).closest(".xk-formcontainer");
		    if (objformcontainer != null && objformcontainer != "undefined" && objformcontainer.length > 0) {

		        objformcontainer.trigger("formcontainer.validatecaptcha");

		    } else {

		        $(this).closest('form').submit();

		    }
		    
		} else {
			$.each( $('[data-validation]') , function( index , element ){
	            var element_to_be_analized = $(this);
	            if( !element_to_be_analized.closest(message_placement).find('span').length > 0 ){
	            	element_to_be_analized.closest(message_placement).append("<span class='help-block'>&nbsp;</span>");			
	            }

	        } );
			$(window).scrollTop($(this).closest(".xk-formcontainer").find('#messages').offset().top);
		}
		
		/*else{
			$("html, body").animate({ scrollTop: 0 }, "slow");
  			return false;
		}*/

	} );




	
	function validate( element , validation ){
			

		if( validation === 'required' ){
			validate_presence( element , validation );
		}

		else if( validation === 'email' ){
			validate_email( element , validation );
		}

		else if( validation === 'number' ){
			validate_number( element , validation );
		}

		else if( validation === 'date' ){
			validate_date( element , validation );
		}	
		
	}





	function validate_presence( element , validation ){


		if( element.attr("type") === 'text' ){
			validate_presence_text( element , validation );
		}

		else if( element.attr("type") === 'radio' ){
			validate_presence_radio( element , validation );
		}

		else if( element.attr("type") === 'checkbox' ){
			validate_presence_checkbox( element , validation );	
		}

		else{
			validate_presence_select( element , validation );
		}


	}



	function validate_presence_checkbox( element , validation ){
		

			if( !element.is(':checked') ){
				flag = 0;
				show_message(element , validation );
			}
			else{
				remove_message( element , validation );
			}

	}




	function validate_presence_select( element , validation ){
			
			if( element.val() === "-1" || element.val() === null ){
				flag = 0;
				show_message(element , validation );
			}
			else{
				remove_message( element , validation );
			}

	}




	function validate_presence_radio( element , validation ){
			
			var flag_radio = 1;
			$.each( element.closest('.form-group').find('.prettyradio'), function( index , el ){

				if( $(this).hasClass('is-checked') ){
					flag_radio = 0;
				}

			} );

			if( flag_radio ){
				flag = 0;
				show_message( element , validation );
			}else{
				remove_message( element , validation );
			}

	}





	function validate_presence_text( element , validation ){
			if( ! element.val() ){
				flag = 0;
				show_message( element , validation );
			}else{
				remove_message( element , validation );
			}		
	}




	function validate_number( element , validation ){

		if( element.val() != "" ){
			if( !isNumber( element.val() ) ){
				flag = 0;
				show_message( element , validation );
			}
			else{
				remove_message( element , validation );	
			}
		}else{
			remove_message( element , validation );	
		}

	}
	
	function validate_minlength( element , validation, minlength ){

		if( element.val() != "" ){
			if(element.val().length < minlength ){
				flag = 0;
				show_message_minlength( element , minlength );
			}
			else{
				remove_message( element , validation );	
			}
		}else{
			remove_message( element , validation );	
		}

	}


	function validate_email( element , validation ){

		if( element.val() != "" ){
			if( !isEmail( element.val() ) ){
				flag = 0;
				show_message( element , validation );
			}
			else{
				remove_message( element , validation );	
			}			
		}else{
			remove_message( element , validation );	
		}


	}




	function validate_date( element , validation ){

		if( element.val() != "" ){
			if( !isDate( element.val() ) ){
				flag = 0;
				show_message( element , validation );
			}
			else{
				remove_message( element , validation );	
			}
		}else{
			remove_message( element , validation );	
		}

	}




	function show_message( element , validation ){


		if( validation === "required" ){
			show_message_required( element );
		}

		else if( validation === "email" ){
			show_message_email( element );
		}

		else if( validation === "number"  ){
			show_message_number( element );
		}

		else if( validation === "date"  ){
			show_message_date( element );
		}

	}





	function remove_message( element , validation ){
		
		if( validation === "required" ){
			remove_message_required( element );
		}			
		else if( validation === "email" ){
			remove_message_email( element );
		}
		else if( validation === "number" ){
			remove_message_number( element );	
		}

		else if( validation === "date" ){
			remove_message_date( element );	
		}
		
		else if( validation === "minlength" ){
			remove_message_minlength( element );	
		}

		
		if( element.closest(message_placement).find('.help-block').length === 0 ){
			element.closest(message_placement).removeClass('has-error');
		}

	}


	function remove_message_required( element ){
		element.closest(message_placement).find('.help-block-required').remove();
	}


	function remove_message_email( element ){
		element.closest(message_placement).find('.help-block-email').remove();
	}


	function remove_message_number( element ){
		element.closest(message_placement).find('.help-block-number').remove();
	}


	function remove_message_date( element ){
		element.closest(message_placement).find('.help-block-date').remove();
	}		
	
	function remove_message_minlength( element ){
		element.closest(message_placement).find('.help-block-minlength').remove();
	}	



	function show_message_required( element ){


		if( !element.closest(message_placement).find('span').hasClass('help-block-required') ){



			if( element.attr('type') === 'radio' ){
				element.closest(message_placement).append("<span class='help-block help-block-required'>"+element.data('validationRequiredMessage')+"</span>");			
			}

		 	else if ( element.attr('type') === 'text' ){
				element.closest(message_placement).append("<span class='help-block help-block-required'>"+element.data('validationRequiredMessage')+"</span>");
			}

		 	else{
				element.closest(message_placement).append("<span class='help-block help-block-required'>"+element.data('validationRequiredMessage')+"</span>");			
			}	

			element.closest(message_placement).addClass('has-error');

		}

	}




	function show_message_email( element ){

		if( !element.closest(message_placement).find('span').hasClass('help-block-email') ){
			element.closest(message_placement).addClass('has-error');
			element.closest(message_placement).append("<span class='help-block help-block-email'>"+element.data('validationEmailMessage')+"</span>");			
		}

	}


	function show_message_number( element ){

		if( !element.closest(message_placement).find('span').hasClass('help-block-number') ){
			element.closest(message_placement).addClass('has-error');
			element.closest(message_placement).append("<span class='help-block help-block-number'>"+element.data('validationNumberMessage')+"</span>");			
		}
	}



	function show_message_date( element ){

		if( !element.closest(message_placement).find('span').hasClass('help-block-date') ){
			element.closest(message_placement).addClass('has-error');
			element.closest(message_placement).append("<span class='help-block help-block-date'>"+element.data('validationDateMessage')+"</span>");			
		}

	}
	
	function show_message_minlength( element, digits ){

		if( !element.closest(message_placement).find('span').hasClass('help-block-minlength') ){
			element.closest(message_placement).addClass('has-error');
			element.closest(message_placement).append("<span class='help-block help-block-minlength'>N&uacute;mero a "+digits+" d&iacute;gitos</span>");			
		}

	}
	


	function has_required( element ){
		$.each( element.data('dataValidation') , function( index , element ){

		});
	}



	function isEmail(email) {
	  var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
	  return regex.test(email);
	}

	function isNumber( number ){
		var regex = /[0-9 -()+]+$/;
		if( regex.test(number) ){
			return 1;
		}else{
			return 0;
		}
		
	}

	function isDate( date ){
	  var reg = /(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d/;
	  if (date.match(reg)) {
	    return 1;
	  }else {
	    return 0;
	  }

	}






});


$(document).ready(function(){

    var PROFILER_URL = "http://www2.telcel.com/rs/Perfil.php?telefono=";
    var PROFILE_PREPAID = "PREPAGO";
    var PROFILE_PLAN = "POSPAGO";
    var PROFILE_HYBRID = "MIXTO";
    var captcha1;
    var captcha2;
    var start = 1999;
    $.each( $('.chosen-container'), function (){
        $(this).css('z-index', start);
        start--;
    });

    function openChatWindowEmpresas(mylink) {
        if (!window.focus)
            return true;
        var href;
        if (typeof (mylink) == 'string')
            href = mylink;
        else
            href = mylink.href;
        // Resize the window
        window.resizeTo(480,680);
        window.location = href;
    }

    function chatURLEmpresas(
            valreg, valnom, valpla, valcons, valtel, stateName) {
        var URL = "http://www.telvistaservices.com.mx/Demos/TelcelCode"
                + "/clientesweb/telcel/default.aspx?Nombre=" + valnom
                + "&MSISDN=" + valtel + "&Region=" + valreg + "&perfil="
                + valpla + "&tema=" + valcons+ "&estado="+stateName;
        return URL;
    }

    function openSoporteClienteEmpresas(
            nisi, name, question, stateName, region) {
        if (nisi && nisi != null) {
            $.post(
                    PROFILER_URL + nisi,
                    function (data) {
                        var opCode = data.codigo;
                        var profile = data.perfil;
                        if (opCode && opCode === "0") {
                            if ( profile == '?') {
                                openSimpleSoporteCliente(region,
                                        name,question,stateName);
                            } else {
                                var plan = 0;
                                if (profile == PROFILE_PREPAID) {
                                    plan = 1;
                                } else if ((profile == PROFILE_PLAN)
                                        || (profile == PROFILE_HYBRID)) {
                                    plan = 2;
                                }
                                var url = chatURLEmpresas(
                                        region, name, plan, question,
                                nisi, stateName);
                                openChatWindowEmpresas(url);
                            }
                        }
                    },
                    "json"
                    );
        }else{
            openSimpleSoporteCliente(region, name, question, stateName);
        }
    }
    
    function openSimpleSoporteCliente(region, name, question, stateName){
        var url = chatURLEmpresas(
                region, name, '', question,
                '', stateName);
        openChatWindowEmpresas(url);
    }

    function openContactoVentaChat(name, region, question, plan, stateName) {
        var url = chatURLEmpresas(region, name, plan, question, '', stateName);
        if (url !== "") {
            openChatWindowEmpresas(url);
        }
    }

    function getRegion(state) {
        var region = state.substring(state.indexOf("_") + 1);
        return region;
    }
    
    function getStateName(state) {
        var stateName = state.substring(0,state.indexOf("_"));
        return stateName;
    }

    function verifyCaptcha(
            captchaResId, name, region, nisi, question, stateName) {
        if ($(captchaResId)) {
            var recaptchaResponse = $(captchaResId).val().trim();
            if( recaptchaResponse != '' ){
                $.get("/bin/telcelcom/noncacheable/captcha/check"
                        + "?secret=6LeN3wETAAAAAD6oYRJVBpRYHqTauNJGjJj_CIWR"
                        + "&response=" + recaptchaResponse,
                        function (data) {
                            if (data.success) {
                                if ("#g-recaptcha-response" === captchaResId) {
                                    openSoporteClienteEmpresas(nisi, name, question,
                                    stateName,region);
                                } else {
                                    openContactoVentaChat(name, region, question,
                                    '', stateName);
                                }
                            }
                        });
            }else{
                alert("Debe confirmar que no es un robot!");
            }
        }
    }

    /*creates the captcha fields on the html*/
    var siteKey = "6LeN3wETAAAAAK79CxVseevXwpGjgsFQwz2GBy1P";

    var onloadCallback = function () {
        // Renders the HTML element with id 'example1' as a reCAPTCHA widget.
        // The id of the reCAPTCHA widget is assigned to 'widgetId1'.
        if (document.getElementById('captcha1') != null) {
            captcha1 = grecaptcha.render(document.getElementById('captcha1'), {
                'sitekey': siteKey,
                'theme': 'light'
            });
        }
        if (document.getElementById('captcha2') != null) {
            captcha2 = grecaptcha.render('captcha2', {
                'sitekey': siteKey,
                'theme': 'light'
            });
        }
    };



    var $chatemp = $('#chatEmpresas');
    var $chat_footer = $(".btn-chat-footer");
    if ($chatemp.length < 1) {
        return; // Prevent continue if no chat found
    }

    var timeStart = $chatemp.data('timeStart').split(","),
            timeEnd = $chatemp.data('timeEnd').split(",");
    var nowTime = moment.tz(moment(), 'America/Mexico_City'),
            startTime = moment.tz(moment(), 'America/Mexico_City')
                    .hours(timeStart[0]).minutes(timeStart[1]),
            endTime = moment.tz(moment(), 'America/Mexico_City')
                    .hours(timeEnd[0]).minutes(timeEnd[1]);

    if (!nowTime.isBetween(startTime, endTime)) {
        $chatemp.hide();
        if ($chat_footer.length) {
            $chat_footer.hide();
        }
        return;
    }
    $('#form-chat-2-empresas').validator().on('submit', function (e) {
        if (e.isDefaultPrevented() == false) {
            e.preventDefault();
            var name = $("#nombreVentaTxt").val();//$('#collapse-chat-2-empresas input[type="text"]').val();
            var state = $('#collapse-chat-2-empresas')
                    .find('select').first().val();
            if(!state || state==null || state === ''){
                alert("Debe seleccionar un estado");
            }else{
                var question = "";
                var region = "";
                if (state !== "") {
                    region = getRegion(state);
                } else {
                    region = "9";
                }
                    name = encodeURIComponent(name);
                    verifyCaptcha("#g-recaptcha-response-1", name, region
                    , '', question, getStateName(state));
                }
            }
    });

    $('#form-chat-1-empresas').validator().on('submit', function (e) {
        if (e.isDefaultPrevented() == false) {
            e.preventDefault();
            var name = $("#nombreClienteTxt").val();//$('#collapse-chat-1-empresas').
                    //find('input[type="text"]').first().val().trim();
            var nisi = $('#nisi').last().val().trim();
            var state = $('#collapse-chat-1-empresas')
                    .find('select').first().val();
            if(!state || state==null || state === ''){
                alert("Debe seleccionar un estado");
            }else{
                var question = $('#collapse-chat-1-empresas')
                        .find('select').last().val();
                if(!question || question == null || question === ''){
                    alert("Debe seleccionar el tipo de consulta!");
                }else{
                    var region = "";
                    if (state !== "") {
                        region = getRegion(state);
                    } else {
                        region = "9";
                    }
                        name = encodeURIComponent(name);
                        verifyCaptcha(
                                "#g-recaptcha-response", name, region, nisi,
                        question, getStateName(state));
                    }
                }
            }
    });
    
    
    $('#collapse-chat-1-empresas').find('select').first().change(function() {
        regionAvailabilityValidator($(this).val());
    });
    
    $('#collapse-chat-2-empresas').find('select').first().change(function() {
        regionAvailabilityValidator($(this).val());
    });
    
    var regionAvailabilityValidator = function (state) {
        var region = getRegion(state);
        var mjeNoDispoRegion = $chatemp.data('noDispoR'+region);
        if(mjeNoDispoRegion && mjeNoDispoRegion.trim().length > 0){
            $("#accordion-chatEmpresas").hide();
            $("#pTitleEmpre").hide();
            $("#chatAlert").show();
            $(".chat-alert").html(mjeNoDispoRegion);
        }
    }
});

var banner_flotante = (function(){

  $(document).on('click','.banner-flotante-apps-cerrar a',function(e){
    e.preventDefault();
    $('#banner-flotante-apps').hide();
    $('.footer').css('margin-bottom','0px');
  });

  $(window).on('resize',detectar_os);
  $(window).on('scroll',aplicar_distancia_bottom);

  detectar_os();
  aplicar_distancia_bottom();


  function detectar_os(){

    if( $(window).width() <= 667 ){

      var os = getMobileOperatingSystem();

      if( os === "Android" ){
        $('.banner-flotante-apps-stores').html('<a href="https://play.google.com/store/apps/details?id=com.speedymovil.wire">Instalar</a>');
        $('#banner-flotante-apps .banner-flotante-apps-stores a').css('background','#ff6600');
      }else if( os === "iOS" ){
        $('.banner-flotante-apps-stores').html('<a href="https://itunes.apple.com/mx/app/mi-telcel/id492764073?mt=8">Instalar</a>');
        $('#banner-flotante-apps .banner-flotante-apps-stores a').css('background','#ff6600');
      }else{
        $('.banner-flotante-apps-stores').html('<a href="https://play.google.com/store/apps/details?id=com.speedymovil.wire"><img src="/content/dam/telcelcom/iconos/android.png" alt=""></a>');
        $('#banner-flotante-apps .banner-flotante-apps-stores a').css('background','transparent');
      }
    }else{
      $('.banner-flotante-apps-stores').html('<div class="banner-flotante-apps-appStore"><a href="https://itunes.apple.com/mx/app/mi-telcel/id492764073?mt=8"><img src="/content/dam/telcelcom/iconos/ios.png" alt=""></a></div><div class="banner-flotante-apps-googlePlay"><a href="https://play.google.com/store/apps/details?id=com.speedymovil.wire"><img src="/content/dam/telcelcom/iconos/android.png" alt=""></a></div>');
      $('#banner-flotante-apps .banner-flotante-apps-stores a').css('background','transparent');
    }

  }


  function aplicar_distancia_bottom(){

    var win_top = $(window).scrollTop();

    if(win_top !== 0){
      $('#banner-flotante-apps').addClass('banner-flotante-animation');
    }

    if( $(window).width() <= 667 ){

      var footer = $('footer');
      var d1 = $(window).scrollTop() + $(window).height();
      var d2 = footer.offset().top;

      $('.up_button').css('bottom','80px');
      $('.up_button').css('right','20px');

      if( d1 - d2 > 0 && $('#banner-flotante-apps').is(":visible") ){
        $('.footer').css('margin-bottom','58px');
      }else{
        $('.footer').css('margin-bottom','0px');
      }
    }

  }


  function getMobileOperatingSystem() {
    var userAgent = navigator.userAgent || navigator.vendor || window.opera;

        // Windows Phone must come first because its UA also contains "Android"
      if (/windows phone/i.test(userAgent)) {
          return "Windows Phone";
      }

      if (/android/i.test(userAgent)) {
          return "Android";
      }

      // iOS detection from: http://stackoverflow.com/a/9039885/177710
      if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
          return "iOS";
      }

      return "unknown";
  }


})();


var initChatConfigurations = function(){
    //solo en pagina inicial se muestra banner flotante app
    if(window.location.pathname === '/' 
    //para que se vea en home en uat, amigo y plan
            || window.location.href.indexOf("/content/telcel.html") > 0
            || window.location.pathname.lastIndexOf("/amigo") == 0
            || window.location.pathname.lastIndexOf("/plan") == 0
            || window.location.href.indexOf("/content/telcel/plan.html") > 0
            || window.location.href.indexOf("/content/telcel/amigo.html") > 0){
        $("#banner-flotante-apps").show();
        //se comenta la linea siguiente para que el banner NO aparezca hasta hacer scroll
        //$('#banner-flotante-apps').removeClass('banner-flotante-animation');
    }else{
        $("#banner-flotante-apps").hide();
    }
    if($('#menu_flotante')!=null){
        $('#menu_flotante').show();
        if($('#menu_flotante').attr('data-time-start')!=null){
            var timeStart = $('#menu_flotante').attr('data-time-start')
                    .split(","),
                    timeEnd = $('#menu_flotante').attr('data-time-end')
                    .split(",");
            var empresasMode=false;
            var twitterUrl=$('#twitterAnchorDiv').data("twitter-url");
            var facebookUrl=$('#facebookAnchorDiv').data("facebook-url");
            if(window.location.pathname.indexOf("/empresa") >= 0
                    || window.location.pathname.indexOf("/empresas") >= 0
                    || window.location.pathname.indexOf("/cf")==0
                    || window.location.pathname.indexOf(
                    "/content/telcel/configuracion/chat-empresa.html")==0){
                empresasMode = true;
                facebookUrl=$('#facebookAnchorDiv')
                        .data("facebook-url-empresa");
                twitterUrl=$('#twitterAnchorDiv')
                        .data("twitter-url-empresa");
                timeStart = $('#menu_flotante').attr(
                        'data-time-start-empresa').split(",");
                timeEnd = $('#menu_flotante').attr('data-time-end-empresa'
                        ).split(",");
                $(".telcelonly").hide();
            }else{
                $(".empresasonly").hide();
            }
            $(document).on( 'click' , '#twitterAnchor' , function( e ){
                $(this).attr("href",twitterUrl);
            });
            $(document).on( 'click' , '#facebookAnchor' , function( e ){
                $(this).attr("href",facebookUrl);    
            });
            var nowTime = moment.tz(moment(), 'America/Mexico_City'),
                startTime = moment.tz(moment(), 'America/Mexico_City')
                .hours(timeStart[0]).minutes(timeStart[1]),
                endTime = moment.tz(moment(), 'America/Mexico_City')
                .hours(timeEnd[0]).minutes(timeEnd[1]);
            if (!nowTime.isBetween(startTime, endTime)) {
                $('#menu_flotante .chat-flotante .small').hide();
                $('#menu_flotante .chat-flotante img').hide();
            }else{
                $(document).on( 'mouseenter' , '.chat-flotante' ,
                function( e ){
                    e.preventDefault();
                    $(this).animate({
                        right: "0px"
                    },800);

                } );

                $(document).on( 'mouseleave' , '.chat-flotante' ,
                function( e ){
                    e.preventDefault();

                    $(this).animate({
                        right: "-185px"
                    },800);

                } );

                $(document).on( 'click' , '#menu_flotante .chat-flotante' ,
                    function( e ){
                        e.preventDefault();
                        if(empresasMode){
                            window.open(
                                    "/content/telcel/configuracion"
                            + "/chat-empresa.html", "Chat Empresas",
                    "height=675,width=460");
                        }else{
                            window.open(
                                    "/content/telcel/configuracion"+
                                    "/chat-para-dispositivo-movil.html",
                            "Chat window", "height=630,width=460");
                        }
                    }
                );
            }
        }
    }
}

$( document ).ready(function() {
    initChatConfigurations();
    var timeDescMge=$('#timeMgs').data("timedescmge");
    if(window.location.pathname.indexOf("/empresas") >= 0
            || window.location.pathname.indexOf("/cf")==0
            || window.location.pathname.indexOf(
            "/content/telcel/configuracion/chat-empresa.html")==0){
        timeDescMge=$('#timeMgsEmpresa').data("timedescmge");
    }
    $("#menuFlotateTimeDesc").html(timeDescMge);
    

});

