var sas=sas||{};sas.utils=sas.utils||{},sas.events=sas.events||{},function(){sas.utils.getIEVersion=function(){var a=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);return a?parseInt(a[1]):void 0},sas.events.addEvent=function(a,e,t){return a&&e&&t?(a.attachEvent?a.attachEvent("on"+e,t):a.addEventListener&&a.addEventListener(e,t,!1),{removeEvent:function(){a.detachEvent?a.detachEvent("on"+e,t):a.removeEventListener&&a.removeEventListener(e,t,!1)}}):void 0},sas.events.addLoadEvent=function(a,e){if(a&&e){var t="load",n=function(){return!0},r=sas.utils.getIEVersion();(11>r||a==document)&&(t="readystatechange",n=function(){return a.readyState&&"complete"!=a.readyState&&"loaded"!=a.readyState?void 0:!0});var s=sas.events.addEvent(a,t,function(){n()&&(s.removeEvent(),e.apply(this,arguments))})}}}(),function(a,e){function t(a){var n;if("script"==a.tagName.toLowerCase())n=e.createElement("script"),a.type&&(n.type=a.type),a.src&&(n.src=a.src),a.text&&(n.text=a.text);else{n=a.cloneNode(!1);for(var r=a.childNodes,s=0;s<r.length;s++)n.appendChild(t(r[s]))}return n}function n(){var e=a;try{for(;e.parent.document;){if(e.parent.document===e.document)return e.location.href;e=e.parent}}catch(t){}try{try{if(a.top.location.href)return a.top.location.href}catch(t){}var n=a.location.ancestorOrigins;return n[n.length-1]}catch(t){return e.document.referrer}}function r(){var e,t=n();return t&&(e=t.match(/^[a-z]+:\/\/[^\/?]+/))?e[0]:a.location.origin}function s(a){var t,n=e.createElement("a"),r=/(?:^\?|&)([^=&]+)=?([^&]*)(?=&|$)/g;n.href=a;for(var s=n.search,i=[];null!==(t=r.exec(s));){var o={n:g(t[1]),v:g(t[2])};"extuid-"===o.n.substr(0,7)&&C[o.n.substr(7)]||i.push(o)}for(var d in C)i.push({n:"extuid-"+d,v:C[d]});s="";for(var c=0;c<i.length;c++){var o=i[c];s+=(0===c?"?":"&")+p(o.n),""!==o.v&&(s+="="+p(o.v))}return n.search=s,n.href}if(!sas.__smartLoaded){sas.__smartLoaded=!0;var i=function(){},o=!1,d=function(){return Math.round(1e10*Math.random())},c="http://www.smartadserver.com",l=c,f=d(),u=!0,p=encodeURIComponent,g=decodeURIComponent,m=0,v=!1,h=0,I=!1,y=null,E={},_={},A=[],T={},L=!0,w={},C={},N={};sas._networks=sas._networks||{},sas._pendingCommands=sas._pendingCommands||{},sas.callType={STD:"std",IFRAME:"iframe",ONECALL:"onecall",XML:"xml",PASSBACK:"passback"},sas.renderMode={DEFAULT:0,READY:1,ON_DEMAND:2};var R=!1,M=[],b=function(a){var e=function(){if(M.length>0){R=!0;var a=M.shift(),t=a.options.onLoad;a.options.onLoad=function(a){e(),t(a)},x[a.type](a.ad,a.options)}else R=!1};M.push(a),R||e()},x={},S={onLoad:i,onError:i,onClean:i,beforeRender:i};x[sas.callType.STD]=function(a,e){U(a.tagId,{ad:a,callType:sas.callType.STD,options:e,url:V(sas.callType.STD,a,e),type:"script"}),K(a.tagId)},x[sas.callType.IFRAME]=function(a,e){U(a.tagId,{ad:a,callType:sas.callType.IFRAME,options:e,url:V(sas.callType.IFRAME,a,e),type:"iframe",width:a.width||0,height:a.height||0}),K(a.tagId)},x[sas.callType.ONECALL]=function(a,t){for(var n=(""+a.formatId).replace(/\s/g,"").split(","),r=0;r<n.length;r++){var s=n[r],i="sas_"+s;U(i,{ad:a,callType:sas.callType.ONECALL,options:t}),U(i,{ad:{tagId:i,formatId:s,originalFormatId:s}})}var o=V(sas.callType.ONECALL,a,t)();G(e.getElementsByTagName("head")[0],o,t.async,function(){if(L){for(var a in w)K(a);w={}}},t.onError)};var O={ERR_SITE:"invalid site id",ERR_PAGE:"invalid page id or name",ERR_FORMAT:"invalid format id",ERR_CONFIG:"invalid configuration",ERR_CALL:"invalid call option"},k=function(a){throw new Error(a)};Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var F=function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t&&"object"==typeof t)for(var n in t)null!=t[n]&&(Array.isArray(t[n])?a[n]=t[n]:"object"==typeof t[n]?a[n]=F({},a[n],t[n]):a[n]=t[n])}return a},D=function(a){a=""+a;var e=E[a]||E["sas_"+a]||E[_[a]];if(e)return e;var t=a.split("_"),n=t.slice(0,t.length-1).join("");if(t.length>1&&!isNaN(t[t.length-1])&&(e=E[n]||E["sas_"+n])){var r="sas_"+a;return U(r,e,{ad:{tagId:r,instance:parseInt(t[t.length-1])}})}return null},U=function(a){var e=Array.prototype.slice.call(arguments,1);return E[a]=F.apply(this,[{},E[a]].concat(e)),E[a]},B=function(a){var t=e.createElement("div");return t.id=a,t},H=function(a,t,n,r){var s=e.createElement("iframe");s.id="sas_i"+t.ad.formatId+(t.ad.instance?"_"+t.ad.instance:""),s.scrolling="no",s.frameBorder=0,s.width=t.width,s.height=t.height,s.style.margin=0,s.style.padding=0,s.style.width=t.width+"px",s.style.height=t.height+"px",s.src=t.url(),sas.events.addLoadEvent(s,n),sas.events.addEvent(s,"error",r),t.options.async?a.appendChild(s):e.write(s.outerHTML)},j=1,P=function(a,t,n){var r=e.createElement("script");r.id="sas_script"+j++,r.type="text/javascript",r.text=t,n?a.appendChild(r):e.write(r.outerHTML)},G=function(a,t,n,r,s){var i=e.createElement("script");i.id="sas_script"+j++,i.type="text/javascript",i.src=t,i.async=n,sas.events.addLoadEvent(i,r),sas.events.addEvent(i,"error",s),n?a.appendChild(i):e.write(i.outerHTML)},Y=function(a){var e=navigator.userAgent.indexOf("iPad")>0,t=""+navigator.userAgent.indexOf("iPhone")>0;return e||t?e?"ipad":"iphone":navigator.userAgent.indexOf("Android")>0?"android":""},V=function(a,e,t){t=F({forceMasterFlag:!1},t),u=t.forceMasterFlag?!0:u,f=t.resetTimestamp?d():f,a==sas.callType.ONECALL&&q();var n=W(),s=Y(),i=r();return function(){return sas.utils.buildUrl(t.domain,a,e,n,f,t.async,t.networkId,s,y,i,C,N[e.tagId])}},W=function(){return q()?"m":"s"},q=function(){return u?(u=!1,!0):!1},z=function(a){var t=e.getElementById(a);return t||(e.write(B(a).outerHTML),t=e.getElementById(a)),t},K=function(a){var t=D(a);if(t){var n=t.ad.tagId,r=t.ad.formatId+(t.ad.instance>1?"_"+t.ad.instance:"");if(t.options.async&&(!L||t.callType==sas.callType.ONECALL&&!sas_manager))return void(w[n]=!0);sas.clean(n),t.options.beforeRender({formatId:r,tagId:n}),t.callType===sas.callType.ONECALL&&(t=sa(n));var s=function(){t.options.onLoad({formatId:r,tagId:n})},i=function(){t.options.onError({formatId:r,tagId:n}),sas.noad(n)};if(t.callType==sas.callType.ONECALL&&!sas_manager.exists(r))return sas.noad(n),void s();var o=e.getElementById(n);if(o)switch(t.type){case"iframe":H(o,t,s,i);break;case"script":G(o,t.url(),t.options.async,s,i);break;case"passback":sas.passback({formatId:t.ad.formatId,chain:t.chain});break;default:throw new Error("Unsupported script type "+t.type)}}},X=[],$=function(a){null!=a&&X.push(a)};sas.events.addLoadEvent(e,function(){o=!0,X.push=function(a){a()};for(var a=0;a<X.length;a++)X[a]()});var J=!1,Q=function(){J||(J=!0,$(function(){sas.render()}))},Z=function(a){return Math.random()<a},aa=function(a,e){if(!a)return!1;if(!e)return!1;var t=sas._networks[e.networkId];return t&&t.f&&t.f[a.formatId]&&Z(t.f[a.formatId])?!0:!1},ea=!1;sas.setup=function(e){if(ea)throw new Error("sas.setup can only be called once");ea=!0,e=e||{},l=e.domain||c,v=e.async||v,sas_ajax=v,m=e.networkid||m,h=e.renderMode||h,L=h==sas.renderMode.DEFAULT,I=e.inSequence||I,y=e.uid,C=F(C,e.partnerIds),a.sas_renderMode=h,sas.configure({id:m})},sas.call=function(t,n,r){if("string"!=typeof t&&(r=F({},n,{async:!0}),n=t,t="std"),n.siteId=n.siteId||n.siteid,n.pageId=n.pageId||n.pageid,n.pageName=n.pageName||n.pagename,n.formatId=n.formatId||n.formatid,n.siteId||k(O.ERR_SITE),n.pageId||n.pageName||k(O.ERR_PAGE),n.formatId||k(O.ERR_FORMAT),r=F({},S,{async:v,domain:l,networkId:m},r),r&&r.networkId){var s=parseInt(r.networkId);if(s>0&&!sas._networks[s])return sas._pendingCommands[s]=sas._pendingCommands[s]||[],void sas._pendingCommands[s].push(function(){sas.call(t,n,r)})}if(!aa(n,r)){if(!x[t])throw new Error("Unsupported call type "+t);if(!n||!n.siteId||!n.pageId&&!n.pageName||!n.formatId)throw new Error("Missing parameter(s)");n.passback||A.push({callType:t,ad:n,options:r}),t!=sas.callType.ONECALL&&(n.tagId=n.tagId||"sas_"+n.formatId,n.originalFormatId=n.originalFormatId||n.formatId,z(n.tagId),_[n.formatId]||(_[n.formatId]=n.tagId)),r.async&&h==sas.renderMode.READY&&Q();var o=r.onLoad;r.onLoad=function(t){var n=D(t.tagId),r=e.getElementById(n.ad.tagId);if(r){var s=r.childNodes.length>1;(a.sas_loadHandler||i)({id:n.ad.formatId,hasAd:s}),o({formatId:n.ad.formatId,tagId:n.ad.tagId,hasAd:s})}},r.async&&I?b({type:t,ad:n,options:r}):x[t](n,r)}},sas.passback=function(a){T[a.formatId]={current:-1,ad:a},sas.next(a.formatId)},sas.next=function(a){var t=D(a),n=T[t.ad.formatId];if(t&&n){var r=e.getElementById(t.ad.tagId);if(r&&(r.innerHTML=""),n.current>=0){var s=new Image;s.src=n.ad.chain[n.current].noadUrl}n.current++,n.current<n.ad.chain.length&&(n.ad.chain[n.current].countUrl&&((new Image).src=n.ad.chain[n.current].countUrl),n.ad.chain[n.current].script?P(r,n.ad.chain[n.current].script,t.options.async):G(r,n.ad.chain[n.current].scriptUrl,t.options.async))}};var ta={forceMasterFlag:!1,resetTimestamp:!0,target:void 0};sas.refresh=function(a,e){if(L){e=F({},ta,a,e);var t=i;if(arguments.length<=1&&"string"!=typeof a&&isNaN(a)){w={};for(var n in E)w[n]=!0;t=function(a){for(var e=0;e<A.length;e++)A[e].options.async&&(void 0!==a&&null!==a&&(A[e].ad.target=a),x[A[e].callType](A[e].ad,A[e].options))}}else{var n=D(a);if(!n||!n.options.async)return;t=function(a){void 0!==a&&null!==a&&(n.ad.target=a),x[sas.callType.STD](n.ad,n.options)}}u=e.forceMasterFlag?!0:u,f=e.resetTimestamp?d():f,t(e.target)}},sas.getTag=function(a){var t=D(a);return t?e.getElementById(t.ad.tagId):null},sas.clean=function(a){var t=[];if(0==arguments.length)for(var n in E)t.push(n);else{var n=D(a);n&&t.push(n.ad.tagId)}for(var r=0;r<t.length;r++){var a=t[r],n=D(a),s=e.getElementById(n.ad.tagId);n.options.onClean(n.ad.formatId,s),ia[a]&&ia[a](),s&&(s.innerHTML="")}},sas.noad=function(a){var e=D(a);e.callType==sas.callType.ONECALL&&sas_manager&&sas_manager.noad(e.ad.formatId),e.options.onNoad&&e.options.onNoad({formatId:e.ad.formatId,tagId:e.ad.tagId})},sas.render=function(a){var e=[];if(0==arguments.length){if(!L&&(h==sas.renderMode.READY&&o||h==sas.renderMode.ON_DEMAND)){L=!0;for(var t in w){var n=D(t);(n&&n.options.async||!o)&&e.push(t)}w={}}}else{var n=D(a);!n||!n.options.async&&o||(e.push(n.ad.tagId),z(n.ad.tagId))}for(var r=0;r<e.length;r++)K(e[r])},sas.setPartnerId=function(a,e){C[a]=e},sas.appendHtml=function(a,n){var r=e.getElementById(a);if(Range&&Range.prototype.createContextualFragment)r.appendChild(e.createRange().createContextualFragment(n));else{var s=e.createElement("div");s.innerHTML=n;for(var i=s.childNodes,o=0;o<i.length;o++)r.appendChild(t(i[o]))}},sas.configure=function(a){if(a&&a.id&&!(parseInt(a.id)<=0)&&!sas._networks[a.id]&&(sas._networks[a.id]=a,sas._pendingCommands[a.id]))for(var e;e=sas._pendingCommands[a.id].shift();)e()},sas.setHeaderBiddingWinner=function(a,e){N[a]=e},sas.utils.buildUrl=function(a,e,t,n,r,s,i,o,d,c,l,f){var u={};if(null!=i&&(u.nwid=i),u.siteid=t.siteId,u.pgid=t.pageId,u.pgname=t.pageName,u.fmtid=t.formatId,e==sas.callType.IFRAME&&(u.out="iframe"),s&&(u.async=1),e!=sas.callType.ONECALL){var g=n.split("=");u.visit=g.length>1?g[1]:n}else u.oc=1;u.tmstp=r,o.length>0&&(t.target&&t.target.length>0&&(t.target+=";"),t.target+="platform="+o),t.target&&(u.tgt=p(t.target)),e!=sas.callType.ONECALL&&(u.orgfmtid=t.originalFormatId,u.tag=t.tagId),d&&(u.uid=d),c&&(u.pgDomain=p(c)),f&&(u.hb_bid=f.bidder,u.hb_cpm=f.cpm,u.hb_ccy=f.currency,u.hb_dealid=f.dealId);for(var m in l)u[encodeURIComponent("extuid-"+m)]=encodeURIComponent(l[m]);u.noadcbk="sas.noad";var v=[];for(var h in u)null!=u[h]&&v.push(h+"="+u[h]);return a+"/ac?"+v.join("&")};var na=function(a,e,t){var n=a.indexOf("/");if(0>n)throw new Error("Invalid argument : sas_pageid");this.siteId=a.substring(0,n);var r=a.substring(n+1);0==r.indexOf("(")&&r.indexOf(")")==r.length-1&&(r=r.slice(1,r.length-1));var s=parseInt(r);s+""==r?this.pageId=s:this.pageName=r,this.formatId=e,this.target=t};a.sas_ads=sas,a.sas_ajax=!1,a.sas_manager=null,a.sas_unrenderedFormats=[],a.sas_callAd=sas.callAd,a.sas_callAds=sas.callAds,sas.callAd=sas.refresh,sas.callAds=function(){L?sas.refresh():sas.render()},sas.cleanAd=sas.clean,sas.cleanAds=sas.clean;var ra=function(a){var t=e.createElement("div");t.innerHTML="_"+a;var n=t.childNodes[1];return{type:n.tagName.toLowerCase(),url:n.src,width:n.width||0,height:n.height||0}},sa=function(a){var e=D(a);if(!e)return null;var t=e.ad.formatId+(e.ad.instance>1?"_"+e.ad.instance:"");if(sas_manager&&sas_manager.exists(t)){var n,r=sas_manager.formats["f"+t];n=e.options.async||r.chain?{type:r.scriptType(),url:r.scriptSrc(),chain:r.chain,width:"iframe"==r.scriptType()?r.scriptWidth():0,height:"iframe"==r.scriptType()?r.scriptHeight():0}:ra(r.scriptURL());var i=n.url;n.url=function(){return s(i)},e=U(e.ad.tagId,n)}return e};a.sas_render=function(a,e,t,n,r){sa(a),sas.render(a)},a.SmartAdServerAjaxOneCall=function(a,e){sa(e),sas.render(e)},a.SmartAdServer_iframe=function(a,e,t,n,r){var s=new na(a,e,t);s.width=n,s.height=r,sas.call("iframe",s)},a.SmartAdServer=function(a,e,t){var n=new na(a,e,t);sas.call(sas.callType.STD,n)},a.SmartAdServerAjax=SmartAdServer,a.sas_gcf=function(a){return e.getElementById("sas_"+a)},a.sas_appendToContainer=function(a,t){var n=e.getElementById("sas_"+a);if(n){if("string"==typeof t){var r=e.createElement("div");r.innerHTML=t,t=r}n.appendChild(t)}},a.sascc=function(a,e){var t=new Image;t.src=l+"/h/mcp?imgid="+a+"&pgid="+e+"&uid=[uid]&tmstp="+f+"&tgt=[targeting]"},a.sasmobile=function(a,e,t){var n=new na(a,e,t);sas.call(sas.callType.STD,n)};var ia={};a.sas_addCleanListener=function(a,e){ia[a]=e},a.sas_cleanAds=sas.clean,a.sas_cleanAd=sas.clean,sas.cmd=sas.cmd||[],sas.cmd.push=function(a){a()};for(var oa=0;oa<sas.cmd.length;oa++)sas.cmd[oa]()}}(window,document);